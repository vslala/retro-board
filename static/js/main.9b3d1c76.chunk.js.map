{"version":3,"sources":["logo.svg","img/retro-board-lp-header.svg","img/retro-board-design.png","img/retro-board-dashboard.png","img/retro-board-create-template.png","models/User.ts","env-config.ts","service/Firebase.ts","redux/types/RetroBoardActionTypes.ts","components/smart/PageFooter.tsx","components/smart/PageHeader.tsx","components/smart/layouts/LayoutAuthenticated.tsx","components/smart/layouts/LayoutUnauthenticated.tsx","models/RetroBoard.ts","models/RetroWalls.ts","models/Notes.ts","redux/reducers/RetroBoardReducers.ts","redux/store/Store.ts","components/smart/boards/MyBoards.tsx","components/dumb/EditText.tsx","components/dumb/ColorPicker.tsx","components/dumb/boards/Editor.tsx","components/dumb/boards/Like.tsx","redux/actions/RetroBoardActions.ts","service/WebSocket/DuplexCommunication.ts","service/UnauthorizedException.ts","service/RetroBoard/RetroBoardServiceV2.ts","service/RetroBoard/RetroBoardServiceFactory.ts","components/smart/boards/StickyNote.tsx","models/Note.ts","components/dumb/templates/DisplayBoardTemplate.tsx","components/dumb/templates/CreateNewTemplate.tsx","components/smart/boards/CreateRetroBoard.tsx","models/RetroWall.ts","components/smart/boards/CreateRetroBoardManager.tsx","components/smart/templates/TemplateManager.tsx","containers/HomePage.tsx","components/dumb/boards/AddNewNote.tsx","components/dumb/CarouselView.tsx","components/smart/boards/StickyWall.tsx","components/dumb/ShareBoard.tsx","containers/RetroBoardPage.tsx","containers/LandingPage.tsx","components/smart/Logout.tsx","components/dumb/teams/AddNewTeamMember.tsx","components/dumb/teams/TeamCard.tsx","models/Team.ts","components/dumb/teams/CreateNewTeam.tsx","service/Teams/TeamsServiceV1.ts","service/Teams/TeamsServiceFactory.ts","containers/TeamsPage.tsx","service/Templates/TemplateService.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","User","uid","idToken","username","displayName","email","isEmailVerified","ID_TOKEN","USER_INFO","REFRESH_TOKEN","PROTOCOL","window","location","protocol","HOST_NAMES","Map","set","host","SERVICE_URL","get","console","log","request","axios","create","baseURL","interceptors","use","config","headers","localStorage","getItem","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","Firebase","React","createContext","auth","authenticatedUser","googleAuthenticationProvider","firebase","GoogleAuthProvider","loggedInUser","initializeApp","this","database","signInWithPopup","userCredentials","persistLoggedInUserInfo","generateRandomText","length","result","characters","charactersLength","i","charAt","Math","floor","random","user","getIdToken","isAnonymous","post","status","setItem","JSON","stringify","refreshToken","loggedInUserJson","parse","fetch","method","body","grant_type","refresh_token","newIdToken","json","data","id_token","signInAnonymously","clear","instance","ActionTypes","SortType","PageFooter","className","href","withRouter","props","getInstance","getLoggedInUser","Navbar","bg","expand","to","Toggle","aria-controls","Collapse","id","Nav","Button","onClick","history","push","variant","LayoutAuthenticated","state","isUserAuthenticated","isLoading","then","response","setState","Spinner","animation","Container","fluid","children","pathname","referrer","Component","LayoutUnauthenticated","search","includes","RETRO_BOARD_STYLES","wentWell","stickyNote","backgroundColor","textColor","likeBtnPosition","toImprove","actionItems","RetroBoard","name","userId","maxLikes","blur","retroBoard","RetroWalls","retroWalls","retroBoardId","walls","Notes","notes","_notes","_removeDuplicates","arr","forEach","note","index","findIndex","item","noteId","initialState","sortByVotes","sort","item1","item2","itemOneLikesCount","itemTwoLikesCount","likedBy","logger","createLogger","store","createStore","action","type","CREATE_RETRO_BOARD","payload","CREATE_RETRO_WALLS","CREATE_NOTE","UPDATE_NOTE","modifiedNotes","map","Object","assign","DELETE_NOTE","GET_NOTES","SORT","SORT_BY_VOTES","SORT_BY_TIMESTAMP","REFRESH_WALLS","composeWithDevTools","applyMiddleware","ReduxPromise","MyBoards","retroBoardService","useState","boards","setBoards","loader","setLoader","useEffect","a","getMyBoards","myBoards","_getMyBoards","catch","e","Row","style","position","top","left","board","Col","lg","key","Card","Body","Footer","deleteBoard","boardId","filter","handleDelete","color","EditText","showForm","setForm","textVal","setTextVal","handleOnBlur","onSubmit","Form","preventDefault","handleSubmit","FormGroup","Control","value","onBlur","onChange","currentTarget","handleChange","FormLabel","fontSize","fontWeight","marginRight","title","ColorPicker","setColor","DropdownButton","Dropdown","Item","onChangeComplete","handleOnChangeComplete","Editor","editorText","noteText","handleKeyboardKeyPress","handleEnter","replace","bind","InputGroup","FormControl","as","autoFocus","data-testid","onKeyUp","aria-label","Like","users","handleUpVote","getCurrentUser","userJson","Badge","cursor","margin","Link","RetroBoardActions","DuplexCommunication","isConnected","socket","SockJS","stomp","Stomp","over","accessToken","connect","success","error","connected","topic","callback","subscribeInterval","setInterval","clearInterval","subscribe","UnauthorizedException","message","RetroBoardServiceV2","newNote","Error","retroBoardResponse","retroWallsResponse","delete","params","retroWallId","uri","wallId","isAuth","Promise","resolve","notesData","sortedByVotes","obj1","obj2","modifiedNote","put","selectedTeams","itemId","teamIds","selectedTeam","teamId","RetroBoardServiceFactory","StickyNote","showToast","toastMessage","stickyNoteId","showEditor","handleOnClick","modifyStickyNote","getNoteWhenLiked","updateNote","createdBy","totalLikes","some","u","hasVotedBefore","_getTotalLikesForUser","maxAllowedLikes","sortBy","setTimeout","cardBodyContent","width","source","escapeHtml","mergedNotes","split","_mergeNoteIfRequired","padding","fontFamily","minHeight","modifiedNoteText","right","bottom","deleteNote","Toast","show","dispatch","service","retroBoardActions","Note","String","Date","now","DisplayBoardTemplate","boardTemplate","removeWall","wall","wallTitle","noteStyle","NONE","wallStyle","CreateNewTemplate","setShow","hideModal","templateTitle","templateId","setBoardTemplate","setWallTitle","setTextColor","setBackgroundColor","border","Modal","onHide","dialogClassName","Header","text","inline","placeholder","handleWallName","marginLeft","hex","newTemplateWall","wallOrder","disabled","slice","onCreateTemplate","CreateRetroBoard","onCreateRetroBoard","formInput","setFormInput","handleClose","handleCreateRetroBoard","closeButton","Title","Group","Label","autoComplete","RetroWall","sortCards","useDispatch","boardInput","createNewRetroBoard","createRetroBoard","templateWalls","createRetroWalls","templateWall","newInstance","setWallOrder","boardWalls","templates","setTemplates","handleCreateTemplate","templateService","createBoardTemplate","persistedBoardTemplate","deleteTemplate","deleteBoardTemplate","template","getBoardTemplates","boardTemplates","md","CreateRetroBoardManager","HomePage","document","AddNewNote","addNote","CarouselView","carouselView","setCarouselView","setIndex","Carousel","activeIndex","onSelect","selectedIndex","interval","items","height","Caption","overflowY","borderTop","formatText","StickyWall","retroWall","handleDragStart","handleDrop","handleDragOver","getNotes","getDataOnUpdate","addNewNote","droppedOnNote","draggedNote","dataTransfer","getData","dropEffect","setData","wallNotes","stickers","ListGroupItem","marginBottom","draggable","onDragStart","onDragOver","onDrop","ListGroup","createNote","ShareBoard","teams","pageLoader","setPageLoader","setSelectedTeams","undefined","setResponse","shareWith","Alert","multiple","selectedItems","selectedOptions","find","team","teamName","ProgressBar","animated","SortSelect","sortSelectValue","setSortSelectValue","target","defaultValue","BlurToggle","retroBoardState","useSelector","useReduxSelector","val","updateRetroBoard","isChecked","Check","checked","label","RetroBoardPage","retroBoardTitle","convertJsonToCsv","shareBoardWith","match","initRetroBoard","getRetroBoardById","teamsService","getMyTeams","getRetroBoardDataOnUpdate","getRetroWalls","wallName","upvotes","shareBoard","borderBottom","filename","refreshRetroWalls","getReferrerUrl","tryAnonymousLogin","authenticateAnonymousUser","src","logo","alt","textAlign","authenticateUser","xmlns","viewBox","fill","fill-opacity","d","Image","headerImg","retroBoardImg","retroBoardTemplateImg","retroBoardDashboardImg","Logout","logout","AddNewTeamMember","showModal","setShowModal","closeModal","teamMemberEmail","setTeamMemberEmail","msg","setError","addTeamMember","TeamCard","currUser","setCurrUser","openModal","setOpenModal","removeUser","removeMember","isOwner","deleteTeam","teamMembers","teamMember","render","Team","CreateNewTeam","setTeamName","createTeam","TeamsServiceV1","newTeamResponse","teamsResponse","TeamsServiceFactory","setTeams","myTeams","createNewTeam","newTeam","member","removeTeamMember","newTeams","getTeamMember","teamMembersResponse","itr","t","alert","sm","xs","TemplateService","templateResponse","App","isLogInFlowExecuted","exact","path","component","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9b3d1c76.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","module.exports = __webpack_public_path__ + \"static/media/retro-board-lp-header.07cde02c.svg\";","module.exports = __webpack_public_path__ + \"static/media/retro-board-design.dbdaebce.png\";","module.exports = __webpack_public_path__ + \"static/media/retro-board-dashboard.70ce411e.png\";","module.exports = __webpack_public_path__ + \"static/media/retro-board-create-template.734256dc.png\";","class User {\n    public static ID_TOKEN = \"idToken\";\n    public static USER_INFO = \"userInfo\";\n    public static REFRESH_TOKEN = \"refreshToken\";\n\n    public uid: string = \"\"\n    public idToken: string = \"\"\n    public username: string | undefined\n    public displayName: string = \"\"\n    public email: string = \"\"\n    public isEmailVerified: boolean = false;\n}\n\nexport default User","import axios from \"axios\";\nimport User from \"./models/User\";\n\nconst API_HOST_LOCAL = 'localhost:8082';\nconst API_INET_LOCAL = '192.168.1.6:8082';\nconst API_HOST_TEST = '139.59.25.205:8082';\nconst API_HOST_PROD = 'retro-service.bemyaficionado.com';\n\nconst UI_HOST_LOCAL = 'localhost:3000';\nconst UI_INET_LOCAL = '192.168.1.6:3000';\nconst UI_HOST_TEST = 'localhost:3001';\nconst UI_HOST_PROD = 'retro.bemyaficionado.com';\nconst UI_HOST_GITHUB = 'vslala.github.io';\n\nconst PROTOCOL = window.location.protocol + \"//\";\nconst HOST_NAMES:Map<string,string> = new Map<string,string>();\nHOST_NAMES.set(UI_HOST_LOCAL, API_HOST_LOCAL);\nHOST_NAMES.set(UI_INET_LOCAL, API_INET_LOCAL);\nHOST_NAMES.set(UI_HOST_TEST, API_HOST_TEST);\nHOST_NAMES.set(UI_HOST_PROD, API_HOST_PROD);\nHOST_NAMES.set(UI_HOST_GITHUB, API_HOST_PROD);\n\nlet host = window.location.host;\n// @ts-ignore\nexport const SERVICE_URL = PROTOCOL + HOST_NAMES.get(host); // hostname:port\n\nconsole.log(\"SERVICE_URL: \", SERVICE_URL);\n\nexport const request = axios.create({\n    baseURL: SERVICE_URL\n});\n\nrequest.interceptors.request.use((config) => {\n    config.headers = {\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${localStorage.getItem(User.ID_TOKEN)!}`,\n        'Accept': '*/*'\n    }\n    return config;\n});\n","import React from 'react'\nimport firebase from \"firebase\";\nimport User from \"../models/User\";\nimport {request, SERVICE_URL} from \"../env-config\";\n\nexport const config = {\n    apiKey: process.env.REACT_APP_API_KEY,\n    authDomain: process.env.REACT_APP_AUTH_DOMAIN,\n    databaseURL: process.env.REACT_APP_DATABASE_URL,\n    projectId: process.env.REACT_APP_PROJECT_ID,\n    storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\n    messagingSenderId: process.env.REACT_APP_MESSAGING_SENDER_ID,\n}\n\nexport interface RefreshTokenResponse {\n    access_token: string\n    expires_in: number\n    token_type: string,\n    refresh_token: string,\n    id_token: string,\n    user_id: string,\n    project_id: string\n}\n\nexport const FirebaseContext = React.createContext(null)\n\nclass Firebase {\n\n    private static instance: Firebase\n\n    private auth: firebase.auth.Auth\n    private authenticatedUser: firebase.auth.UserCredential | undefined;\n    private googleAuthenticationProvider = new firebase.auth.GoogleAuthProvider()\n    private loggedInUser: User | undefined\n\n    private constructor() {\n        firebase.initializeApp(config)\n        this.auth = firebase.auth()\n\n        \n    }\n\n    public static getInstance() {\n        if (!Firebase.instance) {\n            Firebase.instance = new Firebase();\n        }\n\n        return Firebase.instance;\n    }\n\n    public getDatabase(): firebase.database.Database {\n        return firebase.database()\n    }\n\n    public async authenticateUser(): Promise<void> {\n        let userCredentials = await this.auth.signInWithPopup(this.googleAuthenticationProvider)\n        await this.persistLoggedInUserInfo(userCredentials);\n    }\n\n    private async persistLoggedInUserInfo(userCredentials: firebase.auth.UserCredential) {\n\n        function generateRandomText(length: number) {\n            let result           = '';\n            let characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n            let charactersLength = characters.length;\n            for ( let i = 0; i < length; i++ ) {\n                result += characters.charAt(Math.floor(Math.random() * charactersLength));\n            }\n            return result;\n        }\n\n        let idToken = await userCredentials.user!.getIdToken()\n\n        console.log(\"Logged In User: \", userCredentials)\n\n        if (userCredentials.user) {\n            this.loggedInUser = new User()\n            this.loggedInUser.displayName = userCredentials.user.displayName || `${generateRandomText(5)}`\n            this.loggedInUser.idToken = idToken\n            this.loggedInUser.email = userCredentials.user.email || `${generateRandomText(5)}@retro.com`\n            this.loggedInUser.uid = userCredentials.user.uid || \"\"\n            this.loggedInUser.isEmailVerified = !userCredentials.user.isAnonymous;\n\n            let response = await request.post(\"/login\", userCredentials.user);\n            if (response.status === 200) {\n                localStorage.setItem(User.ID_TOKEN, idToken);\n                localStorage.setItem(User.USER_INFO, JSON.stringify(this.loggedInUser))\n                localStorage.setItem(User.REFRESH_TOKEN, userCredentials.user.refreshToken)\n            }\n        }\n\n\n    }\n\n    public getLoggedInUser(): User | undefined {\n        let loggedInUserJson = localStorage.getItem(User.USER_INFO)!;\n        if (loggedInUserJson)\n            return JSON.parse(loggedInUserJson) as User\n    }\n\n    public async isUserAuthenticated(): Promise<boolean> {\n        let refreshToken = localStorage.getItem(User.REFRESH_TOKEN);\n        let idToken = localStorage.getItem(User.ID_TOKEN);\n\n\n        if (refreshToken) {\n            if (idToken) {\n                let response = await fetch(`${SERVICE_URL}/token/verify?id_token=${idToken}`)\n                if (200 === response.status) {\n                    return true;\n                } else {\n                    let newIdToken = await fetch(`https://securetoken.googleapis.com/v1/token?key=${config.apiKey}`, {\n                        method: \"POST\",\n                        body: JSON.stringify({\n                            grant_type: \"refresh_token\",\n                            refresh_token: refreshToken\n                        })\n                    });\n                    let data = (await newIdToken.json()) as RefreshTokenResponse;\n                    localStorage.setItem(User.ID_TOKEN, data.id_token);\n                    localStorage.setItem(User.REFRESH_TOKEN, data.refresh_token);\n                }\n            }\n\n            console.log(\"User is authenticated!\");\n            return true;\n        }\n\n        console.log(\"User is not authenticated!\");\n        return false;\n    }\n\n    public getIdToken(): string {\n        return localStorage.getItem(User.ID_TOKEN)!;\n    }\n\n    public async authenticateAnonymousUser(): Promise<void> {\n        let userCredentials = await this.auth.signInAnonymously()\n        await this.persistLoggedInUserInfo(userCredentials)\n    }\n\n    logout() {\n        localStorage.clear()\n    }\n}\n\n\nexport default Firebase","import RetroBoard from \"../../models/RetroBoard\";\nimport RetroWalls from \"../../models/RetroWalls\";\nimport Note from \"../../models/Note\";\nimport Notes from \"../../models/Notes\";\n\nexport enum ActionTypes {\n    SORT,\n    GET_NOTES,\n    RETRIEVE_RETRO_BOARD,\n    UPDATE_NOTE,\n    DELETE_NOTE,\n    CREATE_NOTE,\n    CREATE_RETRO_WALLS,\n    CREATE_RETRO_BOARD,\n    REFRESH_WALLS\n}\n\nexport enum SortType {\n    NONE,\n    SORT_BY_VOTES,\n    SORT_BY_TIMESTAMP\n}\n\ninterface CreateRetroBoardAction {\n    type: typeof ActionTypes.CREATE_RETRO_BOARD\n    payload: RetroBoard\n}\n\ninterface CreateRetroWallsAction {\n    type: typeof ActionTypes.CREATE_RETRO_WALLS\n    payload: RetroWalls\n}\n\ninterface CreateNoteAction {\n    type: typeof ActionTypes.CREATE_NOTE\n    payload: Note\n}\n\ninterface UpdateNoteAction {\n    type: typeof ActionTypes.UPDATE_NOTE\n    payload: Note\n}\n\ninterface DeleteNoteAction {\n    type: typeof ActionTypes.DELETE_NOTE\n    payload: Note\n}\n\ninterface GetNotesAction {\n    type: typeof ActionTypes.GET_NOTES\n    payload: Notes\n}\n\ninterface Sort {\n    type: typeof ActionTypes.SORT\n    payload: SortType\n}\n\ninterface RefreshWalls {\n    type: typeof ActionTypes.REFRESH_WALLS\n    payload: RetroWalls\n}\n\nexport type RetroBoardActionTypes = CreateRetroBoardAction | CreateRetroWallsAction | CreateNoteAction |\n    UpdateNoteAction | DeleteNoteAction | GetNotesAction | Sort | RefreshWalls","import React, {FunctionComponent} from 'react'\n\nconst PageFooter: FunctionComponent = () => {\n\n    return <footer className=\"mt-auto font-small blue pt-sm-3\">\n        <div className=\"footer-copyright text-center py-1\">\n            <p><a href=\"https://www.bemyaficionado.com\">Made by <strong>Varun Shrivastava</strong></a>\n            </p>\n            <p><strong>TheRetroBoard©2021</strong></p>\n        </div>\n    </footer>\n} \n\nexport default PageFooter","import React from 'react'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport Button from \"react-bootstrap/Button\";\nimport {Link, withRouter} from \"react-router-dom\";\nimport {RouteComponentProps} from \"react-router\";\nimport Firebase from \"../../service/Firebase\";\n\ninterface Props extends RouteComponentProps {\n\n}\nconst PageHeader: React.FunctionComponent<Props> = (props:Props) => {\n    const logout = () => {\n        localStorage.clear();\n        props.history.push(\"/login\");\n    }\n\n    let loggedInUser = Firebase.getInstance().getLoggedInUser()!;\n\n    return <Navbar bg=\"light\" expand=\"lg\">\n        <Link to={\"/\"} className={\"navbar-brand\"}>Retro Board</Link>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\"/>\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"mr-auto\">\n                <Link className={\"nav-link\"} to={\"/\"}>Home</Link>\n                {\n                    loggedInUser.isEmailVerified ?\n                        <Link className={\"nav-link\"} to={\"/teams\"}>Teams</Link>: <></>\n                }\n\n                {/*<Nav.Link href=\"#link\">Link</Nav.Link>*/}\n                {/*<NavDropdown title=\"Dropdown\" id=\"basic-nav-dropdown\">*/}\n                {/*    <NavDropdown.Item href=\"#action/3.1\">Action</NavDropdown.Item>*/}\n                {/*    <NavDropdown.Item href=\"#action/3.2\">Another action</NavDropdown.Item>*/}\n                {/*    <NavDropdown.Item href=\"#action/3.3\">Something</NavDropdown.Item>*/}\n                {/*    <NavDropdown.Divider/>*/}\n                {/*    <NavDropdown.Item href=\"#action/3.4\">Separated link</NavDropdown.Item>*/}\n                {/*</NavDropdown>*/}\n            </Nav>\n            <Button onClick={logout} variant={\"outline-primary\"}>\n                <i className={\"fa fa-sign-out\"} />\n            </Button>\n        </Navbar.Collapse>\n    </Navbar>\n}\n\nexport default withRouter(PageHeader)","import React from 'react'\nimport {Redirect, RouteComponentProps, withRouter} from \"react-router-dom\";\nimport Firebase from \"../../../service/Firebase\";\nimport Container from \"react-bootstrap/Container\";\nimport PageFooter from \"../PageFooter\";\nimport PageHeader from \"../PageHeader\";\nimport {Spinner} from \"react-bootstrap\";\n\ninterface Props extends RouteComponentProps {\n}\n\ninterface State {\n    isUserAuthenticated: boolean\n    isLoading: boolean\n}\n\nclass LayoutAuthenticated extends React.Component<Props, State> {\n\n    state: State = {\n        isUserAuthenticated: false,\n        isLoading: true\n    };\n\n    componentDidMount(): void {\n        Firebase.getInstance().isUserAuthenticated().then(response => {\n            this.setState({isUserAuthenticated: response, isLoading: false});\n        });\n    }\n\n    render(): JSX.Element {\n        if (this.state.isLoading) return <Spinner animation={\"border\"} />;\n        else if (this.state.isUserAuthenticated)\n            return <Container fluid={true} className={\"d-flex w-100 h-100 p-3 mx-auto flex-column\"}>\n                <PageHeader/>\n                {this.props.children}\n                <PageFooter/>\n            </Container>\n        else\n            return <Redirect to={{pathname: \"/login\", state: {referrer: this.props.location.pathname}}}/>\n    }\n}\n\nexport default withRouter(LayoutAuthenticated)","import React from 'react'\nimport {Redirect, RouteComponentProps, withRouter} from \"react-router-dom\";\nimport Firebase from \"../../../service/Firebase\";\nimport Container from \"react-bootstrap/Container\";\nimport PageFooter from \"../PageFooter\";\n\ninterface Props extends RouteComponentProps {\n    success: () => void\n}\n\nclass LayoutUnauthenticated extends React.Component<Props> {\n\n    render(): JSX.Element {\n\n        const {pathname, search} = this.props.location\n\n        // if user is logged in and requests for login page\n        // then redirect it to home (/)\n        // otherwise, forward the request to original address\n        if (Firebase.getInstance().getLoggedInUser()) {\n            if (pathname.includes(\"login\"))\n                return <Redirect to={\"/\"}/>\n            return <Redirect to={`${pathname}${search}`}/>\n        }\n\n        return <>\n            {this.props.children}\n        </>\n    }\n}\n\nexport default withRouter(LayoutUnauthenticated)","import {RetroBoardModel} from \"../interfaces/RetroBoardModel\";\nimport {WallStyle} from \"../interfaces/StickyWallModel\";\n\n\nconst WENT_WELL_WALL_STYLE: WallStyle = {\n    stickyNote: {\n        backgroundColor: \"#009688\",\n        textColor: \"white\",\n        likeBtnPosition: \"right\"\n    }\n}\n\nconst TO_IMPROVE_WALL_STYLE: WallStyle = {\n    stickyNote: {\n        backgroundColor: \"#e91e63\",\n        textColor: \"white\",\n        likeBtnPosition: \"right\"\n    }\n}\n\nconst ACTION_ITEMS_WALL_STYLE: WallStyle = {\n    stickyNote: {\n        backgroundColor: \"#9c27b0\",\n        textColor: \"white\",\n        likeBtnPosition: \"right\"\n    }\n}\nexport const RETRO_BOARD_STYLES = {\n    wentWell: WENT_WELL_WALL_STYLE,\n    toImprove: TO_IMPROVE_WALL_STYLE,\n    actionItems: ACTION_ITEMS_WALL_STYLE\n}\n\nclass RetroBoard implements RetroBoardModel {\n    id: string\n    name: string\n    maxLikes:number\n    blur: \"on\" | \"off\"\n    userId: string\n\n    constructor(id:string, name:string, userId: string) {\n        this.id = id\n        this.name = name\n        this.maxLikes = 5\n        this.blur = \"off\"\n        this.userId = userId\n    }\n\n    public static newInstance(id:string, name:string, userId: string) {\n        return  new RetroBoard(id, name, userId);\n    }\n\n    public static toJSON(retroBoard: RetroBoard) {\n        return JSON.stringify(retroBoard)\n    }\n    \n    public static fromJSON(json:string): RetroBoard {\n        return JSON.parse(json) as RetroBoard\n    }\n}\n\nexport default RetroBoard","import RetroWall from \"./RetroWall\";\n\nclass RetroWalls {\n    retroBoardId: string = \"\"\n    walls: RetroWall[]\n    \n    constructor(retroWalls: RetroWall[]) {\n        this.walls = retroWalls\n    }\n    \n    public static toJSON(retroWalls:RetroWalls) {\n        return JSON.stringify(retroWalls)\n    }\n    \n    public static fromJSON(json:string): RetroWalls {\n        return JSON.parse(json)\n    }\n}\n\nexport default RetroWalls","import Note from \"./Note\";\n\nclass Notes {\n    get notes(): Note[] {\n        return [...this._notes];\n    }\n    \n    private readonly _notes: Note[]\n    \n    constructor(notes:Note[]) {\n        this._notes = this._removeDuplicates(notes)\n    }\n    \n    public static fromJSON(json:string): Notes {\n        \n        return JSON.parse(json)\n    }\n    \n    public static toJSON(notes: Notes): string {\n        return JSON.stringify(notes)\n    }\n    \n    private _removeDuplicates(notes: Note[]) {\n        let arr: Note[] = []\n        notes.forEach((note, index) => {\n            let itemIndex = arr.findIndex((item) => item.noteId === note.noteId)\n            if (itemIndex === -1)\n                arr.push(note)\n        })\n        return arr\n    }\n\n}\n\nexport default Notes","import RetroBoardState from \"./RetroBoardState\";\nimport RetroBoard from \"../../models/RetroBoard\";\nimport RetroWalls from \"../../models/RetroWalls\";\nimport Notes from \"../../models/Notes\";\nimport {ActionTypes, RetroBoardActionTypes, SortType} from \"../types/RetroBoardActionTypes\";\nimport Note from \"../../models/Note\";\n\nexport const initialState: RetroBoardState = {\n    retroBoard: new RetroBoard(\"\", \"\", \"\"),\n    retroWalls: new RetroWalls([]),\n    notes: new Notes([])\n}\n\nfunction sortByVotes(notes: Notes) {\n    return new Notes(notes.notes.sort((item1, item2) => {\n        let itemOneLikesCount = 0\n        let itemTwoLikesCount = 0\n\n        if (item1.likedBy)\n            itemOneLikesCount = item1.likedBy.length\n        if (item2.likedBy)\n            itemTwoLikesCount = item2.likedBy.length\n\n        return 0 - (itemOneLikesCount > itemTwoLikesCount ? 1 : -1)\n    }))\n}\n\nexport function retroBoardReducer(state = initialState, action: RetroBoardActionTypes): RetroBoardState {\n\n    switch (action.type) {\n        case ActionTypes.CREATE_RETRO_BOARD:\n            return {\n                ...state,\n                retroBoard: action.payload\n            }\n\n        case ActionTypes.CREATE_RETRO_WALLS:\n            return {\n                ...state,\n                retroWalls: action.payload,\n            }\n\n        case ActionTypes.CREATE_NOTE:\n            return {\n                ...state,\n                notes: new Notes([\n                    ...state.notes.notes,\n                    action.payload\n                ])\n            }\n\n        case ActionTypes.UPDATE_NOTE:\n            let modifiedNotes = state.notes.notes.map((note) =>\n                note.noteId === action.payload.noteId ? Object.assign({}, note, action.payload) : note)\n\n            return {\n                ...state,\n                notes: new Notes(modifiedNotes)\n            }\n\n        case ActionTypes.DELETE_NOTE:\n            let notes: Note[] = []\n            state.notes.notes.forEach((note) => {\n\n                if (note.noteId !== action.payload.noteId)\n                    notes.push(note)\n            })\n\n            return {\n                ...state,\n                notes: new Notes(notes)\n            }\n\n        case ActionTypes.GET_NOTES:\n            console.log(\"Get Notes: \", action.payload)\n            return {\n                ...state,\n                notes: action.payload\n            }\n\n        case ActionTypes.SORT:\n            switch (action.payload) {\n                case SortType.SORT_BY_VOTES:\n                    return {\n                        ...state,\n                        notes: sortByVotes(state.notes)\n                    }\n                case SortType.SORT_BY_TIMESTAMP:\n                    return {\n                        // TODO: sort notes by timestamp\n                        ...state\n                    }\n                default:\n                    return state\n            }\n\n        case ActionTypes.REFRESH_WALLS:\n            return {\n                ...state,\n                retroWalls: action.payload,\n                notes: new Notes([])\n            }\n\n\n    }\n    return initialState\n}","import {createLogger} from \"redux-logger\";\nimport {applyMiddleware, createStore} from \"redux\";\nimport {initialState, retroBoardReducer} from \"../reducers/RetroBoardReducers\";\nimport {composeWithDevTools} from \"redux-devtools-extension\";\nimport ReduxPromise from 'redux-promise'\n\nconst logger = createLogger();\n\nconst store = createStore(retroBoardReducer, initialState, composeWithDevTools(\n    applyMiddleware(ReduxPromise, logger),\n));\n\nexport default store;","import React, {FunctionComponent, useEffect, useState} from 'react'\nimport RetroBoard from \"../../../models/RetroBoard\";\nimport Card from \"react-bootstrap/Card\";\nimport {Row, Spinner} from 'react-bootstrap';\nimport Col from \"react-bootstrap/Col\";\nimport {Link} from \"react-router-dom\";\nimport Firebase from \"../../../service/Firebase\";\nimport Button from \"react-bootstrap/Button\";\nimport {RetroBoardService} from \"../../../service/RetroBoard/RetroBoardService\";\n\ninterface Props {\n    retroBoardService: RetroBoardService\n}\n\nconst MyBoards: FunctionComponent<Props> = ({retroBoardService}) => {\n\n    const [boards, setBoards] = useState<RetroBoard[]>([])\n    const [loader, setLoader] = useState<boolean>(false)\n\n\n    useEffect(() => {\n        async function _getMyBoards() {\n            let myBoards = await retroBoardService.getMyBoards()\n            setBoards(myBoards)\n        }\n        \n        _getMyBoards().catch((e) => console.log(\"User not logged In!\", e));\n    }, [retroBoardService])\n\n    const handleDelete = (board: RetroBoard) => {\n        setLoader(true)\n        retroBoardService.deleteBoard(board).then(boardId => {\n            setLoader(false)\n            setBoards(boards.filter(board => board.id !== boardId))\n        }).catch(e => {console.log(\"Error deleting board! \", e); setLoader(false)})\n    }\n\n    return <>\n        <Row>\n            {loader? <Spinner animation=\"grow\" variant={\"danger\"} style={{position: \"absolute\", top: \"50%\", left: \"50%\"}} />:<></>}\n            {boards.map((board, index) =>\n\n                <Col lg={\"4\"} key={index}>\n                    <Card>\n                        <Card.Body>\n                            <h4>{board.name}</h4>\n                        </Card.Body>\n                        <Card.Footer>\n                            <Link to={`/retro-board/${Firebase.getInstance().getLoggedInUser()!.uid}/${board.id}`}>URL</Link>\n                            <Button variant={\"link\"} className={\"pull-right\"} onClick={() => handleDelete(board)}>\n                                <i className={\"fa fa-trash-o fa-lg\"} style={{color: \"red\"}} />\n                            </Button>\n                        </Card.Footer>\n                    </Card>\n                </Col>\n            )}\n        </Row>\n\n    </>\n}\n\nexport default MyBoards","import * as React from 'react';\nimport {useState} from 'react';\nimport {Button, Form, FormGroup, FormLabel} from \"react-bootstrap\";\n\ninterface Props {\n    title: string\n    onSubmit: (textVal:string) => void\n}\nconst EditText: React.FunctionComponent<Props> = (props:Props) => {\n\n    const [showForm, setForm] = useState(false);\n    const [textVal, setTextVal] = useState(\"\");\n\n    const handleChange = (e:React.ChangeEvent<HTMLInputElement>) => {\n        setTextVal(e.currentTarget.value);\n    }\n\n    const handleSubmit = (e:React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        handleOnBlur();\n    }\n\n    const handleOnBlur = () => {\n        props.onSubmit(textVal);\n        setForm(false);\n    }\n\n    if (showForm) {\n        return <>\n            <Form onSubmit={(e:React.FormEvent<HTMLFormElement>) => handleSubmit(e)}>\n                <FormGroup>\n                    <Form.Control value={textVal} onBlur={handleOnBlur}\n                                  onChange={(e:React.ChangeEvent<HTMLInputElement>) => handleChange(e)} />\n                </FormGroup>\n            </Form>\n        </>\n    }\n\n    return <>\n        <FormLabel>\n            <span style={{fontSize: \"x-large\", fontWeight: \"bold\", marginRight: \"5px\"}}>{props.title}</span>\n            <Button variant={\"light\"} onClick={() => setForm(true)}><i className={\"fa fa-pencil-square-o\"} /></Button>\n        </FormLabel>\n    </>\n\n}\n\nexport default EditText;","import * as React from 'react';\nimport {useState} from 'react';\nimport {Dropdown, DropdownButton} from \"react-bootstrap\";\nimport {SwatchesPicker} from \"react-color\";\n\ninterface ColorPickerProps {\n    title: string\n    handleOnChangeComplete: (color: any) => void\n}\n\nconst ColorPicker: React.FunctionComponent<ColorPickerProps> = (props: ColorPickerProps) => {\n    const [color, setColor] = useState<any>(\"#ffffff\");\n    const handleChange = (color:any) => {\n        setColor(color);\n        props.handleOnChangeComplete(color);\n    }\n    return <>\n        <DropdownButton id=\"background_color_picker\" title={props.title} variant={\"light\"} >\n            <Dropdown.Item>\n                <SwatchesPicker color={color} onChangeComplete={handleChange} />\n            </Dropdown.Item>\n        </DropdownButton>\n    </>\n}\n\nexport default ColorPicker;","import React from 'react'\nimport {FormControl, InputGroup} from \"react-bootstrap\";\n\ninterface Props {\n    handleEnter: (note: string) => void,\n    noteText?: string\n}\ninterface EditorModel {\n    editorText: string\n}\n\nclass Editor extends React.Component<Props, EditorModel> {\n\n    constructor(props: Props) {\n        super(props)\n        this.handleChange = this.handleChange.bind(this)\n    }\n    \n    state: EditorModel = {\n        editorText: this.props.noteText ? this.props.noteText : \"\"\n    }\n    \n    handleKeyboardKeyPress = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n        if (e.key === 'Escape') {\n            this.props.handleEnter(this.state.editorText.replace(/\\n/g, \"\"))\n        }\n        if (e.key === 'Enter') {\n            this.setState({editorText: \"\"})\n            this.props.handleEnter(this.state.editorText.replace(/\\n/g, \"\"))\n        }\n    }\n    \n    handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n        let editorText = e.currentTarget.value\n        this.setState({editorText: editorText})\n    }\n    \n    render() {\n        return <InputGroup>\n            <FormControl as={\"textarea\"} autoFocus\n                data-testid={\"editor_textarea\"}\n                onKeyUp={this.handleKeyboardKeyPress}\n                onChange={this.handleChange} value={this.state.editorText} aria-label={\"Note Editor\"} \n                onBlur={() => this.props.handleEnter(this.state.editorText.replace(/\\n/g, \"\"))}\n                />\n        </InputGroup>\n    }\n}\n\nexport default Editor","import React from 'react'\nimport User from \"../../../models/User\";\nimport {Badge, Card} from \"react-bootstrap\";\n\ninterface LikeProps {\n    stickyNoteId: string\n    likedBy: User[]\n    handleUpVote: (user:User) => void\n}\n\ninterface LikeState {\n    users: User[]\n}\n\nclass Like extends React.Component<LikeProps, LikeState> {\n\n    state: LikeState = {\n        users: this.props.likedBy\n    }\n\n    constructor(props: LikeProps) {\n        super(props)\n        this.handleUpVote = this.handleUpVote.bind(this)\n    }\n\n    handleUpVote(e:any) {\n        e.preventDefault()\n        // get the username from localstorage\n        let user: User = this.getCurrentUser() as User\n        \n        // add the user into the state array\n        if (user) {\n            this.props.handleUpVote(user)\n        }\n    }\n\n    private getCurrentUser(): User | undefined {\n        let userJson = localStorage.getItem(User.USER_INFO)\n        if (userJson)\n            return JSON.parse(userJson)\n        else\n            console.log(\"Error: User is not logged in!\", ) // TODO: show error message\n    }\n\n    render() {\n        \n        return <div data-testid={\"like_btn\"} onClick={this.handleUpVote}>\n            <Badge variant=\"dark\" style={{cursor: \"pointer\", margin: \"0\"}}><span data-testid={\"total_votes\"}>{this.props.likedBy.length}</span></Badge>\n            <Card.Link style={{color: \"white\"}} href={\"#\"}><i data-testid={\"like_thumbs_up\"} style={{color: \"darkgrey\"}} className={\"fa fa-thumbs-up\"}></i></Card.Link>\n        </div>\n    }\n}\n\nexport default Like","import RetroBoard from \"../../models/RetroBoard\";\nimport {ActionTypes, RetroBoardActionTypes, SortType} from \"../types/RetroBoardActionTypes\";\nimport RetroWalls from \"../../models/RetroWalls\";\nimport Note from \"../../models/Note\";\nimport Notes from \"../../models/Notes\";\n\nclass RetroBoardActions {\n    \n    public createRetroBoard(retroBoard: RetroBoard): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.CREATE_RETRO_BOARD,\n            payload: retroBoard\n        }\n    }\n    \n    public createRetroWalls(retroWalls: RetroWalls): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.CREATE_RETRO_WALLS,\n            payload: retroWalls\n        }\n    }\n    \n    public createNote(note: Note): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.CREATE_NOTE,\n            payload: note\n        }\n    }\n    \n    public updateNote(note: Note): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.UPDATE_NOTE,\n            payload: note\n        }\n    }\n    \n    public deleteNote(note: Note): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.DELETE_NOTE,\n            payload: note\n        }\n    }\n\n    public getNotes(notes: Notes): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.GET_NOTES,\n            payload: notes\n        }\n    }\n\n    public sortByVotes(): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.SORT,\n            payload: SortType.SORT_BY_VOTES\n        };\n    }\n    \n    public sortByTimestamp(): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.SORT,\n            payload: SortType.SORT_BY_TIMESTAMP\n        };\n    }\n\n    public refreshRetroWalls(): RetroBoardActionTypes {\n        return {\n            type: ActionTypes.REFRESH_WALLS,\n            payload: new RetroWalls([])\n        }\n    }\n}\n\nexport default RetroBoardActions","// @ts-ignore\nimport SockJS from \"sockjs-client\";\n// @ts-ignore\nimport Stomp from 'stompjs';\nimport User from \"../../models/User\";\nimport {SERVICE_URL} from \"../../env-config\";\n\nclass DuplexCommunication {\n\n    private static instance: DuplexCommunication;\n\n    static socket: any;\n    static stomp: any;\n\n    public static getInstance() {\n        if (! DuplexCommunication.instance)\n            DuplexCommunication.instance = new DuplexCommunication();\n        if (! DuplexCommunication.instance.isConnected())\n            DuplexCommunication.instance.connect();\n        return DuplexCommunication.instance;\n    }\n\n    private connect() {\n\n        if (this.isConnected()) return;\n\n        DuplexCommunication.socket = new SockJS(`${SERVICE_URL}/retro-websocket`);\n        DuplexCommunication.stomp = Stomp.over(DuplexCommunication.socket);\n        if (! this.isConnected()) {\n            let accessToken = localStorage.getItem(User.ID_TOKEN);\n            DuplexCommunication.stomp.connect({\n                        \"Authorization\": \"Bearer \" + accessToken\n                },\n                (success:any) => { console.log(\"Connected!\"); },\n                (error:any) => {\n\n                    console.log(\"Connection lost!!! Reload the page...\", error);\n                    // window.location.reload();\n                }\n            );\n        }\n    }\n\n    private isConnected() {\n        return DuplexCommunication.socket && DuplexCommunication.stomp && DuplexCommunication.stomp.connected;\n    }\n\n    public subscribe(topic: string, callback: (data: any) => void) {\n\n        console.log(\"trying subscribing to topic...\")\n        if (!DuplexCommunication.stomp)\n            this.connect()\n\n        // wait until the websocket connection has been established\n        let subscribeInterval = setInterval(() => {\n            if (DuplexCommunication.stomp.connected) {\n                window.clearInterval(subscribeInterval);\n                DuplexCommunication.stomp.subscribe(topic, (data: any) => {\n                    callback(data);\n                });\n            }\n        }, 1000);\n\n    }\n}\n\n// @ts-ignore\nexport default DuplexCommunication;","class UnauthorizedException implements Error {\n\n    status: number|undefined\n    message: string;\n    name: string;\n\n    constructor(name: string, message:string, status:number) {\n        this.name = name;\n        this.status = status;\n        this.message = message;\n    }\n\n}\n\nexport default UnauthorizedException;","import {RetroBoardService} from \"./RetroBoardService\";\nimport Note from \"../../models/Note\";\nimport RetroBoard from \"../../models/RetroBoard\";\nimport RetroWalls from \"../../models/RetroWalls\";\nimport Notes from \"../../models/Notes\";\nimport Firebase from \"../Firebase\";\nimport RetroWall from \"../../models/RetroWall\";\nimport DuplexCommunication from \"../WebSocket/DuplexCommunication\";\nimport {request} from \"../../env-config\";\nimport {ITeam} from \"../../models/Team\";\nimport UnauthorizedException from \"../UnauthorizedException\";\n\nclass RetroBoardServiceV2 implements RetroBoardService {\n\n    private static retroBoardService: RetroBoardService;\n\n    async addNewNote(newNote: Note): Promise<Note> {\n        let response = await request.post(\"/retro-board/walls/notes\", newNote);\n\n        if (201 === response.status) {\n            // request the new retro-board from the url and return the data\n            // let newNoteData = await request.get(response.headers.location!);\n            // let note = await newNoteData.data as Note;\n            return newNote;\n        }\n\n        throw Error(\"Error creating note in the backend!\");\n    }\n\n    async createNewRetroBoard({title, maxLikes}: { title: string; maxLikes: number }): Promise<RetroBoard> {\n        let loggedInUser = await Firebase.getInstance().isUserAuthenticated();\n        if (!loggedInUser) throw Error(\"Authentication Exception! User is not logged in.\");\n\n        let response = await request.post(\"/retro-board\",\n            {name: title, maxLikes: maxLikes});\n\n        if (201 === response.status) {\n            console.log(response);\n            console.log(response.headers.location);\n            // request the new retro-board from the url and return the data\n            let retroBoardResponse = await request.get(response.headers.location!);\n            let retroBoard = await retroBoardResponse.data as RetroBoard;\n            return retroBoard;\n        }\n\n        throw Error(\"Error creating RetroBoard in the backend!\");\n    }\n\n    async createRetroWalls(retroBoardId: string, retroWalls: RetroWalls): Promise<any | RetroWalls> {\n        try {\n            let retroWallsResponse = await request.get(`/retro-board/walls/${retroBoardId}`);\n            if (retroWallsResponse.status === 200)\n                return await retroWallsResponse.data as RetroWalls;\n        } catch (e) {\n            console.log(\"Creating Retro Walls!\");\n            // it should create three walls for the given retro board\n            // let retroWalls = new RetroWalls([\n            //     RetroWall.newInstance(retroBoardId, \"Went Well\", RETRO_BOARD_STYLES.wentWell, RetroBoardServiceV2.getInstance()).setWallOrder(1),\n            //     RetroWall.newInstance(retroBoardId, \"To Improve\", RETRO_BOARD_STYLES.toImprove, RetroBoardServiceV2.getInstance()).setWallOrder(2),\n            //     RetroWall.newInstance(retroBoardId, \"Action Items\", RETRO_BOARD_STYLES.actionItems, RetroBoardServiceV2.getInstance()).setWallOrder(3),\n            // ]);\n            retroWalls.retroBoardId = retroBoardId;\n\n            let response = await request.post(`/retro-board/walls`, retroWalls);\n\n            if (201 === response.status) {\n                // it should return the url for walls\n                let retroWallsResponse = await request.get(response.headers.location!);\n                return await retroWallsResponse.data as RetroWall;\n            }\n        }\n\n    }\n\n    async deleteBoard(board: RetroBoard): Promise<string> {\n        // it should cascade delete board, walls and notes\n        let response = await request.delete(`/retro-board/${board.id}`);\n        if (204 === response.status)\n            return board.id;\n\n        throw Error(\"Error deleting retro board in the backend!\");\n    }\n\n    async deleteNote(note: Note): Promise<Note> {\n        // it should delete the individual note by id\n        let response = await request.delete(`/retro-board/walls/notes`, {\n            params: {\n                noteId: note.noteId,\n                retroBoardId: note.retroBoardId\n            }\n        });\n        if (204 === response.status) return note;\n\n        throw Error(\"Error deleting note at the backend!\");\n    }\n\n    async getDataOnUpdate(retroBoardId: string, retroWallId: string, callback: (notes: Notes) => void): Promise<void> {\n        // This code will only execute whenever a new note is created for the board\n        let duplex = DuplexCommunication.getInstance();\n        duplex.subscribe(`/topic/notes/${retroBoardId}`, async (uri:string) => {\n            let response = await request.get(`/retro-board/walls/notes`, {\n                params: {\n                    retroBoardId: retroBoardId,\n                    wallId: retroWallId,\n                }\n            });\n\n            callback(await response.data as Notes);\n        });\n\n        let response = await request.get(`/retro-board/walls/notes`, {\n            params: {\n                retroBoardId: retroBoardId,\n                wallId: retroWallId,\n            }\n        });\n\n        callback(await response.data as Notes);\n    }\n\n\n    async getMyBoards(): Promise<RetroBoard[]> {\n        let isAuth = await Firebase.getInstance().isUserAuthenticated();\n        console.log(\"IsUserAuthenticated: \" + isAuth);\n        if (isAuth) {\n            let response = await request.get(\"/retro-board\");\n            if (200 === response.status)\n                return await response.data as RetroBoard[];\n        }\n\n        throw Error(\"Error encountered while fetching boards for the user\");\n    }\n\n    getNoteWhenLiked(note: Note, callback: (note: Note) => void): Promise<void> {\n        // TODO: Requires implementation\n        return Promise.resolve();\n    }\n\n\n    async getNotes(retroBoardId: string, wallId: string): Promise<Notes> {\n        let response = await request.get(`/retro-board/walls/notes/${retroBoardId}`);\n        if (200 === response.status) {\n            let notesData = await response.data as Notes;\n            return notesData;\n        }\n        throw Error(`Encountered Error while trying to fetch notes for ${retroBoardId} > ${wallId}`);\n    }\n\n    async getRetroBoardById(uid: string, retroBoardId: string): Promise<RetroBoard> {\n        let response = await request.get(`/retro-board/${retroBoardId}`);\n        if (200 === response.status) {\n            let retroBoard = await response.data as RetroBoard;\n            return retroBoard;\n        } else if (401 === response.status) {\n            throw new UnauthorizedException(\"Unauthorized\", \"User is not authorized to view the contents of this board.\", 401);\n        }\n\n        throw Error(\"Error encountered while fetching retro board from the server\");\n    }\n\n    async getRetroBoardDataOnUpdate(uid: string, retroBoardId: string, callback: (retroBoard: RetroBoard) => void): Promise<void> {\n        // This code will only execute whenever a change is made to the retro board\n        let duplex = new DuplexCommunication();\n        duplex.subscribe(`/topic/retro-board/${retroBoardId}`, async (uri:any) => {\n            console.log(\"URI : \", uri);\n            let response = await request.get(uri.body);\n            if (response.status === 200) {\n                callback(await response.data as RetroBoard);\n            }\n        });\n    }\n\n    async getRetroWalls(retroBoardId: string): Promise<RetroWalls> {\n        let response = await request.get(`/retro-board/walls/${retroBoardId}`);\n        if (200 === response.status) {\n            let retroWalls = await response.data as RetroWalls;\n            return retroWalls;\n        }\n\n        throw Error(`Error encountered while fetching retro walls for retro board (${retroBoardId})`);\n    }\n\n    async sortByVotes(notes: Notes): Promise<Notes> {\n        let sortedByVotes = notes.notes.sort((obj1, obj2) => obj1.likedBy.length - obj2.likedBy.length);\n        return new Notes(sortedByVotes);\n    }\n\n    async updateNote(modifiedNote: Note): Promise<Note> {\n        let response = await request.put(\"/retro-board/walls/notes\", modifiedNote);\n        if (204 === response.status) return modifiedNote;\n\n        throw Error(\"Error encountered while updating note in the backend.\");\n    }\n\n    async updateRetroBoard(retroBoard: RetroBoard): Promise<RetroBoard> {\n        let response = await request.put(\"/retro-board\", retroBoard);\n        if (204 === response.status) return retroBoard;\n\n        throw Error(\"Error encountered while updating note in the backend.\");\n    }\n\n    static getInstance() {\n        if (!this.retroBoardService)\n            this.retroBoardService = new RetroBoardServiceV2();\n        return this.retroBoardService;\n    }\n\n    async shareBoard(retroBoardId: string, selectedTeams: Array<ITeam>): Promise<boolean> {\n        let response = await request.post(\"/share\", {itemId: retroBoardId, teamIds: selectedTeams.map(selectedTeam => selectedTeam.teamId)});\n        if (response.status === 201)\n            return true;\n        return false;\n    }\n}\n\nexport default RetroBoardServiceV2;","import {RetroBoardService} from \"./RetroBoardService\";\nimport RetroBoardServiceV2 from \"./RetroBoardServiceV2\";\n\nclass RetroBoardServiceFactory {\n\n    public static getInstance(): RetroBoardService {\n        return RetroBoardServiceV2.getInstance();\n    }\n}\n\nexport default RetroBoardServiceFactory;","import React, {ReactNode} from 'react'\nimport {StickyNoteProps, StickyNoteState} from \"../../../interfaces/StickyNoteModel\";\nimport Card from \"react-bootstrap/Card\";\nimport Editor from \"../../dumb/boards/Editor\";\nimport Like from \"../../dumb/boards/Like\";\nimport User from \"../../../models/User\";\nimport Note from \"../../../models/Note\";\nimport {RetroBoardActionTypes, SortType} from \"../../../redux/types/RetroBoardActionTypes\";\nimport {Dispatch} from \"redux\";\nimport RetroBoardActions from \"../../../redux/actions/RetroBoardActions\";\nimport {connect} from \"react-redux\";\nimport Badge from \"react-bootstrap/Badge\";\nimport RetroBoardState from \"../../../redux/reducers/RetroBoardState\";\nimport RetroBoard from \"../../../models/RetroBoard\";\nimport RetroWalls from \"../../../models/RetroWalls\";\nimport Notes from \"../../../models/Notes\";\nimport Toast from \"react-bootstrap/Toast\";\nimport Firebase from \"../../../service/Firebase\";\nimport {RetroBoardService} from \"../../../service/RetroBoard/RetroBoardService\";\nimport RetroBoardServiceFactory from \"../../../service/RetroBoard/RetroBoardServiceFactory\";\nimport ReactMarkdown from 'react-markdown';\nimport './sticky-note.css'\n\ninterface StateFromReduxStore {\n    retroBoard: RetroBoard\n    retroWalls: RetroWalls\n    notes: Notes\n}\n\ninterface DispatchProps {\n    updateNote: (note: Note) => Promise<RetroBoardActionTypes>\n    deleteNote: (note: Note) => Promise<RetroBoardActionTypes>\n    sortByVotes: () => Promise<RetroBoardActionTypes>\n}\n\ninterface Props extends StickyNoteProps, DispatchProps, StateFromReduxStore {\n    retroBoardService: RetroBoardService\n    sortBy?: SortType\n}\n\nclass StickyNote extends React.Component<Props, StickyNoteState> {\n\n    constructor(props: Props) {\n        super(props)\n\n        this.handleOnClick = this.handleOnClick.bind(this)\n        this.modifyStickyNote = this.modifyStickyNote.bind(this)\n        this.handleUpVote = this.handleUpVote.bind(this)\n    }\n\n    componentDidMount(): void {\n        let note = this.props.note\n        this.props.retroBoardService.getNoteWhenLiked(note, (note: Note) => {\n            if (note) // check is for delete case\n                this.props.updateNote(note)\n        })\n    }\n\n    state: StickyNoteState = {\n        showToast: false,\n        toastMessage: \"\",\n        stickyNoteId: this.props.note.noteId,\n        showEditor: false,\n        noteText: this.props.note.noteText,\n        likedBy: this.props.note.likedBy\n    }\n\n    handleOnClick(): void {\n        console.log(\"Condition: \", this.props.note.createdBy.includes(Firebase.getInstance().getLoggedInUser()!.uid));\n        console.log(`${this.props.note.createdBy} === ${Firebase.getInstance().getLoggedInUser()!.uid}`);\n        // only allow edit if the note is created by the user\n        // do not allow people to edit others note\n        if (this.props.note.createdBy.includes(Firebase.getInstance().getLoggedInUser()!.uid)) {\n            let noteText = this.state.noteText\n            this.setState({showEditor: true, noteText: noteText})\n        }\n        \n    }\n\n    modifyStickyNote(modifiedNote: Note) {\n        this.setState({showEditor: false, noteText: modifiedNote.noteText})\n        this.props.updateNote(modifiedNote)\n    }\n\n    _getTotalLikesForUser(user: User) {\n        let totalLikes = 0\n        this.props.notes.notes.forEach((note) => {\n            if (note.likedBy ? note.likedBy.some(u => u.uid === user.uid) : false) {\n                totalLikes++\n            }\n        })\n\n        return totalLikes\n    }\n\n    handleUpVote(user: User) {\n        let users = this.props.note?.likedBy || []\n        let hasVotedBefore = users.filter((u) => u.email === user.email).length > 0\n        let totalLikes = this._getTotalLikesForUser(user)\n\n        let maxAllowedLikes = this.props.retroBoard.maxLikes\n\n        if (!hasVotedBefore && totalLikes < maxAllowedLikes) {\n            users.push(user)\n            this.setState({likedBy: users})\n\n            let note = this.props.note\n            note.likedBy = users\n\n            this.props.updateNote(note).then(() => {\n                if (this.props.sortBy === SortType.SORT_BY_VOTES)\n                    this.props.sortByVotes()\n            })\n        } else {\n            this.setState({showToast: true, toastMessage: \"Like Count Limit Reached\"})\n            setTimeout(() => {\n                this.setState({showToast: false})\n            }, 2000)\n        }\n\n    }\n\n    _mergeNoteIfRequired(note: Note) : string | any {\n        let blur = this.props.retroBoard.blur === \"on\"\n        && !note.createdBy.includes(Firebase.getInstance().getLoggedInUser()!.uid) ? \"blur(3px)\" : \"blur(0px)\"\n\n        let cardBodyContent: ReactNode = <div className={\"card-text\"} style={{width: \"95%\", filter: blur}}>\n            <ReactMarkdown source={note.noteText} escapeHtml={true} />\n        </div>\n        if (note.noteText.includes(\"  \")) {\n            let mergedNotes = note.noteText.split(\"  \")\n                .map((noteText, index) => (<div key={index}>\n                    <ReactMarkdown source={noteText} escapeHtml={true} />\n                    <hr />\n                </div>))\n            cardBodyContent = <div className={\"card-text\"} style={{width: \"95%\", filter: blur}}>{mergedNotes}</div>\n        }\n\n        return cardBodyContent\n    }\n\n    render() {\n\n        let note = this.props.note\n        let cardBodyContent = this._mergeNoteIfRequired(note)\n\n        return (\n            <Card className={\"sticky-note z-depth-5\"} style={{backgroundColor: note.style?.backgroundColor || \"white\"}}>\n                <Card.Body data-testid={\"card_body\"} style={{padding: \"5px\", fontFamily: \"sans-serif\", fontWeight: 500, minHeight: \"50px\"}}\n                           onClick={this.handleOnClick}>\n                    <div data-testid={\"editor\"}\n                         style={{color: note.style?.textColor || \"black\"}}>\n                        {\n                            this.state.showEditor ?\n                                <Editor noteText={note.noteText}\n                                        handleEnter={(modifiedNoteText) => this.modifyStickyNote({\n                                            ...note,\n                                            noteText: modifiedNoteText\n                                        })}/> :\n                                cardBodyContent\n                        }\n                    </div>\n                </Card.Body>\n                <ul className={\"list-inline pull-right\"} style={{position: 'absolute', right: \"5px\", bottom: \"0px\"}}>\n                    <li className=\"list-inline-item\">\n                        <Like key={`like_note.noteId`} handleUpVote={this.handleUpVote}\n                              likedBy={note.likedBy || []}\n                              stickyNoteId={note.noteId}\n                        />\n                    </li>\n                    <li className={\"list-inline-item\"}>\n                        <Badge data-testid={`delete_badge_${note.noteId}`} variant={\"danger\"}\n                               style={{cursor: \"pointer\", padding: \"2px\", margin: \"0\"}}\n                               onClick={() => this.props.deleteNote(note)}><i\n                            className=\"fa fa-trash-o\"></i></Badge>\n                    </li>\n                </ul>\n                <Toast data-testid={\"toast\"} show={this.state.showToast} style={{position: 'absolute', left: '50%'}}>\n                    <Toast.Body>{this.state.toastMessage}</Toast.Body>\n                </Toast>\n            </Card>\n        )\n    }\n}\n\nconst mapStateToProps = (state: RetroBoardState): RetroBoardState => {\n\n    return {\n        retroBoard: state.retroBoard,\n        retroWalls: state.retroWalls,\n        notes: state.notes\n    }\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch<RetroBoardActionTypes>) => {\n    const service = RetroBoardServiceFactory.getInstance()\n    const retroBoardActions = new RetroBoardActions();\n    return {\n        updateNote: async (note: Note) => dispatch(retroBoardActions.updateNote(await service.updateNote(note))),\n        deleteNote: async (note: Note) => dispatch(retroBoardActions.deleteNote(await service.deleteNote(note))),\n        sortByVotes: async () => dispatch(retroBoardActions.sortByVotes())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StickyNote)","import {StickyNoteStyle} from \"../interfaces/StickyNoteModel\";\nimport User from \"./User\";\n\nclass Note {\n    retroBoardId: string\n    wallId: string\n    noteId: string\n    noteText: string\n    style: StickyNoteStyle\n    likedBy: User[]\n    createdBy: string\n    \n    constructor(retroBoardId: string, wallId: string, noteText:string, style:StickyNoteStyle) {\n        this.retroBoardId = retroBoardId\n        this.wallId = wallId\n        this.noteId = String(Date.now())\n        this.noteText = noteText\n        this.style = style\n        this.likedBy = []\n        this.createdBy = \"\"\n    }\n\n    public static toJSON(note:Note): string {\n        return JSON.stringify(note)\n    }\n    \n    public static fromJSON(json:string): Note {\n        return JSON.parse(json)\n    }\n\n    \n}\n\nexport default Note","import * as React from \"react\";\nimport {Button, Col, Row} from \"react-bootstrap\";\nimport StickyNote from \"../../smart/boards/StickyNote\";\nimport {SortType} from \"../../../redux/types/RetroBoardActionTypes\";\nimport RetroBoardServiceFactory from \"../../../service/RetroBoard/RetroBoardServiceFactory\";\nimport BoardTemplate from \"../../../models/BoardTemplate\";\nimport Note from \"../../../models/Note\";\n\ninterface DisplayProps {\n    boardTemplate: BoardTemplate\n    removeWall: (index: number) => void\n}\n\nconst DisplayBoardTemplate: React.FunctionComponent<DisplayProps> = ({boardTemplate, removeWall}) => {\n\n    return <>\n        <Row>\n            {boardTemplate.walls.map((wall, index) => (\n                <Col key={index} className={\"justify-content-center text-center\"}>\n                    <h6>{wall.wallTitle} <Button onClick={() => removeWall(index)} variant={\"link\"}><i\n                        className={\"fa fa-times\"}/></Button></h6>\n                    {\n                        wall?.notes?.length > 0 ? wall.notes.map((note, index) => (\n                            <StickyNote key={index} note={new Note(\"\",\"\", note.noteText, note.noteStyle)} sortBy={SortType.NONE}\n                                        retroBoardService={RetroBoardServiceFactory.getInstance()}/>\n                        )) : <StickyNote key={index} note={new Note(\"\",\"\", \"Foo Bar\", wall.wallStyle.stickyNote)} sortBy={SortType.NONE}\n                                         retroBoardService={RetroBoardServiceFactory.getInstance()}/>\n                    }\n\n                </Col>\n            ))}\n        </Row>\n    </>\n}\n\nexport default DisplayBoardTemplate;","import * as React from 'react';\nimport {useState} from 'react';\nimport {Button, Col, Form, FormGroup, Modal, Row} from \"react-bootstrap\";\nimport {RETRO_BOARD_STYLES} from \"../../../models/RetroBoard\";\nimport './style.css';\nimport BoardTemplate, {TemplateWall} from \"../../../models/BoardTemplate\";\nimport EditText from \"../../dumb/EditText\";\nimport ColorPicker from \"../../dumb/ColorPicker\";\nimport DisplayBoardTemplate from \"./DisplayBoardTemplate\";\nimport Firebase from \"../../../service/Firebase\";\n\ninterface Props {\n    onCreateTemplate: (templateData: BoardTemplate) => void\n}\n\nconst CreateNewTemplate: React.FunctionComponent<Props> = (props: Props) => {\n\n    const [show, setShow] = useState(false);\n    const showModal = () => setShow(true);\n    const hideModal = () => setShow(false);\n\n    const [boardTemplate, setBoardTemplate] = useState<BoardTemplate>({\n        templateTitle: \"Template Title\",\n        walls: [],\n        templateId: \"\",\n        userId: Firebase.getInstance().getLoggedInUser()?.uid!\n    });\n    // const [retroWalls, setRetroWalls] = useState<RetroWalls>(new RetroWalls([]));\n    const [wallTitle, setWallTitle] = useState(\"\");\n    // const [notes, setNotes] = useState<Notes>(new Notes([]));\n    const [textColor, setTextColor] = useState<any>(\"#ffffff\");\n    const [backgroundColor, setBackgroundColor] = useState<any>(RETRO_BOARD_STYLES.wentWell.stickyNote.backgroundColor);\n\n    const updateTemplateTitle = (title: string) => {\n        setBoardTemplate({...boardTemplate, templateTitle: title});\n    }\n\n    const handleWallName = (e: React.ChangeEvent<HTMLInputElement>) => setWallTitle(e.currentTarget.value);\n    const addWall = () => {\n        let newTemplateWall: TemplateWall = {\n            wallTitle: wallTitle,\n            wallStyle: {\n                stickyNote: {\n                    backgroundColor: backgroundColor,\n                    textColor: textColor,\n                    likeBtnPosition: \"right\"\n                }\n            },\n            wallOrder: 1,\n            notes: [\n                {\n                    noteText: \"Lorem Epsum Dolor Sit amet\",\n                    noteStyle: {\n                        backgroundColor: backgroundColor,\n                        textColor: textColor,\n                        likeBtnPosition: \"right\"\n                    }\n                }\n            ]\n        };\n\n        setBoardTemplate({...boardTemplate, walls: [...boardTemplate.walls, newTemplateWall]});\n        setWallTitle(\"\");\n    }\n\n    const removeWall = (index: number) => {\n        setBoardTemplate({\n            ...boardTemplate,\n            walls: [...boardTemplate.walls.slice(0, index), ...boardTemplate.walls.slice(index + 1)]\n        })\n    }\n\n    const handleTextColor = (color: any) => setTextColor(color.hex)\n    const handleBackgroundColor = (color: any) => setBackgroundColor(color.hex);\n    const createTemplate = () => {\n\n        const payload:BoardTemplate = {...boardTemplate,\n            walls: boardTemplate.walls.map((wall, index) => {\n                return {...wall, wallOrder: index};\n            })}\n\n        props.onCreateTemplate(payload);\n        hideModal();\n    }\n\n    return <>\n        <Button variant={\"light\"} onClick={showModal} style={{padding: \"25px\", border: \"2px dashed\"}}>\n            <i className={\"fa fa-plus fa-lg\"}/>\n        </Button>\n        <Modal show={show} onHide={hideModal} dialogClassName={\"custom-modal\"}>\n            <Modal.Header>\n                <EditText onSubmit={(text) => updateTemplateTitle(text)} title={boardTemplate.templateTitle}/>\n            </Modal.Header>\n            <Modal.Body>\n                <Row>\n                    <FormGroup>\n                        <Row>\n                            <Form inline={true} onSubmit={(e: any) => e.preventDefault()}>\n                                <Col>\n                                    <Form.Control\n                                        placeholder={\"Wall Title\"}\n                                        onChange={(e: React.ChangeEvent<HTMLInputElement>) => handleWallName(e)}\n                                        value={wallTitle}\n                                        style={{padding: \"20px\", marginLeft: \"5px\"}}\n                                    />\n                                </Col>\n                                <Col style={{backgroundColor: textColor}}>\n                                    <ColorPicker title={\"Text Color\"} handleOnChangeComplete={handleTextColor}/>\n                                </Col>\n                                <Col style={{backgroundColor: backgroundColor}}>\n                                    <ColorPicker title={\"Background Color\"}\n                                                 handleOnChangeComplete={handleBackgroundColor}/>\n                                </Col>\n                                <Col>\n                                    <Button onClick={addWall} disabled={wallTitle === \"\"}>Add Wall</Button>\n                                </Col>\n                            </Form>\n                            <hr/>\n                        </Row>\n                    </FormGroup>\n                </Row>\n\n                <div style={{border: \"1px solid\", padding: \"20px\", margin: \"1px solid\"}}>\n                    <DisplayBoardTemplate boardTemplate={boardTemplate} removeWall={removeWall} />\n                </div>\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant={\"success\"} disabled={boardTemplate.walls.length === 0} onClick={createTemplate}>Create\n                    Template</Button>\n                <Button variant={\"light\"} onClick={hideModal}>Cancel</Button>\n            </Modal.Footer>\n        </Modal>\n    </>\n}\n\nexport default CreateNewTemplate;","import React, {FunctionComponent, useState} from 'react'\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport Form from \"react-bootstrap/Form\";\n\ninterface Props {\n    title:string\n    onCreateRetroBoard: (retroBoard:{title:string,maxLikes:number}) => void\n}\n\nconst CreateRetroBoard: FunctionComponent<Props> = ({onCreateRetroBoard, title}) => {\n    const [show, setShow] = useState(false)\n    const [formInput, setFormInput] = useState({title: \"\", maxLikes: 5})\n\n    const handleClose = () => setShow(false);\n    const handleShow = () => setShow(true);\n    const handleChange = (name: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\n        let value = e.currentTarget.value\n        setFormInput({...formInput, [name]: value})\n    }\n    const handleCreateRetroBoard = async () => {\n        onCreateRetroBoard(formInput);\n        handleClose();\n    }\n    \n    return <>\n        <Button variant=\"outline-primary\" onClick={handleShow}>\n            {title}\n        </Button>\n\n        <Modal show={show} onHide={handleClose}>\n            <Modal.Header closeButton>\n                <Modal.Title>{title}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form>\n                    <Form.Group>\n                        <Form.Label>Dashboard Title</Form.Label>\n                        <Form.Control name={\"title\"} type={\"text\"} placeholder={\"e.g. Spring 400 \"}\n                                      value={formInput.title} autoComplete={\"false\"}\n                                      onChange={handleChange(\"title\")}/>\n                    </Form.Group>\n                    <Form.Group>\n                        <Form.Label>Max Likes</Form.Label>\n                        <Form.Control name={\"maxLikes\"} type={\"number\"} placeholder={\"e.g. 5 or 6 \"}\n                                      onChange={handleChange(\"maxLikes\")} \n                                      autoComplete={\"false\"}\n                                      value={String(formInput.maxLikes)}/>\n                    </Form.Group>\n                </Form>\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant=\"secondary\" onClick={handleClose}>\n                    Close\n                </Button>\n                <Button variant=\"primary\" onClick={handleCreateRetroBoard}>\n                    Save Changes\n                </Button>\n            </Modal.Footer>\n        </Modal>\n    </>\n}\n\nexport default CreateRetroBoard","import {WallStyle} from \"../interfaces/StickyWallModel\";\n\nclass RetroWall {\n    retroBoardId: string\n    wallId: string\n    title: string\n    style: WallStyle\n    sortCards: boolean\n    wallOrder: number = 1\n\n    constructor(retroBoardId:string, title: string, style: WallStyle) {\n        this.retroBoardId = retroBoardId\n        this.wallId = title.replace(/\\s/g, \"\")\n        this.title = title\n        this.style = style\n        this.sortCards = false\n    }\n    \n    public static newInstance(retroBoardId:string, title:string, style: WallStyle) {\n        return new RetroWall(retroBoardId, title, style)\n    }\n\n    public setWallOrder(wallOrder:number): RetroWall {\n        this.wallOrder = wallOrder;\n        return this;\n    }\n\n    \n}\n\nexport default RetroWall","import * as React from 'react';\nimport CreateRetroBoard from \"./CreateRetroBoard\";\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\nimport RetroWalls from \"../../../models/RetroWalls\";\nimport RetroWall from \"../../../models/RetroWall\";\nimport {useDispatch} from \"react-redux\";\nimport RetroBoardActions from \"../../../redux/actions/RetroBoardActions\";\nimport {TemplateWall} from \"../../../models/BoardTemplate\";\nimport RetroBoardServiceFactory from \"../../../service/RetroBoard/RetroBoardServiceFactory\";\n\ninterface Props extends RouteComponentProps {\n    title: string\n    templateWalls: Array<TemplateWall>\n}\n\nconst CreateBoardManager: React.FunctionComponent<Props> = (props: Props) => {\n    const dispatch = useDispatch();\n\n    const handleCreateRetroBoard = async (boardInput: { title: string, maxLikes: number }) => {\n        let retroBoardService = RetroBoardServiceFactory.getInstance();\n        let retroBoardActions = new RetroBoardActions();\n        let retroBoard = await retroBoardService.createNewRetroBoard(boardInput);\n        dispatch(retroBoardActions.createRetroBoard(retroBoard));\n\n        console.log(\"Template Walls -> \", props.templateWalls);\n\n        let boardWalls = await retroBoardService.createRetroWalls(retroBoard.id, new RetroWalls(\n            props.templateWalls.map((templateWall, index) =>\n                RetroWall.newInstance(retroBoard.id, templateWall.wallTitle, templateWall.wallStyle)\n                    .setWallOrder(templateWall.wallOrder))));\n\n        props.history.push({\n            pathname: `/retro-board/${retroBoard.userId}/${retroBoard.id}`,\n            state: {walls: new RetroWalls(boardWalls)}\n        });\n    }\n\n    return <>\n        <CreateRetroBoard title={props.title} onCreateRetroBoard={handleCreateRetroBoard}/>\n    </>\n}\n\nexport default withRouter(CreateBoardManager);","import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport {RouteComponentProps, withRouter} from \"react-router-dom\";\nimport CreateNewTemplate from \"../../dumb/templates/CreateNewTemplate\";\nimport BoardTemplate from \"../../../models/BoardTemplate\";\nimport TemplateService from \"../../../service/Templates/TemplateService\";\nimport {Button, Card, Col, Row} from \"react-bootstrap\";\nimport {RetroBoardService} from \"../../../service/RetroBoard/RetroBoardService\";\nimport CreateRetroBoardManager from \"../boards/CreateRetroBoardManager\";\nimport DisplayBoardTemplate from \"../../dumb/templates/DisplayBoardTemplate\";\n\ninterface Props extends RouteComponentProps {\n    templateService: TemplateService\n    retroBoardService: RetroBoardService\n}\n\nconst TemplateManager: React.FunctionComponent<Props> = (props: Props) => {\n\n    const [templates, setTemplates] = useState<Array<BoardTemplate>>([]);\n\n    const handleCreateTemplate = async (boardTemplate: BoardTemplate) => {\n        let persistedBoardTemplate = await props.templateService.createBoardTemplate(boardTemplate)\n        setTemplates([...templates, persistedBoardTemplate]);\n    };\n\n    const deleteTemplate = async (boardTemplate: BoardTemplate) => {\n        await props.templateService.deleteBoardTemplate(boardTemplate);\n        setTemplates(templates.filter(template => template.templateId !== boardTemplate.templateId));\n    }\n\n    useEffect(() => {\n        props.templateService.getBoardTemplates()\n            .then(boardTemplates => {\n                setTemplates(boardTemplates.templates);\n            });\n    }, [props.templateService]);\n\n    return <>\n        <Row>\n            <Col md={1}>\n                <CreateNewTemplate onCreateTemplate={handleCreateTemplate}/>\n            </Col>\n\n            {templates.map((template, index) => (\n                <Col key={index} md={3}>\n                    <Card>\n                        <Card.Body>\n                                <div key={index}>\n                                    <Card.Title>{template.templateTitle}</Card.Title>\n                                    <DisplayBoardTemplate boardTemplate={template}\n                                                          removeWall={(index) => console.log(\"Test Button Clicked!\")}/>\n                                </div>\n                        </Card.Body>\n                        <Card.Footer>\n                            <CreateRetroBoardManager title={\"Create Board\"}\n                                                     retroBoardService={props.retroBoardService}\n                                                     templateWalls={template.walls}/>\n\n                            <Button className={\"pull-right\"} variant={\"light\"} onClick={() => deleteTemplate(template)}>\n                                <i className={\"fa fa-trash-o fa-lg\"} style={{color: \"red\"}}/>\n                            </Button>\n                        </Card.Footer>\n                    </Card>\n                </Col>\n            ))}\n\n        </Row>\n\n    </>\n}\n\nexport default withRouter(TemplateManager);","import React, {useEffect} from 'react';\nimport {HomePageModel} from \"../interfaces/HomePageModel\"\nimport {Col, Container, Row} from \"react-bootstrap\"\nimport MyBoards from \"../components/smart/boards/MyBoards\";\nimport TemplateManager from \"../components/smart/templates/TemplateManager\";\nimport {RETRO_BOARD_STYLES} from \"../models/RetroBoard\";\nimport CreateRetroBoardManager from \"../components/smart/boards/CreateRetroBoardManager\";\n\nconst HomePage:React.FunctionComponent<HomePageModel> = (props:HomePageModel) => {\n\n    useEffect(() => {\n        document.title = \"Home\";\n    }, []);\n\n    return <Container>\n        <Row>\n            <Col>\n                <div className={\"pb-2 mt-4 mb-2 border-bottom\"}>\n                    <h3>Pre-built Templates</h3>\n                </div>\n                <CreateRetroBoardManager title={\"Create Retro Board\"}\n                                         templateWalls={[\n                    {wallTitle: \"Went Well\", wallStyle: RETRO_BOARD_STYLES.wentWell, wallOrder: 1, notes: []},\n                    {wallTitle: \"To Improve\", wallStyle: RETRO_BOARD_STYLES.toImprove, wallOrder: 2, notes: []},\n                    {wallTitle: \"Action Items\", wallStyle: RETRO_BOARD_STYLES.actionItems, wallOrder: 3, notes: []}\n                ]}/>\n            </Col>\n        </Row>\n        <Row>\n            <Col>\n                <div className={\"pb-2 mt-4 mb-2 border-bottom\"}>\n                    <h3>My Templates</h3>\n                </div>\n                <TemplateManager retroBoardService={props.retroBoardService}\n                                 templateService={props.templateService}/>\n            </Col>\n        </Row>\n        <Row>\n            <Col>\n                <div className={\"pb-2 mt-4 mb-2 border-bottom\"}>\n                    <h3>My Boards</h3>\n                </div>\n                <MyBoards retroBoardService={props.retroBoardService}/>\n            </Col>\n        </Row>\n    </Container>\n}\n\nexport default HomePage","import React from 'react'\nimport {Button} from \"react-bootstrap\";\nimport Editor from \"./Editor\";\n\ninterface State {\n    showEditor: boolean\n}\n\ninterface Props {\n    addNote: (note: string) => void\n}\n\nclass AddNewNote extends React.Component<Props, State> {\n\n    state: State = {\n        showEditor: false\n    }\n    \n    constructor(props: Props) {\n        super(props)\n        this.showEditor = this.showEditor.bind(this)\n        this.handleEnter = this.handleEnter.bind(this)\n    }\n\n    showEditor() {\n        \n        this.setState({showEditor: true})\n    }\n    \n    handleEnter(note: string) {\n        if (\"\" === note)\n            return ;\n        this.props.addNote(note)\n        this.setState({showEditor: false})\n    }\n\n    render() {\n        if (this.state.showEditor) {\n            return <div style={{margin: \"5px\"}}>\n                <Editor handleEnter={this.handleEnter} />\n            </div>\n        }\n        return <div style={{margin: \"5px\"}}>\n            <Button title={\"Add new note\"} data-testid={\"add_new_note_btn\"} variant={\"dark\"} onClick={this.showEditor}>\n                <i className={\"fa fa-lg fa-plus\"}></i>\n            </Button>\n        </div>\n    }\n}\n\nexport default AddNewNote","import * as React from 'react'\nimport {useState} from 'react'\nimport {Button, Carousel, Modal} from \"react-bootstrap\";\n\ninterface Props {\n    items: Array<string>\n    style: {textColor: string, backgroundColor: string}\n}\n\nconst CarouselView: React.FunctionComponent<Props> = (props: Props) => {\n\n    const [carouselView, setCarouselView] = useState(false);\n    const [index, setIndex] = useState(0);\n\n    const handleSelect = (selectedIndex: number) => setIndex(selectedIndex);\n\n    const showCarouselView = () => setCarouselView(true);\n\n    const hideCarouselView = () => setCarouselView(false);\n\n    const formatText = (text: string) => {\n        if (! text.includes(\"<MERGE_NOTE>\")) {\n            return <span>{text}</span>\n        }\n\n        return text.split(\"<MERGE_NOTE>\")\n            .map((noteText, index) => (\n                <span key={index}>\n                        {noteText}\n                    <br/>\n                        <hr style={{borderTop: \"1px dashed\"}}/>\n                </span>));\n    }\n\n    return <>\n        <div style={{margin: \"5px\"}}>\n            <Button title={\"Retrospect\"} variant={\"link\"} onClick={showCarouselView}>\n                <i className={\"fa fa-lg fa-eye\"} />\n            </Button>\n        </div>\n\n        <>\n            <Modal show={carouselView} onHide={hideCarouselView} style={{backgroundColor: \"black\"}}>\n                <Modal.Body style={{backgroundColor: props.style.backgroundColor}}>\n                    <Carousel activeIndex={index} onSelect={handleSelect} interval={null}>\n                        {props.items.map((text, index) => (\n                            <Carousel.Item key={index}>\n                                <div style={{height: \"400px\"}}>\n                                    <Carousel.Caption style={{color: props.style.textColor}}>\n                                        <div style={{height: \"200px\", overflowY: \"scroll\"}}>\n                                            <h3 style={{overflowY: \"scroll\"}}>{formatText(text)}</h3>\n                                        </div>\n                                    </Carousel.Caption>\n                                </div>\n                            </Carousel.Item>\n                        ))}\n                    </Carousel>\n                </Modal.Body>\n            </Modal>\n        </>\n    </>\n}\n\nexport default CarouselView;","import React, {Component} from 'react'\nimport StickyNote from \"./StickyNote\";\nimport {StickyWallModel} from \"../../../interfaces/StickyWallModel\";\nimport AddNewNote from \"../../dumb/boards/AddNewNote\";\nimport {Col, ListGroup, ListGroupItem, Row} from \"react-bootstrap\";\nimport Note from \"../../../models/Note\";\nimport Firebase from \"../../../service/Firebase\";\nimport RetroWall from \"../../../models/RetroWall\";\nimport {connect} from \"react-redux\";\nimport {Dispatch} from 'redux'\nimport {RetroBoardActionTypes, SortType} from \"../../../redux/types/RetroBoardActionTypes\";\nimport RetroBoardActions from \"../../../redux/actions/RetroBoardActions\";\nimport RetroBoardServiceFactory from \"../../../service/RetroBoard/RetroBoardServiceFactory\";\nimport {RetroBoardService} from \"../../../service/RetroBoard/RetroBoardService\";\nimport CarouselView from \"../../dumb/CarouselView\";\n\ninterface State {\n    notes: Note[]\n}\n\ninterface DispatchProps {\n    addNewNote: (note: Note) => Promise<RetroBoardActionTypes>\n    updateNote: (note: Note) => Promise<RetroBoardActionTypes>\n    getNotes: (retroBoardId: string, wallId: string) => Promise<RetroBoardActionTypes>\n    deleteNote: (note: Note) => Promise<RetroBoardActionTypes>\n    sortByVotes: () => Promise<RetroBoardActionTypes>\n}\n\ninterface Props extends StickyWallModel, State, DispatchProps {\n    sortBy?: SortType\n    retroBoardService: RetroBoardService\n}\n\nclass StickyWall extends Component<Props, State> {\n\n    retroWall: RetroWall\n\n    constructor(props: Props) {\n        super(props)\n        this.addNote = this.addNote.bind(this)\n        this.retroWall = props.retroWall\n        this.handleDragStart = this.handleDragStart.bind(this)\n        this.handleDrop = this.handleDrop.bind(this)\n        this.handleDragOver = this.handleDragOver.bind(this)\n    }\n\n    state: State = {\n        notes: [],\n    }\n\n    componentDidMount(): void {\n        this.props.getNotes(this.retroWall.retroBoardId, this.retroWall.wallId);\n        this.props.retroBoardService.getDataOnUpdate(this.retroWall.retroBoardId, this.retroWall.wallId, () => {\n            console.log(\"Data Changed!\")\n            this.props.getNotes(this.retroWall.retroBoardId, this.retroWall.wallId)\n        })\n    }\n\n    addNote(note: string) {\n        let newNote = new Note(this.retroWall.retroBoardId, this.retroWall.wallId, note, {\n            backgroundColor: this.retroWall.style?.stickyNote?.backgroundColor || \"white\",\n            textColor: this.retroWall.style?.stickyNote?.textColor || \"black\",\n            likeBtnPosition: this.retroWall.style?.stickyNote?.likeBtnPosition || \"right\"\n        })\n        newNote.createdBy = Firebase.getInstance().getLoggedInUser()!.email;\n        this.props.addNewNote(newNote).then(() => {\n            this.props.sortByVotes()\n        })\n    }\n    \n    handleDrop(e: React.DragEvent<HTMLAnchorElement>, droppedOnNote: Note) {\n        const draggedNote = JSON.parse(e.dataTransfer.getData(\"text/plain\")) as Note\n        if (draggedNote.noteId === droppedOnNote.noteId)\n            return\n            \n        droppedOnNote.noteText += \"  \" + draggedNote.noteText; // markdown for line-break\n        this.props.updateNote({...droppedOnNote}).then(() => {\n            this.props.deleteNote(draggedNote)\n        })\n    } \n    \n    handleDragOver(e: React.DragEvent<HTMLAnchorElement>) {\n        e.preventDefault()\n        e.dataTransfer.dropEffect = \"move\"\n    }\n    \n    handleDragStart(e: React.DragEvent<HTMLAnchorElement>, note: Note) {\n        e.dataTransfer.setData(\"text/plain\", JSON.stringify(note))\n    }\n\n    render() {\n        const {notes} = this.props\n\n        let wallNotes = notes.filter((note) => note.wallId === this.retroWall.wallId);\n        let stickers = wallNotes.map((stickyNote: Note, index: number) => (\n            <ListGroupItem key={index} style={{padding: \"0px\", border: \"none\", marginBottom: \"2px\"}} \n                className={\"text-left\"}\n                id={`list_group_item_${index}`}\n                draggable={true}\n                onDragStart={(e: React.DragEvent<HTMLAnchorElement>) => this.handleDragStart(e, stickyNote)}\n                onDragOver={this.handleDragOver}\n                onDrop={(e: React.DragEvent<HTMLAnchorElement>) => this.handleDrop(e, stickyNote)}\n                >\n                <StickyNote key={stickyNote.noteId} note={stickyNote} retroBoardService={this.props.retroBoardService} sortBy={this.props.sortBy}/>\n            </ListGroupItem>\n\n        ))\n\n\n        return (\n            <section className=\"sticky-wall text-center\">\n                <h3>{this.retroWall.title} </h3>\n                <Row>\n                    <Col>\n                        <CarouselView items={wallNotes.map(note => note.noteText)} style={{textColor: wallNotes[0]?.style.textColor, backgroundColor: wallNotes[0]?.style.backgroundColor}} />\n                    </Col>\n                </Row>\n                <AddNewNote addNote={this.addNote}/>\n                <ListGroup>\n                    {stickers}\n                </ListGroup>\n            </section>\n        )\n    }\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch<RetroBoardActionTypes>) => {\n    const service = RetroBoardServiceFactory.getInstance()\n    const retroBoardActions = new RetroBoardActions();\n    \n    return {\n        addNewNote: async (note: Note) => dispatch(retroBoardActions.createNote(await service.addNewNote(note))),\n        updateNote: async (note: Note) => dispatch(retroBoardActions.updateNote(await service.updateNote(note))),\n        deleteNote: async (note: Note) => dispatch(retroBoardActions.deleteNote(await service.deleteNote(note))),\n        getNotes: async (retroBoardId: string, wallId: string) => dispatch(retroBoardActions.getNotes(await service.getNotes(retroBoardId, wallId))),\n        sortByVotes: async () => dispatch(retroBoardActions.sortByVotes())\n    }\n}\n\nexport default connect(null, mapDispatchToProps)(StickyWall)\n\n\n/*\n       // this method is called whenever there is a change in the properties\n       public static getDerivedStateFromProps(props: StickyWallModel, state: State) {\n           if (props.sortCards) {\n               let notes = [...props.stickyNotes]\n               notes = notes.sort((a, b) => {\n                   if (a.likedBy.length > b.likedBy.length)\n                       return -1\n                   if (a.likedBy.length < b.likedBy.length)\n                       return 1\n                   return 0\n               }).slice()\n               return {notes: notes}\n           }\n       }\n   */","import * as React from 'react'\nimport {useState} from 'react'\nimport {Alert, Button, Form, FormGroup, Modal, ProgressBar} from \"react-bootstrap\";\nimport {ITeam} from \"../../models/Team\";\n\ninterface Props {\n    teams: Array<ITeam>\n    shareWith: (selectedTeams: Array<ITeam>) => Promise<boolean>\n}\n\nconst ShareBoard: React.FunctionComponent<Props> = (props: Props) => {\n    const teams = props.teams ? props.teams : [];\n\n    const [show, setShow] = useState(false);\n    const handleClose = () => setShow(false);\n    const handleOpen = () => setShow(true);\n    const [pageLoader, setPageLoader] = useState(false);\n    const [selectedTeams, setSelectedTeams] = useState<Array<ITeam>>([]);\n    const [response, setResponse] = useState<React.ReactNode>(undefined);\n\n    const handleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n        const selectedItems = e.currentTarget.selectedOptions;\n        const selectedTeams: Array<ITeam> = [];\n        for (let index = 0; index < selectedItems.length; index++) {\n            selectedTeams.push(\n                props.teams.find((team) => team.teamId === selectedItems[index].value)!\n            );\n        }\n\n        setSelectedTeams(selectedTeams);\n    }\n\n    const handleSubmit = async () => {\n        setPageLoader(true);\n        let response = await props.shareWith(selectedTeams);\n        if (response === true) {\n            setResponse(\n                <Alert variant={\"success\"}>\n                    <i className={\"fa fa-check\"} style={{color: \"green\"}}/>\n                    Page is now shared with the selected teams.\n                </Alert>\n            )\n        } else {\n            setResponse(<Alert variant={\"danger\"}>Cannot share the page. Contact admin.</Alert>)\n        }\n        setPageLoader(false);\n    }\n\n    return <>\n        <Button style={{border: \"1px solid black\"}} variant={\"light\"} onClick={handleOpen}>\n            <i className={\"fa fa-share-alt\"}/>\n        </Button>\n\n        <Modal show={show} onHide={handleClose}>\n            <Modal.Body>\n                <Form onSubmit={handleSubmit}>\n                    <FormGroup>\n                        <Form.Label><h3>Share with:</h3></Form.Label>\n                        <Form.Control as={\"select\"} multiple\n                                      onChange={(e: React.ChangeEvent<HTMLSelectElement>) => handleChange(e)}>\n                            <option disabled={true}>Select teams to share</option>\n                            {teams.map((team, index) => (\n                                <option key={index} value={team.teamId}>{team.teamName}</option>\n                            ))}\n                        </Form.Control>\n                    </FormGroup>\n                    <FormGroup>\n                        <Button type={\"submit\"} variant={\"success\"}>Share</Button>\n                        <Button onClick={handleClose} variant={\"light\"}>Cancel</Button>\n                    </FormGroup>\n                </Form>\n            </Modal.Body>\n            {pageLoader ? <Modal.Footer>\n                {pageLoader ? <><ProgressBar animated={true}/>{response}</> : <>{response}</>}\n            </Modal.Footer> : <>{response}</>}\n\n        </Modal>\n    </>\n}\n\nexport default ShareBoard","import React, {useState} from 'react'\nimport {Dispatch} from 'redux'\nimport StickyWall from \"../components/smart/boards/StickyWall\";\nimport {Button, Col, Form, FormControl, InputGroup, Row} from \"react-bootstrap\";\nimport {RouteComponentProps} from \"react-router\";\nimport RetroBoard from \"../models/RetroBoard\";\nimport RetroWalls from \"../models/RetroWalls\";\nimport {connect, TypedUseSelectorHook, useDispatch, useSelector as useReduxSelector} from 'react-redux'\nimport RetroBoardState from \"../redux/reducers/RetroBoardState\";\nimport {RetroBoardActionTypes, SortType} from \"../redux/types/RetroBoardActionTypes\";\nimport RetroBoardActions from \"../redux/actions/RetroBoardActions\";\nimport Notes from \"../models/Notes\";\nimport {CSVLink} from \"react-csv\";\nimport {Data, LabelKeyObject} from \"react-csv/components/CommonPropTypes\";\nimport {RetroBoardService} from \"../service/RetroBoard/RetroBoardService\";\nimport Firebase from \"../service/Firebase\";\nimport ShareBoard from \"../components/dumb/ShareBoard\";\nimport TeamsServiceV1 from \"../service/Teams/TeamsServiceV1\";\nimport {ITeam} from \"../models/Team\";\nimport UnauthorizedException from \"../service/UnauthorizedException\";\n\ninterface PropsFromParent extends RouteComponentProps<{}, any, { walls: RetroWalls } | any> {\n    uid?: string\n    retroBoardId?: string\n    retroBoardService: RetroBoardService\n    teamsService: TeamsServiceV1\n}\n\ninterface StateFromReduxStore {\n    retroBoard: RetroBoard\n    retroWalls: RetroWalls\n    notes: Notes\n}\n\ninterface DispatchProps {\n    createRetroBoard: (retroBoard: RetroBoard) => Promise<RetroBoardActionTypes>\n    createRetroWalls: (retroWalls: RetroWalls) => Promise<RetroBoardActionTypes>\n    refreshRetroWalls: () => Promise<RetroBoardActionTypes>\n}\n\ntype Props = PropsFromParent & StateFromReduxStore & DispatchProps\n\ninterface State {\n    retroBoardId: string\n    retroBoardTitle: string\n    sortSelectValue: SortType\n    teams: Array<ITeam>\n    retroWalls: RetroWalls\n}\n\nconst SortSelect: React.FunctionComponent = () => {\n    const retroBoardActions = new RetroBoardActions()\n    const dispatch = useDispatch()\n    const [sortSelectValue, setSortSelectValue] = useState(SortType.NONE)\n\n    const handleSort = function (e: React.ChangeEvent<HTMLSelectElement>): void {\n        let sortBy = e.target.value\n        if (sortBy === String(SortType.SORT_BY_VOTES)) {\n            dispatch(retroBoardActions.sortByVotes())\n            setSortSelectValue(SortType.SORT_BY_VOTES)\n        }\n    }\n\n    return <Form>\n        <Form.Group>\n            <Form.Label>Sort cards: </Form.Label>\n            <FormControl as={\"select\"} onChange={handleSort} data-testid={\"sort_select\"}\n                         value={String(sortSelectValue)}>\n                <option defaultValue={String(SortType.NONE)}>select...</option>\n                <option defaultValue={String(SortType.SORT_BY_VOTES)}\n                        value={SortType.SORT_BY_VOTES}>Sort by Up-votes\n                </option>\n            </FormControl>\n        </Form.Group>\n    </Form>\n}\n\nconst BlurToggle: React.FunctionComponent<Props> = (props: Props) => {\n    const useSelector: TypedUseSelectorHook<RetroBoardState> = useReduxSelector\n    const retroBoardState = useSelector(state => state)\n    const retroBoardActions = new RetroBoardActions()\n    const dispatch = useDispatch()\n\n    // if the board is not created by the logged in user\n    // then do not show the blur feature\n    if (props.retroBoard.userId !== Firebase.getInstance().getLoggedInUser()!.uid) {\n        return <></>\n    }\n\n    const handleChange = async (val: \"on\" | \"off\") => {\n        console.log(\"Value: \", val)\n\n        let retroBoard: RetroBoard = {...retroBoardState.retroBoard}\n        retroBoard.blur = val\n        dispatch(retroBoardActions.createRetroBoard(await props.retroBoardService.updateRetroBoard(retroBoard)))\n    }\n\n    let isChecked = props.retroBoard.blur === \"on\" ? true : false;\n\n    return <InputGroup className={\"pull-right\"}>\n        <Form.Check\n            checked={isChecked}\n            type={\"switch\"}\n            id={\"switch_on\"}\n            label={\"Blur On\"}\n            onChange={() => handleChange(isChecked ? \"off\" : \"on\")}\n        />\n    </InputGroup>\n}\n\nclass RetroBoardPage extends React.Component<Props, State> {\n\n    state: State = {\n        retroBoardId: \"\",\n        retroBoardTitle: \"\",\n        sortSelectValue: SortType.NONE,\n        teams: [],\n        retroWalls: new RetroWalls([])\n    }\n\n    constructor(props: Props) {\n        super(props)\n        this.convertJsonToCsv = this.convertJsonToCsv.bind(this)\n        this.shareBoardWith = this.shareBoardWith.bind(this)\n    }\n\n    componentDidMount(): void {\n        const {retroBoardId, uid} = this.props.match.params as PropsFromParent\n        localStorage.setItem(\"retroBoardId\", retroBoardId!)\n\n        if (retroBoardId && uid) {\n            this.initRetroBoard(retroBoardId, uid);\n        }\n\n    }\n\n    private async initRetroBoard(retroBoardId: string, uid: string) {\n        try {\n\n            let retroBoard = await this.props.retroBoardService.getRetroBoardById(uid, retroBoardId);\n            document.title = retroBoard.name;\n\n            let teams = this.props.teamsService.getMyTeams();\n\n            // open duplex connection\n            // this method is only called when there is some update in the backend\n            await this.props.retroBoardService.getRetroBoardDataOnUpdate(uid, retroBoardId, (retroBoard => {\n                console.log(\"RetroBoard: \", retroBoard);\n            }));\n\n            await this.props.createRetroBoard(retroBoard);\n            let retroWalls = await this.props.retroBoardService.getRetroWalls(retroBoardId);\n\n            this.setState({retroBoardId: retroBoardId, retroBoardTitle: retroBoard.name, teams: await teams, retroWalls: retroWalls});\n        } catch (e) {\n            if (e instanceof UnauthorizedException) {\n                this.props.history.push(\"/unauthorized\");\n            }\n        }\n    }\n\n    convertJsonToCsv(): { data: Data, headers: LabelKeyObject[] } {\n        let headers: LabelKeyObject[] = [\n            {label: \"Wall Name\", key: \"wallName\"},\n            {label: \"Note\", key: \"noteText\"},\n            {label: \"Up-votes\", key: \"upvotes\"}\n        ]\n\n        let data: Data = []\n        const {notes, retroWalls} = this.props\n\n        retroWalls.walls.forEach((wall) => {\n            notes.notes.forEach((note) => {\n                if (note.wallId === wall.wallId) {\n                    data.push(\n                        {wallName: wall.title, noteText: note.noteText, upvotes: note.likedBy?.length || 0}\n                    )\n                }\n            })\n        })\n\n        return {data: data, headers: headers}\n    }\n\n    private async shareBoardWith(selectedTeams: Array<ITeam>): Promise<boolean> {\n        try {\n            return await this.props.retroBoardService.shareBoard(this.state.retroBoardId, selectedTeams);\n        } catch (e) {\n            return false;\n        }\n    }\n\n\n    render() {\n        let {retroBoardId} = this.props.match.params as PropsFromParent\n        let walls = this.state.retroWalls.walls.map((wall, index) => {\n            wall.retroBoardId = retroBoardId!\n            return <Col key={index}>\n                <StickyWall retroBoardService={this.props.retroBoardService}\n                            retroWall={wall}\n                            notes={this.props.notes.notes}\n                            sortBy={this.state.sortSelectValue}\n                />\n            </Col>\n        });\n        return (\n            <div style={{padding: \"50px\"}}>\n                <Row>\n                    <h2 style={{borderBottom: \"2px solid black\"}}>{this.state.retroBoardTitle}</h2>\n                </Row>\n                <Row>\n                    <Col>\n                        <SortSelect/>\n                    </Col>\n                    <Col className={\"align-self-center\"}>\n                        <BlurToggle {...this.props} />\n                    </Col>\n                    <Col className={\"align-self-center\"}>\n                        <div className=\"pull-right\">\n                            <ShareBoard teams={this.state.teams} shareWith={this.shareBoardWith}/>\n                        </div>\n\n                        <Button className={\"pull-right\"} style={{border: \"1px solid black\"}} variant={\"light\"}>\n                            <CSVLink {...this.convertJsonToCsv()} target={\"_blank\"}\n                                     filename={this.props.retroBoard.name}>\n                                <i className=\"fa fa-file-excel-o\" style={{color: \"blue\"}}/>\n                            </CSVLink>\n                        </Button>\n                    </Col>\n                </Row>\n                <Row>\n                    {walls}\n                </Row>\n            </div>\n        )\n    }\n\n}\n\nfunction mapStateToProps(state: RetroBoardState): RetroBoardState {\n\n\n    return {\n        retroBoard: state.retroBoard,\n        retroWalls: state.retroWalls,\n        notes: state.notes\n    }\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<RetroBoardActionTypes>) {\n    const retroBoardActions = new RetroBoardActions();\n\n\n    return {\n        createRetroWalls: async (retroWalls: RetroWalls) => dispatch(retroBoardActions.createRetroWalls(retroWalls)),\n        createRetroBoard: async (retroBoard: RetroBoard) => dispatch(retroBoardActions.createRetroBoard(retroBoard)),\n        refreshRetroWalls: async () => dispatch(retroBoardActions.refreshRetroWalls())\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RetroBoardPage)","import React from 'react'\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Firebase from \"../service/Firebase\";\nimport Button from \"react-bootstrap/Button\";\nimport {RouteComponentProps, withRouter} from 'react-router-dom';\n// @ts-ignore\nimport logo from '../logo.svg';\n// @ts-ignore\nimport headerImg from '../img/retro-board-lp-header.svg';\n// @ts-ignore\nimport retroBoardImg from '../img/retro-board-design.png';\n// @ts-ignore\nimport retroBoardDashboardImg from '../img/retro-board-dashboard.png';\n// @ts-ignore\nimport retroBoardTemplateImg from '../img/retro-board-create-template.png';\nimport PageFooter from \"../components/smart/PageFooter\";\nimport {Image} from \"react-bootstrap\";\nimport './style.css';\n\n\ninterface Props extends RouteComponentProps {\n    success: () => void\n}\n\nconst LandingPage: React.FunctionComponent<Props> = (props: Props) => {\n    const getReferrerUrl = () => {\n        if (props.location.state) {\n            return (props.location.state as { referrer: string }).referrer\n        }\n        return \"/\"\n    }\n\n    const tryGoogleLogin = () =>\n    {\n        let firebase = Firebase.getInstance();\n        firebase.isUserAuthenticated()\n            .then(isAuth => {\n                if (!isAuth) {\n                    firebase.authenticateUser().then(() => {\n                        props.success()\n                        props.history.push(getReferrerUrl())\n                    })\n                }\n            });\n    }\n\n    const tryAnonymousLogin = async () =>\n    {\n        let firebase = Firebase.getInstance();\n        if (!await firebase.isUserAuthenticated()) {\n            firebase.authenticateAnonymousUser().then(() => {\n                console.log(props.location.state)\n                props.success()\n                props.history.push(getReferrerUrl())\n            })\n        }\n    }\n    return <>\n        <nav className=\"navbar navbar-light bg-light\">\n            <a className=\"navbar-brand\" href=\"#\">\n                <img src={logo} width=\"30\" height=\"30\"\n                     className=\"d-inline-block align-top\" alt=\"\"/>\n                Designer Boards\n            </a>\n        </nav>\n        <Container fluid={true} className={\"d-flex w-100 h-100 p-3 mx-auto flex-column\"}>\n            <section className={\"login-section\"}>\n                <Container>\n                    <Row className={\"align-items-center justify-content-center\"}>\n                        <Col>\n                            <div className={\"pt-3\"}>\n                                <h2>Get Started!</h2>\n                                <p style={{textAlign: \"center\"}}>It doesn't need a manual.</p>\n                            </div>\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col>\n                            <Button className=\"btn btn-block btn-social btn-google\" onClick={tryGoogleLogin}>\n                                <span className=\"fa fa-google\"></span>\n                                Sign in with Google\n                            </Button>\n                        </Col>\n                        <Col>\n                            <Button className=\"btn btn-block btn-social\" onClick={tryAnonymousLogin}>\n                                <span className=\"fa fa-user\"></span>\n                                Sign in as Anonymous User\n                            </Button>\n                        </Col>\n                    </Row>\n                </Container>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1440 320\">\n                    <path fill=\"#0099ff\" fill-opacity=\"1\"\n                          d=\"M0,256L80,213.3C160,171,320,85,480,85.3C640,85,800,171,960,213.3C1120,256,1280,256,1360,256L1440,256L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z\"></path>\n                </svg>\n            </section>\n            <header>\n                <Container>\n                    <Row className={\"justify-content-center align-items-center\"}>\n                        <Col>\n                            <div className={\"pt-3\"}>\n                                <h3>Build Dynamic Beautiful Boards</h3>\n                                <p>\n                                    You often find yourself working on\n                                    the excel sheet and then sharing it with the group.\n                                    Well, no need for that anymore.\n                                    You can use this platform to quickly create beautiful\n                                    looking boards for your teams to work together.\n                                </p>\n                            </div>\n\n                        </Col>\n                        <Col>\n                            <div className=\"pt-3\">\n                                <Image src={headerImg} alt={\"Designer Boards\"}/>\n                            </div>\n                        </Col>\n                    </Row>\n\n                </Container>\n            </header>\n            <section className={\"features\"}>\n                <Container>\n                    <Row>\n                        <Col>\n                            <h1 style={{borderBottom: \"2px solid black\"}}>Features</h1>\n                        </Col>\n                    </Row>\n                    <Row className={\"justify-content-center align-items-center p-3\"}>\n                        <Col>\n                            <Image src={retroBoardImg} className={\"img-fluid\"}/>\n                        </Col>\n                        <Col>\n                            <h3>In-built Retro Board Template</h3>\n                            <p>\n                                Get started with your team's retrospective meetings\n                                in less than a minute. It comes with the pre-build\n                                template to get you started quickly.\n                            </p>\n                        </Col>\n                    </Row>\n                    <Row className={\"justify-content-center align-items-center p-3\"}>\n                        <Col>\n                            <h3>Create Your Own Colorful Templates</h3>\n                            <p>\n                                Don't worry if pre-built templates doesn't serve your purpose.\n                                You can create your colorful templates with a very simple interface.\n                            </p>\n                        </Col>\n                        <Col>\n                            <Image src={retroBoardTemplateImg} className={\"img-fluid\"}/>\n                        </Col>\n                    </Row>\n                    <Row className={\"justify-content-center align-items-center p-3\"}>\n                        <Col>\n                            <Image src={retroBoardDashboardImg} className={\"img-fluid\"}/>\n                        </Col>\n                        <Col>\n                            <h3>Dashboard To Manage All Your Boards</h3>\n                            <p>\n                                Having a lot of boards can be challenging to keep track of.\n                                That's why it comes with your own dashboard so that you can\n                                find all your dashboards in one place.\n                            </p>\n                        </Col>\n                    </Row>\n                </Container>\n            </section>\n            <PageFooter/>\n        </Container>\n    </>\n}\n\nexport default withRouter(LandingPage)","import React, {useEffect} from 'react'\nimport Firebase from \"../../service/Firebase\";\nimport {Redirect} from 'react-router-dom';\n\ninterface Props {\n    service: Firebase\n}\n\nconst Logout: React.FunctionComponent<Props> = (props: Props) => {\n\n    useEffect(() => {\n        props.service.logout()\n    }, [props])\n\n    return <Redirect to={\"/login\"} />\n\n}\n\nexport default Logout","import * as React from 'react';\nimport {FunctionComponent, useState} from 'react';\nimport {Badge, Button, FormControl, Modal} from \"react-bootstrap\";\nimport Firebase from \"../../../service/Firebase\";\n\ninterface Props {\n    teamName: string\n    addTeamMember: (teamMemberEmail: string) => void\n}\nconst AddNewTeamMember: FunctionComponent<Props> = (props: Props) => {\n\n    const [showModal, setShowModal] = useState(false);\n    const openModal = () => setShowModal(true);\n    const closeModal = () => setShowModal(false);\n    const [teamMemberEmail, setTeamMemberEmail] = useState(\"\");\n    const [error, setError] = useState({error: true, msg: \"\"});\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setError({error: false, msg: \"\"});\n        setTeamMemberEmail(e.currentTarget.value);\n    }\n    const addTeamMember = () => {\n        if (teamMemberEmail === Firebase.getInstance().getLoggedInUser()?.email) {\n            setError({error: true, msg: \"LOL! You cannot add your own email!!!\"});\n        } else {\n            props.addTeamMember(teamMemberEmail);\n            closeModal();\n            setError({error: false, msg: \"\"});\n        }\n    }\n\n    return <>\n        <Button variant={\"link\"} onClick={openModal}><i className={\"fa fa-user-plus fa-lg\"} /></Button>\n\n        <Modal show={showModal} onHide={closeModal}>\n            <Modal.Header>\n                <h4>Add New Team Member</h4>\n                <Badge variant={\"primary\"}>{props.teamName}</Badge>\n            </Modal.Header>\n            <Modal.Body>\n                <FormControl autoComplete={\"disabled\"} onChange={handleChange}\n                    placeholder={\"Enter team member's email address\"} type={\"email\"} />\n                {error.error ? <span className={\"text-danger\"}>{error.msg}</span> : <></>}\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant={\"primary\"} onClick={addTeamMember}>Add Member</Button>\n                <Button variant={\"light\"} onClick={closeModal}>Cancel</Button>\n            </Modal.Footer>\n        </Modal>\n    </>\n}\n\nexport default AddNewTeamMember;","import * as React from 'react';\nimport {FunctionComponent, useState} from 'react';\nimport {Badge, Button, Card, ListGroup, ListGroupItem, Modal} from \"react-bootstrap\";\nimport {ITeam} from \"../../../models/Team\";\nimport User from \"../../../models/User\";\nimport AddNewTeamMember from \"./AddNewTeamMember\";\nimport Firebase from \"../../../service/Firebase\";\n\ninterface Props {\n    team: ITeam\n    removeMember: (member: User) => void\n    addTeamMember: (team: ITeam, teamMemberEmail: string) => void\n    deleteTeam: (team: ITeam) => void\n}\n\nconst TeamCard: FunctionComponent<Props> = (props: Props) => {\n\n    const [currUser, setCurrUser] = useState(new User());\n    const [openModal, setOpenModal] = useState(false);\n    const showModal = (user: User) => {\n        setCurrUser(user);\n        setOpenModal(true);\n    }\n    const closeModal = () => setOpenModal(false);\n    const removeUser = () => {\n        props.removeMember(currUser);\n        closeModal();\n    }\n\n    const addTeamMember = (team: ITeam, teamMemberEmail: string) => {\n        props.addTeamMember(team, teamMemberEmail)\n    }\n\n    const isOwner = (uid:string) => props.team.createdBy === uid;\n\n    const render = () => {\n        return <>\n            <Card>\n                <Card.Header>\n                    <div className={\"pull-right\"}>\n                        <AddNewTeamMember teamName={props.team.teamName}\n                                          addTeamMember={(teamMemberEmail: string) => addTeamMember(props.team, teamMemberEmail)}/>\n\n                        {\n                            // only the team creator can delete the team\n                            isOwner(Firebase.getInstance().getLoggedInUser()?.uid!) ?\n                                <Button onClick={() => props.deleteTeam(props.team)} variant={\"link\"} style={{color: \"crimson\"}}><i\n                                    className={\"fa fa-lg fa-trash\"}/></Button> : <></>\n                        }\n\n                    </div>\n                    <h4>{props.team.teamName}</h4>\n                </Card.Header>\n                <Card.Body>\n                    <ListGroup>\n                        {props.team.teamMembers.map((teamMember, index) => (\n                            <ListGroupItem key={index}>\n                                <div style={{marginLeft: \"auto !important\"}}>\n                                    <div className={\"pull-right\"}>\n                                        {isOwner(Firebase.getInstance().getLoggedInUser()?.uid!) ?\n                                        <Button variant={\"link\"} onClick={() => showModal(teamMember)}> <i\n                                            style={{color: \"crimson\"}} className={\"fa fa-xs fa-remove\"}/></Button> : <></> }\n                                    </div>\n                                    {teamMember.displayName} <br/>\n                                    <span className={\"text-muted\"}>{teamMember.email}</span> <br />\n                                    {isOwner(teamMember.uid) ? <Badge variant={\"primary\"}>owner</Badge> : <Badge variant={\"secondary\"}>member</Badge>}\n                                </div>\n\n                            </ListGroupItem>\n                        ))}\n                    </ListGroup>\n                </Card.Body>\n            </Card>\n\n            <Modal show={openModal} onHide={closeModal}>\n                <Modal.Body>\n                    <h3>Are you sure you want to remove <strong>{currUser.displayName}</strong> from the Team?</h3>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button onClick={removeUser}>Yes</Button>\n                    <Button onClick={closeModal}>Cancel</Button>\n                </Modal.Footer>\n            </Modal>\n        </>\n    }\n\n    return render();\n}\n\nexport default TeamCard;","import User from \"./User\";\n\nexport interface ITeam {\n    teamId: string;\n    teamName: string;\n    teamMembers: Array<User>;\n    createdBy: string;\n}\nclass Team implements ITeam {\n    teamId: string = \"\";\n    teamName: string = \"\";\n    teamMembers: Array<User> = [];\n    createdBy: string = \"\";\n\n}\n\nexport default Team;","import * as React from 'react'\nimport {FunctionComponent, useState} from 'react'\nimport {Button, FormControl, Modal} from \"react-bootstrap\";\nimport Team, {ITeam} from \"../../../models/Team\";\nimport Firebase from \"../../../service/Firebase\";\n\ninterface Props {\n    createTeam: (team: ITeam) => void\n}\nconst CreateNewTeam: FunctionComponent<Props> = (props: Props) => {\n\n    const [showModal, setShowModal] = useState(false);\n    const openModal = () => setShowModal(true);\n    const closeModal = () => setShowModal(false);\n    const [teamName, setTeamName] = useState(\"\");\n\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        setTeamName(e.currentTarget.value);\n    }\n\n    const handleCreate = () => {\n        let team = new Team();\n        team.teamName = teamName;\n        team.teamMembers = [];\n        team.createdBy = Firebase.getInstance().getLoggedInUser()?.uid!;\n        props.createTeam(team);\n        closeModal();\n    }\n\n    return <>\n        <Button variant={\"primary\"} onClick={openModal}>Create New Team</Button>\n\n        <Modal show={showModal} onHide={closeModal}>\n            <Modal.Header><h3>Create New Team</h3></Modal.Header>\n            <Modal.Body>\n                <FormControl autoFocus={true} autoComplete={\"disabled\"} onChange={handleChange} placeholder={\"Enter your team name...\"} />\n            </Modal.Body>\n            <Modal.Footer>\n                <Button variant={\"primary\"} onClick={handleCreate}>Create</Button>\n                <Button variant={\"light\"} onClick={closeModal}>Cancel</Button>\n            </Modal.Footer>\n        </Modal>\n    </>\n}\n\nexport default CreateNewTeam;","import Team, {ITeam} from \"../../models/Team\";\nimport {request} from \"../../env-config\";\nimport User from \"../../models/User\";\n\nclass TeamsServiceV1 {\n\n    static instance:TeamsServiceV1;\n\n    public static getInstance():TeamsServiceV1 {\n        if (!TeamsServiceV1.instance)\n            TeamsServiceV1.instance = new TeamsServiceV1();\n        return TeamsServiceV1.instance;\n    }\n\n    public async createNewTeam(team: ITeam) {\n        let response = await request.post(\"/teams\", team);\n        if (response.status === 201) {\n            let newTeamResponse = await request.get(response.headers.location);\n            return newTeamResponse.data as ITeam;\n        }\n\n        throw Error(\"Encountered some trouble while trying to create new team!\");\n    }\n\n    public async addTeamMember(team: Team, teamMember: User) {\n        let response = await request.post(\"/teams/member\", {team: team, teamMember: teamMember});\n        if (response.status === 201) {\n            let teamsResponse = await request.get(response.headers.location);\n            if (teamsResponse.status === 200)\n                return await teamsResponse.data as {teamMembers: Array<User>};\n        }\n\n        throw Error(\"Member cannot be added. Response Status: \" + response.status);\n    }\n\n    public async removeTeamMember(team: Team, teamMember: User) {\n        let response = await request.delete(`/teams/${team.teamId}/member/${teamMember.uid}`)\n        if (204 !== response.status)\n            throw Error(\"error deleting team member. Status: \" + response.status);\n    }\n\n    public async getTeamMember(teamMemberEmail: string) {\n        let response = await request.get(\"/users\", {\n            params: {email: teamMemberEmail}\n        });\n\n        if (response.status === 200) {\n            return response.data as User;\n        }\n\n        throw Error(\"No user found! Response Status: \" + response.status);\n    }\n\n    public async deleteTeam(team: ITeam) {\n        let response = await request.delete(`/teams/${team.teamId}`);\n        if (response.status !== 204) {\n            throw Error(\"Encountered problem while deleting the team. Response Status: \" + response.status);\n        }\n    }\n\n    public async getMyTeams(): Promise<Array<ITeam>> {\n        let response = await request.get(\"/teams\");\n        if (response.status === 200) {\n            return await response.data as Array<ITeam>;\n        }\n        return [];\n    }\n}\n\nexport default TeamsServiceV1;","import TeamsServiceV1 from \"./TeamsServiceV1\";\n\nclass TeamsServiceFactory {\n\n    public static getInstance() {\n        return TeamsServiceV1.getInstance();\n    }\n}\n\nexport default TeamsServiceFactory;","import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {Col, Row} from \"react-bootstrap\";\nimport TeamCard from \"../components/dumb/teams/TeamCard\";\nimport User from \"../models/User\";\nimport Team, {ITeam} from \"../models/Team\";\nimport CreateNewTeam from \"../components/dumb/teams/CreateNewTeam\";\nimport TeamsServiceFactory from \"../service/Teams/TeamsServiceFactory\";\n\nconst TeamsPage:React.FunctionComponent = () => {\n    const teamsService = TeamsServiceFactory.getInstance();\n    const [teams, setTeams] = useState<Array<Team>>([]);\n    const getMyTeams = async () => {\n        let myTeams = await teamsService.getMyTeams()\n        setTeams(myTeams);\n    }\n\n    const createTeam = async (team: ITeam) => {\n        console.log(\"Creating new team...\", teams)\n        let newTeam = await teamsService.createNewTeam(team);\n        setTeams([...teams, newTeam]);\n    }\n\n    const removeMember = async (team: ITeam, member: User) => {\n        console.log(\"Removing member\");\n        try {\n            await teamsService.removeTeamMember(team, member);\n            let newTeams = teams.map(team => ({\n                ...team,\n                teamMembers: team.teamMembers.filter(teamMember => teamMember.uid !== member.uid)\n            }));\n            setTeams(newTeams);\n        } catch(e) {\n            console.log(\"Error: \" + e.msg, e);\n        }\n\n    }\n\n    const addTeamMember = async (team:Team, teamMemberEmail: string) => {\n        console.log(\"Adding team member...\");\n        try {\n            let teamMember = await teamsService.getTeamMember(teamMemberEmail);\n            let teamMembersResponse: {teamMembers: Array<User>} = await teamsService.addTeamMember(team, teamMember);\n            let newTeams = teams.map(itr => {\n                if (itr.teamId === team.teamId) {\n                    team.teamMembers = teamMembersResponse.teamMembers;\n                    return team;\n                } else return itr;\n            })\n            setTeams(newTeams);\n        } catch (e) {\n            console.log(\"Team member with the given email is not found!!!\");\n            // TODO: show a pop-up and ask to send an invite\n        }\n    }\n\n    const deleteTeam = async (team: ITeam) => {\n        try {\n            await teamsService.deleteTeam(team);\n            const newTeams = teams.filter(t => t.teamId !== team.teamId);\n            setTeams(newTeams);\n        } catch (e) {\n            alert(\"Cannot delete team!\");\n        }\n    }\n\n    useEffect(() => {\n        document.title = \"Teams\";\n        // TODO: show loaded until the teams are loaded\n        getMyTeams();\n    }, [])\n\n    return <>\n        <Row>\n            <Col md={4} sm={6}>\n                <div className={\"pb-2 mt-4 mb-2 border-bottom\"}>\n                    <h3>Create New Team</h3>\n                </div>\n            </Col>\n        </Row>\n        <Row>\n            <Col xs={6} md={4}>\n                <CreateNewTeam createTeam={(team: ITeam) => createTeam(team)}  />\n            </Col>\n        </Row>\n        <hr/>\n        <Row>\n            <Col md={4} sm={6}>\n                <div className={\"pb-2 mt-4 mb-2 border-bottom\"}>\n                    <h3>Existing Teams</h3>\n                </div>\n            </Col>\n        </Row>\n        <Row>\n            {\n                teams.map((team, index) => (\n                    <Col md={4} key={index}>\n                        <TeamCard team={team} removeMember={(member: User) => {\n                            removeMember(team, member)\n                        }} addTeamMember={(team, teamMemberEmail) => addTeamMember(team, teamMemberEmail)}\n                                  deleteTeam={(team) => deleteTeam(team)}\n                        />\n                    </Col>\n                ))\n            }\n        </Row>\n\n    </>;\n}\n\nexport default withRouter(TeamsPage);","import BoardTemplate, {BoardTemplates} from \"../../models/BoardTemplate\";\nimport {request} from \"../../env-config\";\n\nclass TemplateService {\n\n    public static getInstance() {\n        return new TemplateService();\n    }\n\n    public async createBoardTemplate(boardTemplate: BoardTemplate) {\n        let response = await request.post(`/templates`, boardTemplate);\n        if (201 === response.status) {\n            let templateResponse = await request.get(response.headers.location);\n            return templateResponse.data as BoardTemplate;\n        }\n\n        throw Error(\"Cannot create template. There is some error in the backend. Status Code: \" + response.status);\n    }\n\n    public async getBoardTemplates() {\n        let response = await request.get(`/templates`);\n        if (200 === response.status) {\n            return response.data as BoardTemplates;\n        }\n\n        throw Error(\"Error fetching templates. Status: \" + response.status);\n    }\n\n    public async deleteBoardTemplate(boardTemplate: BoardTemplate) {\n        let response = await request.delete(`/templates/${boardTemplate.templateId}`);\n        if (204 === response.status) {\n            return;// delete successful\n        }\n\n        throw Error(\"Error deleting template. Status: \" + response.status);\n    }\n}\n\nexport default TemplateService;","import React from 'react';\nimport {HashRouter as Router} from 'react-router-dom'\nimport './App.css';\nimport LayoutAuthenticated from \"./components/smart/layouts/LayoutAuthenticated\";\nimport LayoutUnauthenticated from \"./components/smart/layouts/LayoutUnauthenticated\";\nimport {Provider} from \"react-redux\";\nimport store from \"./redux/store/Store\";\nimport Firebase from \"./service/Firebase\";\nimport {Route, RouteComponentProps} from \"react-router\";\nimport HomePage from \"./containers/HomePage\";\nimport RetroBoardPage from \"./containers/RetroBoardPage\";\nimport LoginPage from \"./containers/LandingPage\";\nimport Logout from \"./components/smart/Logout\";\nimport RetroBoardServiceFactory from \"./service/RetroBoard/RetroBoardServiceFactory\";\nimport TeamsPage from \"./containers/TeamsPage\";\nimport TeamsServiceV1 from \"./service/Teams/TeamsServiceV1\";\nimport TemplateService from \"./service/Templates/TemplateService\";\nimport './App.css';\n\ninterface Props {\n}\n\ninterface State {\n    isLogInFlowExecuted: boolean\n}\n\nclass App extends React.Component<Props, State> {\n\n    state: State = {\n        isLogInFlowExecuted: false\n    }\n\n    render() {\n        return <Provider store={store}>\n            <Router>\n                <Route exact path={\"/login\"} component={(props: RouteComponentProps) =>\n                    <LayoutUnauthenticated success={() => this.setState({isLogInFlowExecuted: true})}>\n                        <LoginPage\n                            success={() => this.setState({isLogInFlowExecuted: true})}/>\n                    </LayoutUnauthenticated>}/>\n\n                <Route exact path={\"/\"} component={(props: RouteComponentProps) =>\n                    <LayoutAuthenticated>\n                        <HomePage {...props}\n                                  retroBoardService={RetroBoardServiceFactory.getInstance()}\n                                  templateService={TemplateService.getInstance()}/>\n                    </LayoutAuthenticated>}/>\n\n                <Route exact path={\"/teams\"} component={(props: RouteComponentProps) =>\n                    <LayoutAuthenticated>\n                        <TeamsPage {...props}\n                                  teamsService={TeamsServiceV1.getInstance()}/>\n                    </LayoutAuthenticated>}/>\n\n                <Route exact path={\"/retro-board/:uid/:retroBoardId\"} component={(props: RouteComponentProps) =>\n                    <LayoutAuthenticated>\n                        <RetroBoardPage {...props}\n                                        retroBoardService={RetroBoardServiceFactory.getInstance()}\n                                        teamsService={TeamsServiceV1.getInstance()}/>\n                    </LayoutAuthenticated>}/>\n\n                    <Route exact path={\"/logout\"} component={(props: RouteComponentProps) =>\n                    <LayoutAuthenticated>\n                        <Logout service={Firebase.getInstance()} />\n                    </LayoutAuthenticated>}/>\n            </Router>\n        </Provider>\n\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {Provider} from \"react-redux\";\nimport store from \"./redux/store/Store\";\nimport 'bootstrap-social/assets/css/docs.css'\nimport 'bootstrap-social/assets/css/font-awesome.css'\nimport 'bootstrap-social/assets/img/bootstrap-social.png'\nimport 'bootstrap-social/bootstrap-social.css'\n\nReactDOM.render(<Provider store={store}><App /></Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}