(this["webpackJsonpretro-board"]=this["webpackJsonpretro-board"]||[]).push([[0],{247:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},248:function(e,t,a){e.exports=a.p+"static/media/retro-board-lp-header.07cde02c.svg"},249:function(e,t,a){e.exports=a.p+"static/media/retro-board-design.dbdaebce.png"},250:function(e,t,a){e.exports=a.p+"static/media/retro-board-dashboard.70ce411e.png"},251:function(e,t,a){e.exports=a.p+"static/media/retro-board-create-template.734256dc.png"},253:function(e,t,a){e.exports=a(582)},258:function(e,t,a){},259:function(e,t,a){},296:function(e,t,a){},573:function(e,t,a){},577:function(e,t,a){},582:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(47),o=a.n(c),l=(a(258),a(13)),s=a(14),u=a(43),i=a(42),m=a(26),d=(a(259),a(18)),f=a(2),p=a.n(f),h=a(8),b=a(99),E=a.n(b),v=function e(){Object(l.a)(this,e),this.uid="",this.idToken="",this.username=void 0,this.displayName="",this.email="",this.isEmailVerified=!1};v.ID_TOKEN="idToken",v.USER_INFO="userInfo",v.REFRESH_TOKEN="refreshToken";var g=v,y=a(228),O=a.n(y),k=window.location.protocol+"//",w=new Map;w.set("localhost:3000","localhost:8082"),w.set("192.168.1.6:3000","192.168.1.6:8082"),w.set("localhost:3001","139.59.25.205:8082"),w.set("retro.bemyaficionado.com","retro-service.bemyaficionado.com"),w.set("vslala.github.io","retro-board-api.herokuapp.com");var x=window.location.host,j=k+w.get(x);console.log("SERVICE_URL: ",j);var I=O.a.create({baseURL:j});I.interceptors.request.use((function(e){return e.headers={"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem(g.ID_TOKEN)),Accept:"*/*"},e}));var T={apiKey:"AIzaSyAERXDD08sF5pEmX1j3nlxjiermP5mvVrM",authDomain:"retro-board-ebce6.firebaseapp.com",databaseURL:"https://retro-board-ebce6.firebaseio.com",projectId:"retro-board-ebce6",storageBucket:"retro-board-ebce6.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/retro-board",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_KEY:"AIzaSyAERXDD08sF5pEmX1j3nlxjiermP5mvVrM",REACT_APP_AUTH_DOMAIN:"retro-board-ebce6.firebaseapp.com",REACT_APP_DATABASE_URL:"https://retro-board-ebce6.firebaseio.com",REACT_APP_PROJECT_ID:"retro-board-ebce6",REACT_APP_STORAGE_BUCKET:"retro-board-ebce6.appspot.com"}).REACT_APP_MESSAGING_SENDER_ID},N=(r.a.createContext(null),function(){function e(){Object(l.a)(this,e),this.auth=void 0,this.authenticatedUser=void 0,this.googleAuthenticationProvider=new E.a.auth.GoogleAuthProvider,this.loggedInUser=void 0,E.a.initializeApp(T),this.auth=E.a.auth()}return Object(s.a)(e,[{key:"getDatabase",value:function(){return E.a.database()}},{key:"authenticateUser",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.signInWithPopup(this.googleAuthenticationProvider);case 2:return t=e.sent,e.next=5,this.persistLoggedInUserInfo(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"persistLoggedInUserInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t},e.next=3,t.user.getIdToken();case 3:if(n=e.sent,console.log("Logged In User: ",t),!t.user){e.next=16;break}return this.loggedInUser=new g,this.loggedInUser.displayName=t.user.displayName||"".concat(a(5)),this.loggedInUser.idToken=n,this.loggedInUser.email=t.user.email||"".concat(a(5),"@retro.com"),this.loggedInUser.uid=t.user.uid||"",this.loggedInUser.isEmailVerified=!t.user.isAnonymous,e.next=14,I.post("/login",t.user);case 14:200===e.sent.status&&(localStorage.setItem(g.ID_TOKEN,n),localStorage.setItem(g.USER_INFO,JSON.stringify(this.loggedInUser)),localStorage.setItem(g.REFRESH_TOKEN,t.user.refreshToken));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLoggedInUser",value:function(){var e=localStorage.getItem(g.USER_INFO);if(e)return JSON.parse(e)}},{key:"isUserAuthenticated",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(g.REFRESH_TOKEN),a=localStorage.getItem(g.ID_TOKEN),!t){e.next=21;break}if(!a){e.next=19;break}return e.next=6,fetch("".concat(j,"/token/verify?id_token=").concat(a));case 6:if(200!==e.sent.status){e.next=11;break}return e.abrupt("return",!0);case 11:return e.next=13,fetch("https://securetoken.googleapis.com/v1/token?key=".concat(T.apiKey),{method:"POST",body:JSON.stringify({grant_type:"refresh_token",refresh_token:t})});case 13:return n=e.sent,e.next=16,n.json();case 16:r=e.sent,localStorage.setItem(g.ID_TOKEN,r.id_token),localStorage.setItem(g.REFRESH_TOKEN,r.refresh_token);case 19:return console.log("User is authenticated!"),e.abrupt("return",!0);case 21:return console.log("User is not authenticated!"),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getIdToken",value:function(){return localStorage.getItem(g.ID_TOKEN)}},{key:"authenticateAnonymousUser",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.signInAnonymously();case 2:return t=e.sent,e.next=5,this.persistLoggedInUserInfo(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.clear()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}());N.instance=void 0;var S,C,B=N,R=a(70),_=function(){return r.a.createElement("footer",{className:"mt-auto font-small blue pt-sm-3"},r.a.createElement("div",{className:"footer-copyright text-center py-1"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://www.bemyaficionado.com"},"Made by ",r.a.createElement("strong",null,"Varun Shrivastava"))),r.a.createElement("p",null,r.a.createElement("strong",null,"TheRetroBoard\xa92021"))))},A=a(127),L=a(252),U=a(36),D=Object(d.f)((function(e){var t=B.getInstance().getLoggedInUser();return r.a.createElement(A.a,{bg:"light",expand:"lg"},r.a.createElement(m.b,{to:"/",className:"navbar-brand"},"Retro Board"),r.a.createElement(A.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(A.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(L.a,{className:"mr-auto"},r.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"),t.isEmailVerified?r.a.createElement(m.b,{className:"nav-link",to:"/teams"},"Teams"):r.a.createElement(r.a.Fragment,null)),r.a.createElement(U.a,{onClick:function(){localStorage.clear(),e.history.push("/login")},variant:"outline-primary"},r.a.createElement("i",{className:"fa fa-sign-out"}))))})),W=a(584),F=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isUserAuthenticated:!1,isLoading:!0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;B.getInstance().isUserAuthenticated().then((function(t){e.setState({isUserAuthenticated:t,isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement(W.a,{animation:"border"}):this.state.isUserAuthenticated?r.a.createElement(R.a,{fluid:!0,className:"d-flex w-100 h-100 p-3 mx-auto flex-column"},r.a.createElement(D,null),this.props.children,r.a.createElement(_,null)):r.a.createElement(d.a,{to:{pathname:"/login",state:{referrer:this.props.location.pathname}}})}}]),a}(r.a.Component),M=Object(d.f)(F),P=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.location,t=e.pathname,a=e.search;return B.getInstance().getLoggedInUser()?t.includes("login")?r.a.createElement(d.a,{to:"/"}):r.a.createElement(d.a,{to:"".concat(t).concat(a)}):r.a.createElement(r.a.Fragment,null,this.props.children)}}]),a}(r.a.Component),H=Object(d.f)(P),J=a(81),V=a(231),K=a(79),Y=a(23),G=a(11),z={wentWell:{stickyNote:{backgroundColor:"#009688",textColor:"white",likeBtnPosition:"right"}},toImprove:{stickyNote:{backgroundColor:"#e91e63",textColor:"white",likeBtnPosition:"right"}},actionItems:{stickyNote:{backgroundColor:"#9c27b0",textColor:"white",likeBtnPosition:"right"}}},q=function(){function e(t,a,n){Object(l.a)(this,e),this.id=void 0,this.name=void 0,this.maxLikes=void 0,this.blur=void 0,this.userId=void 0,this.id=t,this.name=a,this.maxLikes=5,this.blur="off",this.userId=n}return Object(s.a)(e,null,[{key:"newInstance",value:function(t,a,n){return new e(t,a,n)}},{key:"toJSON",value:function(e){return JSON.stringify(e)}},{key:"fromJSON",value:function(e){return JSON.parse(e)}}]),e}(),X=function(){function e(t){Object(l.a)(this,e),this.retroBoardId="",this.walls=void 0,this.walls=t}return Object(s.a)(e,null,[{key:"toJSON",value:function(e){return JSON.stringify(e)}},{key:"fromJSON",value:function(e){return JSON.parse(e)}}]),e}(),Z=function(){function e(t){Object(l.a)(this,e),this._notes=void 0,this._notes=this._removeDuplicates(t)}return Object(s.a)(e,[{key:"notes",get:function(){return Object(Y.a)(this._notes)}}]),Object(s.a)(e,[{key:"_removeDuplicates",value:function(e){var t=[];return e.forEach((function(e,a){-1===t.findIndex((function(t){return t.noteId===e.noteId}))&&t.push(e)})),t}}],[{key:"fromJSON",value:function(e){return JSON.parse(e)}},{key:"toJSON",value:function(e){return JSON.stringify(e)}}]),e}();!function(e){e[e.SORT=0]="SORT",e[e.GET_NOTES=1]="GET_NOTES",e[e.RETRIEVE_RETRO_BOARD=2]="RETRIEVE_RETRO_BOARD",e[e.UPDATE_NOTE=3]="UPDATE_NOTE",e[e.DELETE_NOTE=4]="DELETE_NOTE",e[e.CREATE_NOTE=5]="CREATE_NOTE",e[e.CREATE_RETRO_WALLS=6]="CREATE_RETRO_WALLS",e[e.CREATE_RETRO_BOARD=7]="CREATE_RETRO_BOARD",e[e.REFRESH_WALLS=8]="REFRESH_WALLS"}(S||(S={})),function(e){e[e.NONE=0]="NONE",e[e.SORT_BY_VOTES=1]="SORT_BY_VOTES",e[e.SORT_BY_TIMESTAMP=2]="SORT_BY_TIMESTAMP"}(C||(C={}));var Q={retroBoard:new q("","",""),retroWalls:new X([]),notes:new Z([])};function $(e){return new Z(e.notes.sort((function(e,t){var a=0,n=0;return e.likedBy&&(a=e.likedBy.length),t.likedBy&&(n=t.likedBy.length),0-(a>n?1:-1)})))}var ee=a(232),te=a(233),ae=a.n(te),ne=Object(V.createLogger)(),re=Object(K.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.CREATE_RETRO_BOARD:return Object(G.a)(Object(G.a)({},e),{},{retroBoard:t.payload});case S.CREATE_RETRO_WALLS:return Object(G.a)(Object(G.a)({},e),{},{retroWalls:t.payload});case S.CREATE_NOTE:return Object(G.a)(Object(G.a)({},e),{},{notes:new Z([].concat(Object(Y.a)(e.notes.notes),[t.payload]))});case S.UPDATE_NOTE:var a=e.notes.notes.map((function(e){return e.noteId===t.payload.noteId?Object.assign({},e,t.payload):e}));return Object(G.a)(Object(G.a)({},e),{},{notes:new Z(a)});case S.DELETE_NOTE:var n=[];return e.notes.notes.forEach((function(e){e.noteId!==t.payload.noteId&&n.push(e)})),Object(G.a)(Object(G.a)({},e),{},{notes:new Z(n)});case S.GET_NOTES:return console.log("Get Notes: ",t.payload),Object(G.a)(Object(G.a)({},e),{},{notes:t.payload});case S.SORT:switch(t.payload){case C.SORT_BY_VOTES:return Object(G.a)(Object(G.a)({},e),{},{notes:$(e.notes)});case C.SORT_BY_TIMESTAMP:return Object(G.a)({},e);default:return e}case S.REFRESH_WALLS:return Object(G.a)(Object(G.a)({},e),{},{retroWalls:t.payload,notes:new Z([])})}return Q}),Q,Object(ee.composeWithDevTools)(Object(K.applyMiddleware)(ae.a,ne))),ce=a(63),oe=a(25),le=a(9),se=a(71),ue=function(e){var t=e.retroBoardService,a=Object(n.useState)([]),c=Object(le.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)(!1),u=Object(le.a)(s,2),i=u[0],d=u[1];Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMyBoards();case 2:a=e.sent,l(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){return console.log("User not logged In!",e)}))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,null,i?r.a.createElement(W.a,{animation:"grow",variant:"danger",style:{position:"absolute",top:"50%",left:"50%"}}):r.a.createElement(r.a.Fragment,null),o.map((function(e,a){return r.a.createElement(oe.a,{lg:"4",key:a},r.a.createElement(se.a,null,r.a.createElement(se.a.Body,null,r.a.createElement("h4",null,e.name)),r.a.createElement(se.a.Footer,null,r.a.createElement(m.b,{to:"/retro-board/".concat(B.getInstance().getLoggedInUser().uid,"/").concat(e.id)},"URL"),r.a.createElement(U.a,{variant:"link",className:"pull-right",onClick:function(){return function(e){d(!0),t.deleteBoard(e).then((function(e){d(!1),l(o.filter((function(t){return t.id!==e})))})).catch((function(e){console.log("Error deleting board! ",e),d(!1)}))}(e)}},r.a.createElement("i",{className:"fa fa-trash-o fa-lg",style:{color:"red"}})))))}))))},ie=a(82),me=a(234),de=a(64),fe=(a(296),a(236)),pe=function(e){var t=Object(n.useState)(!1),a=Object(le.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(""),l=Object(le.a)(o,2),s=l[0],u=l[1],i=function(){e.onSubmit(s),c(!1)};return r?n.createElement(n.Fragment,null,n.createElement(de.a,{onSubmit:function(e){return function(e){e.preventDefault(),i()}(e)}},n.createElement(me.a,null,n.createElement(de.a.Control,{value:s,onBlur:i,onChange:function(e){return function(e){u(e.currentTarget.value)}(e)}})))):n.createElement(n.Fragment,null,n.createElement(fe.a,null,n.createElement("span",{style:{fontSize:"x-large",fontWeight:"bold",marginRight:"5px"}},e.title),n.createElement(U.a,{variant:"light",onClick:function(){return c(!0)}},n.createElement("i",{className:"fa fa-pencil-square-o"}))))},he=a(585),be=a(126),Ee=a(237),ve=function(e){var t=Object(n.useState)("#ffffff"),a=Object(le.a)(t,2),r=a[0],c=a[1];return n.createElement(n.Fragment,null,n.createElement(he.a,{id:"background_color_picker",title:e.title,variant:"light"},n.createElement(be.a.Item,null,n.createElement(Ee.SwatchesPicker,{color:r,onChangeComplete:function(t){c(t),e.handleOnChangeComplete(t)}}))))},ge=a(57),ye=a(586),Oe=a(235),ke=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={editorText:n.props.noteText?n.props.noteText:""},n.handleKeyboardKeyPress=function(e){"Escape"===e.key&&n.props.handleEnter(n.state.editorText.replace(/\n/g,"")),"Enter"===e.key&&(n.setState({editorText:""}),n.props.handleEnter(n.state.editorText.replace(/\n/g,"")))},n.handleChange=n.handleChange.bind(Object(ge.a)(n)),n}return Object(s.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget.value;this.setState({editorText:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(ye.a,null,r.a.createElement(Oe.a,{as:"textarea",autoFocus:!0,"data-testid":"editor_textarea",onKeyUp:this.handleKeyboardKeyPress,onChange:this.handleChange,value:this.state.editorText,"aria-label":"Note Editor",onBlur:function(){return e.props.handleEnter(e.state.editorText.replace(/\n/g,""))}}))}}]),a}(r.a.Component),we=a(241),xe=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={users:n.props.likedBy},n.handleUpVote=n.handleUpVote.bind(Object(ge.a)(n)),n}return Object(s.a)(a,[{key:"handleUpVote",value:function(e){e.preventDefault();var t=this.getCurrentUser();t&&this.props.handleUpVote(t)}},{key:"getCurrentUser",value:function(){var e=localStorage.getItem(g.USER_INFO);if(e)return JSON.parse(e);console.log("Error: User is not logged in!")}},{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"like_btn",onClick:this.handleUpVote},r.a.createElement(we.a,{variant:"dark",style:{cursor:"pointer",margin:"0"}},r.a.createElement("span",{"data-testid":"total_votes"},this.props.likedBy.length)),r.a.createElement(se.a.Link,{style:{color:"white"},href:"#"},r.a.createElement("i",{"data-testid":"like_thumbs_up",style:{color:"darkgrey"},className:"fa fa-thumbs-up"})))}}]),a}(r.a.Component),je=a(159),Ie=a(242),Te=a.n(Ie),Ne=a(243),Se=a.n(Ne),Ce=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"connect",value:function(){if(!this.isConnected()&&(e.socket=new Te.a("".concat(j,"/retro-websocket")),e.stomp=Se.a.over(e.socket),!this.isConnected())){var t=localStorage.getItem(g.ID_TOKEN);e.stomp.connect({Authorization:"Bearer "+t},(function(e){console.log("Connected!")}),(function(e){console.log("Connection lost!!! Reload the page...",e)}))}}},{key:"isConnected",value:function(){return e.socket&&e.stomp&&e.stomp.connected}},{key:"subscribe",value:function(t,a){console.log("trying subscribing to topic..."),e.stomp||this.connect();var n=setInterval((function(){e.stomp.connected&&(window.clearInterval(n),e.stomp.subscribe(t,(function(e){a(e)})))}),1e3)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance.isConnected()||e.instance.connect(),e.instance}}]),e}();Ce.instance=void 0,Ce.socket=void 0,Ce.stomp=void 0;var Be=Ce,Re=function e(t,a,n){Object(l.a)(this,e),this.status=void 0,this.message=void 0,this.name=void 0,this.name=t,this.status=n,this.message=a},_e=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"addNewNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/retro-board/walls/notes",t);case 2:if(201!==e.sent.status){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("Error creating note in the backend!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createNewRetroBoard",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n,r,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.maxLikes,e.next=3,B.getInstance().isUserAuthenticated();case 3:if(e.sent){e.next=6;break}throw Error("Authentication Exception! User is not logged in.");case 6:return e.next=8,I.post("/retro-board",{name:a,maxLikes:n});case 8:if(201!==(r=e.sent).status){e.next=19;break}return console.log(r),console.log(r.headers.location),e.next=14,I.get(r.headers.location);case 14:return c=e.sent,e.next=17,c.data;case 17:return o=e.sent,e.abrupt("return",o);case 19:throw Error("Error creating RetroBoard in the backend!");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createRetroWalls",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("/retro-board/walls/".concat(t));case 3:if(200!==(n=e.sent).status){e.next=8;break}return e.next=7,n.data;case 7:return e.abrupt("return",e.sent);case 8:e.next=24;break;case 10:return e.prev=10,e.t0=e.catch(0),console.log("Creating Retro Walls!"),a.retroBoardId=t,e.next=16,I.post("/retro-board/walls",a);case 16:if(201!==(r=e.sent).status){e.next=24;break}return e.next=20,I.get(r.headers.location);case 20:return c=e.sent,e.next=23,c.data;case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteBoard",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.delete("/retro-board/".concat(t.id));case 2:if(204!==e.sent.status){e.next=5;break}return e.abrupt("return",t.id);case 5:throw Error("Error deleting retro board in the backend!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.delete("/retro-board/walls/notes",{params:{noteId:t.noteId,retroBoardId:t.retroBoardId}});case 2:if(204!==e.sent.status){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("Error deleting note at the backend!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNotesDataOnUpdate",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be.getInstance().subscribe("/topic/notes/".concat(t),function(){var e=Object(h.a)(p.a.mark((function e(r){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/retro-board/walls/notes",{params:{retroBoardId:t,wallId:a}});case 2:return c=e.sent,e.t0=n,e.next=6,c.data;case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,I.get("/retro-board/walls/notes",{params:{retroBoardId:t,wallId:a}});case 4:return r=e.sent,e.t0=n,e.next=8,r.data;case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getMyBoards",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getInstance().isUserAuthenticated();case 2:if(t=e.sent,console.log("IsUserAuthenticated: "+t),!t){e.next=12;break}return e.next=7,I.get("/retro-board");case 7:if(200!==(a=e.sent).status){e.next=12;break}return e.next=11,a.data;case 11:return e.abrupt("return",e.sent);case 12:throw Error("Error encountered while fetching boards for the user");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getNoteDataWhenModified",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Be.getInstance().subscribe("/topic/notes/".concat(t.noteId),function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("URL:",t),e.next=3,I.get("".concat(t.body));case 3:return n=e.sent,console.log(n.data),e.t0=a,e.next=8,n.data;case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getNotes",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/retro-board/walls/notes/".concat(t));case 2:if(200!==(n=e.sent).status){e.next=8;break}return e.next=6,n.data;case 6:return r=e.sent,e.abrupt("return",r);case 8:throw Error("Encountered Error while trying to fetch notes for ".concat(t," > ").concat(a));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getRetroBoardById",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/retro-board/".concat(a));case 2:if(200!==(n=e.sent).status){e.next=10;break}return e.next=6,n.data;case 6:return r=e.sent,e.abrupt("return",r);case 10:if(401!==n.status){e.next=12;break}throw new Re("Unauthorized","User is not authorized to view the contents of this board.",401);case 12:throw Error("Error encountered while fetching retro board from the server");case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getRetroBoardDataOnUpdate",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new Be).subscribe("/topic/retro-board/".concat(a),function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("URI : ",t),e.next=3,I.get(t.body);case 3:if(200!==(a=e.sent).status){e.next=10;break}return e.t0=n,e.next=8,a.data;case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getRetroWalls",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/retro-board/walls/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=8;break}return e.next=6,a.data;case 6:return n=e.sent,e.abrupt("return",n);case 8:throw Error("Error encountered while fetching retro walls for retro board (".concat(t,")"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sortByVotes",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.notes.sort((function(e,t){return e.likedBy.length-t.likedBy.length})),e.abrupt("return",new Z(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateNote",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.put("/retro-board/walls/notes",t);case 2:if(204!==e.sent.status){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("Error encountered while updating note in the backend.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateRetroBoard",value:function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.put("/retro-board",t);case 2:if(204!==e.sent.status){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("Error encountered while updating note in the backend.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"shareBoard",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/share",{itemId:t,teamIds:a.map((function(e){return e.teamId}))});case 2:if(201!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return this.retroBoardService||(this.retroBoardService=new e),this.retroBoardService}}]),e}();_e.retroBoardService=void 0;var Ae=_e,Le=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return Ae.getInstance()}}]),e}(),Ue=a(158),De=a.n(Ue),We=(a(573),Object(n.createContext)(null)),Fe=function(e){var t=Object(n.useState)({maxLikes:0,blur:"off"}),a=Object(le.a)(t,2),r=a[0],c=a[1];return n.createElement(We.Provider,{value:[r,c]},e.children)},Me=function(e){var t,a,c=Object(n.useContext)(We),o=Object(le.a)(c,2),l=o[0],s=(o[1],Object(n.useState)(e.note)),u=Object(le.a)(s,2),i=u[0],m=u[1],d=Object(n.useState)(!1),f=Object(le.a)(d,2),b=f[0],E=f[1],v=Object(n.useState)({show:!1,message:""}),g=Object(le.a)(v,2),y=g[0],O=g[1],k=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.getInstance().updateNote(t);case 2:e.sent,E(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n,r,c,o,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null!==(a=i.likedBy)&&void 0!==a?a:[],r=n.filter((function(e){return e.email===t.email})).length>0,e.next=4,Le.getInstance().getNotes(l.boardId,"");case 4:if(c=e.sent,o=0,c.notes.forEach((function(e){e.likedBy&&e.likedBy.some((function(e){return e.uid===t.uid}))&&o++})),s=l.maxLikes,r||!(o<s)){e.next=15;break}return e.next=11,Le.getInstance().updateNote(Object(G.a)(Object(G.a)({},i),{},{likedBy:[].concat(Object(Y.a)(i.likedBy),[t])}));case 11:u=e.sent,m(u),e.next=17;break;case 15:O({show:!0,message:"Like Count Limit Reached"}),setTimeout((function(){O(Object(G.a)(Object(G.a)({},y),{},{show:!1}))}),2e3);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){Le.getInstance().getNoteDataWhenModified(e.note,(function(t){t&&(m(t),e.callBackWall(t))}))}),[]);var x=function(e){var t="on"!==l.blur||e.createdBy.includes(B.getInstance().getLoggedInUser().uid)?"blur(0px)":"blur(3px)",a=r.a.createElement("div",{className:"card-text",style:{width:"95%",filter:t}},r.a.createElement(De.a,{source:e.noteText,escapeHtml:!0}));if(e.noteText.includes("  ")){var n=e.noteText.split("  ").map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(De.a,{source:e,escapeHtml:!0}),r.a.createElement("hr",null))}));a=r.a.createElement("div",{className:"card-text",style:{width:"95%",filter:t}},n)}return a}(i);return r.a.createElement(Fe,null,r.a.createElement(se.a,{className:"sticky-thisNote z-depth-5",style:{backgroundColor:(null===(t=i.style)||void 0===t?void 0:t.backgroundColor)||"white"}},r.a.createElement(se.a.Body,{"data-testid":"card_body",style:{padding:"5px",fontFamily:"sans-serif",fontWeight:500,minHeight:"50px"},onClick:function(){if(console.log("Condition: ",i.createdBy.includes(B.getInstance().getLoggedInUser().uid)),console.log("".concat(e.note.createdBy," === ").concat(B.getInstance().getLoggedInUser().uid)),e.note.createdBy.includes(B.getInstance().getLoggedInUser().uid)){i.noteText;E(!0)}}},r.a.createElement("div",{"data-testid":"editor",style:{color:(null===(a=i.style)||void 0===a?void 0:a.textColor)||"black"}},b?r.a.createElement(ke,{noteText:i.noteText,handleEnter:function(e){return k(Object(G.a)(Object(G.a)({},i),{},{noteText:e}))}}):x)),r.a.createElement("ul",{className:"list-inline pull-right",style:{position:"absolute",right:"5px",bottom:"0px"}},r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(xe,{key:"like_note.noteId",handleUpVote:w,likedBy:i.likedBy||[],stickyNoteId:i.noteId})),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(we.a,{"data-testid":"delete_badge_".concat(i.noteId),variant:"danger",style:{cursor:"pointer",padding:"2px",margin:"0"},onClick:function(){return t=i,void e.deleteNote(t);var t}},r.a.createElement("i",{className:"fa fa-trash-o"})))),r.a.createElement(je.a,{"data-testid":"toast",show:y.show,style:{position:"absolute",left:"50%"}},r.a.createElement(je.a.Body,null,y.message))))},Pe=function(){function e(t,a,n,r){Object(l.a)(this,e),this.retroBoardId=void 0,this.wallId=void 0,this.noteId=void 0,this.noteText=void 0,this.style=void 0,this.likedBy=void 0,this.createdBy=void 0,this.retroBoardId=t,this.wallId=a,this.noteId=String(Date.now()),this.noteText=n,this.style=r,this.likedBy=[],this.createdBy=""}return Object(s.a)(e,null,[{key:"toJSON",value:function(e){return JSON.stringify(e)}},{key:"fromJSON",value:function(e){return JSON.parse(e)}}]),e}(),He=function(e){var t=e.boardTemplate,a=e.removeWall;return n.createElement(n.Fragment,null,n.createElement(ce.a,null,t.walls.map((function(e,t){var r;return n.createElement(oe.a,{key:t,className:"justify-content-center text-center"},n.createElement("h6",null,e.wallTitle," ",n.createElement(U.a,{onClick:function(){return a(t)},variant:"link"},n.createElement("i",{className:"fa fa-times"}))),(null===e||void 0===e||null===(r=e.notes)||void 0===r?void 0:r.length)>0?e.notes.map((function(e,t){return n.createElement(Me,{key:t,note:new Pe("","",e.noteText,e.noteStyle),deleteNote:function(e){console.log("act as dummy in this context!")},callBackWall:function(e){console.log("act as dummy in this context!")}})})):n.createElement(Me,{key:t,note:new Pe("","","Foo Bar",e.wallStyle.stickyNote),deleteNote:function(e){console.log("act as dummy in this context!")},callBackWall:function(e){console.log("act as dummy in this context!")}}))}))))},Je=function(e){var t,a=Object(n.useState)(!1),r=Object(le.a)(a,2),c=r[0],o=r[1],l=function(){return o(!1)},s=Object(n.useState)({templateTitle:"Template Title",walls:[],templateId:"",userId:null===(t=B.getInstance().getLoggedInUser())||void 0===t?void 0:t.uid}),u=Object(le.a)(s,2),i=u[0],m=u[1],d=Object(n.useState)(""),f=Object(le.a)(d,2),p=f[0],h=f[1],b=Object(n.useState)("#ffffff"),E=Object(le.a)(b,2),v=E[0],g=E[1],y=Object(n.useState)(z.wentWell.stickyNote.backgroundColor),O=Object(le.a)(y,2),k=O[0],w=O[1];return n.createElement(n.Fragment,null,n.createElement(U.a,{variant:"light",onClick:function(){return o(!0)},style:{padding:"25px",border:"2px dashed"}},n.createElement("i",{className:"fa fa-plus fa-lg"})),n.createElement(ie.a,{show:c,onHide:l,dialogClassName:"custom-modal"},n.createElement(ie.a.Header,null,n.createElement(pe,{onSubmit:function(e){return t=e,void m(Object(G.a)(Object(G.a)({},i),{},{templateTitle:t}));var t},title:i.templateTitle})),n.createElement(ie.a.Body,null,n.createElement(ce.a,null,n.createElement(me.a,null,n.createElement(ce.a,null,n.createElement(de.a,{inline:!0,onSubmit:function(e){return e.preventDefault()}},n.createElement(oe.a,null,n.createElement(de.a.Control,{placeholder:"Wall Title",onChange:function(e){return function(e){return h(e.currentTarget.value)}(e)},value:p,style:{padding:"20px",marginLeft:"5px"}})),n.createElement(oe.a,{style:{backgroundColor:v}},n.createElement(ve,{title:"Text Color",handleOnChangeComplete:function(e){return g(e.hex)}})),n.createElement(oe.a,{style:{backgroundColor:k}},n.createElement(ve,{title:"Background Color",handleOnChangeComplete:function(e){return w(e.hex)}})),n.createElement(oe.a,null,n.createElement(U.a,{onClick:function(){var e={wallTitle:p,wallStyle:{stickyNote:{backgroundColor:k,textColor:v,likeBtnPosition:"right"}},wallOrder:1,notes:[{noteText:"Lorem Epsum Dolor Sit amet",noteStyle:{backgroundColor:k,textColor:v,likeBtnPosition:"right"}}]};m(Object(G.a)(Object(G.a)({},i),{},{walls:[].concat(Object(Y.a)(i.walls),[e])})),h("")},disabled:""===p},"Add Wall"))),n.createElement("hr",null)))),n.createElement("div",{style:{border:"1px solid",padding:"20px",margin:"1px solid"}},n.createElement(He,{boardTemplate:i,removeWall:function(e){m(Object(G.a)(Object(G.a)({},i),{},{walls:[].concat(Object(Y.a)(i.walls.slice(0,e)),Object(Y.a)(i.walls.slice(e+1)))}))}}))),n.createElement(ie.a.Footer,null,n.createElement(U.a,{variant:"success",disabled:0===i.walls.length,onClick:function(){var t=Object(G.a)(Object(G.a)({},i),{},{walls:i.walls.map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{wallOrder:t})}))});e.onCreateTemplate(t),l()}},"Create Template"),n.createElement(U.a,{variant:"light",onClick:l},"Cancel"))))},Ve=a(122),Ke=function(e){var t=e.onCreateRetroBoard,a=e.title,c=Object(n.useState)(!1),o=Object(le.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)({title:"",maxLikes:5}),i=Object(le.a)(u,2),m=i[0],d=i[1],f=function(){return s(!1)},b=function(e){return function(t){var a=t.currentTarget.value;d(Object(G.a)(Object(G.a)({},m),{},Object(Ve.a)({},e,a)))}},E=function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(m),f();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{variant:"outline-primary",onClick:function(){return s(!0)}},a),r.a.createElement(ie.a,{show:l,onHide:f},r.a.createElement(ie.a.Header,{closeButton:!0},r.a.createElement(ie.a.Title,null,a)),r.a.createElement(ie.a.Body,null,r.a.createElement(de.a,null,r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Dashboard Title"),r.a.createElement(de.a.Control,{name:"title",type:"text",placeholder:"e.g. Spring 400 ",value:m.title,autoComplete:"false",onChange:b("title")})),r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Max Likes"),r.a.createElement(de.a.Control,{name:"maxLikes",type:"number",placeholder:"e.g. 5 or 6 ",onChange:b("maxLikes"),autoComplete:"false",value:String(m.maxLikes)})))),r.a.createElement(ie.a.Footer,null,r.a.createElement(U.a,{variant:"secondary",onClick:f},"Close"),r.a.createElement(U.a,{variant:"primary",onClick:E},"Save Changes"))))},Ye=function(){function e(t,a,n){Object(l.a)(this,e),this.retroBoardId=void 0,this.wallId=void 0,this.title=void 0,this.style=void 0,this.sortCards=void 0,this.wallOrder=1,this.retroBoardId=t,this.wallId=a.replace(/\s/g,""),this.title=a,this.style=n,this.sortCards=!1}return Object(s.a)(e,[{key:"setWallOrder",value:function(e){return this.wallOrder=e,this}}],[{key:"newInstance",value:function(t,a,n){return new e(t,a,n)}}]),e}(),Ge=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"createRetroBoard",value:function(e){return{type:S.CREATE_RETRO_BOARD,payload:e}}},{key:"createRetroWalls",value:function(e){return{type:S.CREATE_RETRO_WALLS,payload:e}}},{key:"createNote",value:function(e){return{type:S.CREATE_NOTE,payload:e}}},{key:"updateNote",value:function(e){return{type:S.UPDATE_NOTE,payload:e}}},{key:"deleteNote",value:function(e){return{type:S.DELETE_NOTE,payload:e}}},{key:"getNotes",value:function(e){return{type:S.GET_NOTES,payload:e}}},{key:"sortByVotes",value:function(){return{type:S.SORT,payload:C.SORT_BY_VOTES}}},{key:"sortByTimestamp",value:function(){return{type:S.SORT,payload:C.SORT_BY_TIMESTAMP}}},{key:"refreshRetroWalls",value:function(){return{type:S.REFRESH_WALLS,payload:new X([])}}}]),e}(),ze=Object(d.f)((function(e){var t=Object(J.b)(),a=function(){var a=Object(h.a)(p.a.mark((function a(n){var r,c,o,l;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=Le.getInstance(),c=new Ge,a.next=4,r.createNewRetroBoard(n);case 4:return o=a.sent,t(c.createRetroBoard(o)),console.log("Template Walls -> ",e.templateWalls),a.next=9,r.createRetroWalls(o.id,new X(e.templateWalls.map((function(e,t){return Ye.newInstance(o.id,e.wallTitle,e.wallStyle).setWallOrder(e.wallOrder)}))));case 9:l=a.sent,e.history.push({pathname:"/retro-board/".concat(o.userId,"/").concat(o.id),state:{walls:new X(l)}});case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement(Ke,{title:e.title,onCreateRetroBoard:a}))})),qe=Object(d.f)((function(e){var t=Object(n.useState)([]),a=Object(le.a)(t,2),r=a[0],c=a[1],o=function(){var t=Object(h.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.templateService.createBoardTemplate(a);case 2:n=t.sent,c([].concat(Object(Y.a)(r),[n]));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(h.a)(p.a.mark((function t(a){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.templateService.deleteBoardTemplate(a);case 2:c(r.filter((function(e){return e.templateId!==a.templateId})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){e.templateService.getBoardTemplates().then((function(e){c(e.templates)}))}),[e.templateService]),n.createElement(Fe,null,n.createElement(ce.a,null,n.createElement(oe.a,{md:1},n.createElement(Je,{onCreateTemplate:o})),r.map((function(e,t){return n.createElement(oe.a,{key:t,md:3},n.createElement(se.a,null,n.createElement(se.a.Body,null,n.createElement("div",{key:t},n.createElement(se.a.Title,null,e.templateTitle),n.createElement(He,{boardTemplate:e,removeWall:function(e){return console.log("Test Button Clicked!")}}))),n.createElement(se.a.Footer,null,n.createElement(ze,{title:"Create Board",templateWalls:e.walls}),n.createElement(U.a,{className:"pull-right",variant:"light",onClick:function(){return l(e)}},n.createElement("i",{className:"fa fa-trash-o fa-lg",style:{color:"red"}})))))}))))})),Xe=function(e){return Object(n.useEffect)((function(){document.title="Home"}),[]),r.a.createElement(R.a,null,r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},r.a.createElement("h3",null,"Pre-built Templates")),r.a.createElement(ze,{title:"Create Retro Board",templateWalls:[{wallTitle:"Went Well",wallStyle:z.wentWell,wallOrder:1,notes:[]},{wallTitle:"To Improve",wallStyle:z.toImprove,wallOrder:2,notes:[]},{wallTitle:"Action Items",wallStyle:z.actionItems,wallOrder:3,notes:[]}]}))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},r.a.createElement("h3",null,"My Templates")),r.a.createElement(qe,{retroBoardService:e.retroBoardService,templateService:e.templateService}))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},r.a.createElement("h3",null,"My Boards")),r.a.createElement(ue,{retroBoardService:e.retroBoardService}))))},Ze=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showEditor:!1},n.showEditor=n.showEditor.bind(Object(ge.a)(n)),n.handleEnter=n.handleEnter.bind(Object(ge.a)(n)),n}return Object(s.a)(a,[{key:"showEditor",value:function(){this.setState({showEditor:!0})}},{key:"handleEnter",value:function(e){""!==e&&(this.props.addNote(e),this.setState({showEditor:!1}))}},{key:"render",value:function(){return this.state.showEditor?r.a.createElement("div",{style:{margin:"5px"}},r.a.createElement(ke,{handleEnter:this.handleEnter})):r.a.createElement("div",{style:{margin:"5px"}},r.a.createElement(U.a,{title:"Add new note","data-testid":"add_new_note_btn",variant:"dark",onClick:this.showEditor},r.a.createElement("i",{className:"fa fa-lg fa-plus"})))}}]),a}(r.a.Component),Qe=a(245),$e=a(587),et=a(591),tt=function(e){var t=Object(n.useState)(!1),a=Object(le.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(0),l=Object(le.a)(o,2),s=l[0],u=l[1];return n.createElement(n.Fragment,null,n.createElement("div",{style:{margin:"5px"}},n.createElement(U.a,{title:"Retrospect",variant:"link",onClick:function(){return c(!0)}},n.createElement("i",{className:"fa fa-lg fa-eye"}))),n.createElement(n.Fragment,null,n.createElement(ie.a,{show:r,onHide:function(){return c(!1)},style:{backgroundColor:"black"}},n.createElement(ie.a.Body,{style:{backgroundColor:e.style.backgroundColor}},n.createElement(et.a,{activeIndex:s,onSelect:function(e){return u(e)},interval:null},e.items.map((function(t,a){return n.createElement(et.a.Item,{key:a},n.createElement("div",{style:{height:"400px"}},n.createElement(et.a.Caption,{style:{color:e.style.textColor}},n.createElement("div",{style:{height:"200px",overflowY:"scroll"}},n.createElement("h3",{style:{overflowY:"scroll"}},function(e){return e.includes("<MERGE_NOTE>")?e.split("<MERGE_NOTE>").map((function(e,t){return n.createElement("span",{key:t},e,n.createElement("br",null),n.createElement("hr",{style:{borderTop:"1px dashed"}}))})):n.createElement("span",null,e)}(t))))))})))))))},at=function(e){var t,a,c=Object(n.useState)([]),o=Object(le.a)(c,2),l=o[0],s=o[1],u=function(){var t=Object(h.a)(p.a.mark((function t(a){var n,r,c,o,u,i,m;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(m=new Pe(e.wall.retroBoardId,e.wall.wallId,a,{backgroundColor:(null===(n=e.wall.style)||void 0===n||null===(r=n.stickyNote)||void 0===r?void 0:r.backgroundColor)||"white",textColor:(null===(c=e.wall.style)||void 0===c||null===(o=c.stickyNote)||void 0===o?void 0:o.textColor)||"black",likeBtnPosition:(null===(u=e.wall.style)||void 0===u||null===(i=u.stickyNote)||void 0===i?void 0:i.likeBtnPosition)||"right"})).createdBy=B.getInstance().getLoggedInUser().email,t.t0=s,t.t1=[],t.t2=Object(Y.a)(l),t.next=7,Le.getInstance().addNewNote(m);case 7:t.t3=t.sent,t.t4=[t.t3],t.t5=t.t1.concat.call(t.t1,t.t2,t.t4).sort((function(e,t){return t.likedBy.length-e.likedBy.length})),(0,t.t0)(t.t5),e.callBack();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(h.a)(p.a.mark((function t(a,n){var r,c,o,u,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=JSON.parse(a.dataTransfer.getData("text/plain"))).noteId!==n.noteId){t.next=3;break}return t.abrupt("return");case 3:return n.noteText+="  "+r.noteText,c=l.map((function(e){return e.noteId===r.noteId?Object.assign({},e,n.noteText):e})),(o=l.find((function(e){return e.noteId===n.noteId}))).noteText=n.noteText,u=Le.getInstance(),t.next=10,u.updateNote(o);case 10:return t.sent,i=l.find((function(e){return e.noteId===r.noteId})),t.next=14,u.deleteNote(i);case 14:s(c),e.callBack();case 16:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),m=function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},d=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.getInstance().deleteNote(t);case 2:s(Object(Y.a)(l.filter((function(e){return e.noteId!==t.noteId}))));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=Object(Y.a)(l),a=t.find((function(t){return t.noteId===e.noteId}));a.likedBy=e.likedBy,a.noteText=e.noteText,s(t.sort((function(e,t){return t.likedBy.length-e.likedBy.length})))};Object(n.useEffect)((function(){var t=function(){var t=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,Le.getInstance().getNotes(e.wall.retroBoardId,e.wall.wallId);case 3:t.t1=t.sent.notes.sort((function(e,t){return t.likedBy.length-e.likedBy.length})),(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Le.getInstance().getNotesDataOnUpdate(e.wall.retroBoardId,e.wall.wallId,function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Notes Data Changed!"),s(t.notes.sort((function(e,t){return t.likedBy.length-e.likedBy.length})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t()}),[]);var b=l.filter((function(t){return t.wallId===e.wall.wallId})).map((function(e,t){return r.a.createElement(Qe.a,{key:t,style:{padding:"0px",border:"none",marginBottom:"2px"},className:"text-left",id:"list_group_item_".concat(t),draggable:!0,onDragStart:function(t){return function(e,t){e.dataTransfer.setData("text/plain",JSON.stringify(t))}(t,e)},onDragOver:m,onDrop:function(t){return i(t,e)}},r.a.createElement(Me,{key:e.noteId,note:e,callBackWall:f,deleteNote:d}))}));return r.a.createElement("section",{className:"sticky-wall text-center"},r.a.createElement("h3",null,e.wall.title," "),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(tt,{items:l.map((function(e){return e.noteText})),style:{textColor:null===(t=l[0])||void 0===t?void 0:t.style.textColor,backgroundColor:null===(a=l[0])||void 0===a?void 0:a.style.backgroundColor}}))),r.a.createElement(Ze,{addNote:u}),r.a.createElement($e.a,null,b))},nt=a(246),rt=a(588),ct=a(589),ot=function(e){var t=e.teams?e.teams:[],a=Object(n.useState)(!1),r=Object(le.a)(a,2),c=r[0],o=r[1],l=function(){return o(!1)},s=Object(n.useState)(!1),u=Object(le.a)(s,2),i=u[0],m=u[1],d=Object(n.useState)([]),f=Object(le.a)(d,2),b=f[0],E=f[1],v=Object(n.useState)(void 0),g=Object(le.a)(v,2),y=g[0],O=g[1],k=function(){var t=Object(h.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.next=3,e.shareWith(b);case 3:a=t.sent,O(!0===a?n.createElement(rt.a,{variant:"success"},n.createElement("i",{className:"fa fa-check",style:{color:"green"}}),"Page is now shared with the selected teams."):n.createElement(rt.a,{variant:"danger"},"Cannot share the page. Contact admin.")),m(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement(U.a,{style:{border:"1px solid black"},variant:"light",onClick:function(){return o(!0)}},n.createElement("i",{className:"fa fa-share-alt"})),n.createElement(ie.a,{show:c,onHide:l},n.createElement(ie.a.Body,null,n.createElement(de.a,{onSubmit:k},n.createElement(me.a,null,n.createElement(de.a.Label,null,n.createElement("h3",null,"Share with:")),n.createElement(de.a.Control,{as:"select",multiple:!0,onChange:function(t){return function(t){for(var a=t.currentTarget.selectedOptions,n=[],r=function(t){n.push(e.teams.find((function(e){return e.teamId===a[t].value})))},c=0;c<a.length;c++)r(c);E(n)}(t)}},n.createElement("option",{disabled:!0},"Select teams to share"),t.map((function(e,t){return n.createElement("option",{key:t,value:e.teamId},e.teamName)})))),n.createElement(me.a,null,n.createElement(U.a,{type:"submit",variant:"success"},"Share"),n.createElement(U.a,{onClick:l,variant:"light"},"Cancel")))),i?n.createElement(ie.a.Footer,null,i?n.createElement(n.Fragment,null,n.createElement(ct.a,{animated:!0}),y):n.createElement(n.Fragment,null,y)):n.createElement(n.Fragment,null,y)))},lt=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"createNewTeam",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/teams",t);case 2:if(201!==(a=e.sent).status){e.next=8;break}return e.next=6,I.get(a.headers.location);case 6:return n=e.sent,e.abrupt("return",n.data);case 8:throw Error("Encountered some trouble while trying to create new team!");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addTeamMember",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/teams/member",{teamId:t,userEmail:a});case 2:if(201!==(n=e.sent).status){e.next=11;break}return e.next=6,I.get(n.headers.location);case 6:if(200!==(r=e.sent).status){e.next=11;break}return e.next=10,r.data;case 10:return e.abrupt("return",e.sent);case 11:throw Error("Member cannot be added. Response Status: "+n.status);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"removeTeamMember",value:function(){var e=Object(h.a)(p.a.mark((function e(t,a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.delete("/teams/".concat(t.teamId,"/member/").concat(a.uid));case 2:if(204===(n=e.sent).status){e.next=5;break}throw Error("error deleting team member. Status: "+n.status);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getTeamMember",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/users",{params:{email:t}});case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:throw Error("No user found! Response Status: "+a.status);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTeam",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.delete("/teams/".concat(t.teamId));case 2:if(204===(a=e.sent).status){e.next=5;break}throw Error("Encountered problem while deleting the team. Response Status: "+a.status);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMyTeams",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/teams");case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",{teams:[]});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getTeamMembers",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/teams/".concat(t,"/members"));case 2:if(200!==(a=e.sent).status){e.next=7;break}return e.next=6,a.data;case 6:return e.abrupt("return",e.sent);case 7:throw Error("Error while trying to fetch team members for team ID: "+t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();lt.instance=void 0;var st=lt,ut=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,null,[{key:"getInstance",value:function(){return st.getInstance()}}]),e}(),it=function(){var e=Object(n.useContext)(We),t=Object(le.a)(e,2),a=t[0];t[1];if(a.uid!==B.getInstance().getLoggedInUser().uid)return n.createElement(n.Fragment,null);var r=function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.getInstance().getRetroBoardById(a.uid,a.boardId);case 2:return(n=e.sent).blur=t,e.next=6,Le.getInstance().updateRetroBoard(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c="on"===a.blur;return n.createElement("div",{className:"blur-toggle-wrapper"},n.createElement(ye.a,null,n.createElement(de.a.Check,{checked:c,type:"switch",id:"switch_on",label:"Blur On",onChange:function(){return r(c?"off":"on")}})))},mt=Object(d.f)((function(e){var t=e.match.params,a=t.retroBoardId,c=t.uid;if(void 0===a)throw Error("Board ID is null!!!");localStorage.setItem("retroBoardId",a);var o=Object(n.useContext)(We),l=Object(le.a)(o,2),s=l[0],u=l[1],i=Object(n.useState)(""),m=Object(le.a)(i,2),d=m[0],f=m[1],b=Object(n.useState)(""),E=Object(le.a)(b,2),v=E[0],g=E[1],y=Object(n.useState)(C.NONE),O=Object(le.a)(y,2),k=O[0],w=(O[1],Object(n.useState)([])),x=Object(le.a)(w,2),j=x[0],I=x[1],T=Object(n.useState)(new X([])),N=Object(le.a)(T,2),S=N[0],B=N[1],R=Object(n.useState)({data:[],headers:[]}),_=Object(le.a)(R,2),A=_[0],L=_[1],D=function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{label:"Wall Name",key:"wallName"},{label:"Note",key:"noteText"},{label:"Up-votes",key:"upvotes"}],e.next=3,Le.getInstance().getRetroWalls(a);case 3:return n=e.sent,e.next=6,Le.getInstance().getNotes(a,"");case 6:r=e.sent,console.log("Retro Board Id: ",r),c=[],n.walls.forEach((function(e){r.notes.filter((function(t){return t.wallId===e.wallId})).forEach((function(t){var a,n;c.push({wallName:e.title,noteText:t.noteText,upvotes:null!==(a=null===(n=t.likedBy)||void 0===n?void 0:n.length)&&void 0!==a?a:0})}))})),console.log("CSV DAtA: ",c),L({data:c,headers:t});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Le.getInstance().shareBoard(d,t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),F=S.walls.map((function(t,a){var n=e.match.params.retroBoardId;return t.retroBoardId=n,r.a.createElement(oe.a,{key:a},r.a.createElement(at,{wall:t,sortBy:k,callBack:D}))}));return Object(n.useEffect)((function(){a&&c&&(Le.getInstance().getRetroBoardDataOnUpdate(c,a,function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(Object(G.a)(Object(G.a)({},s),{},{uid:c,boardId:t.id,maxLikes:t.maxLikes,blur:t.blur}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){var t=Object(h.a)(p.a.mark((function t(n,r){var c,o,l,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c=Le.getInstance(),t.next=4,ut.getInstance().getMyTeams();case 4:return o=t.sent,t.next=7,c.getRetroBoardById(r,n);case 7:return l=t.sent,t.next=10,c.getRetroWalls(a);case 10:return i=t.sent,t.next=13,D();case 13:document.title=l.name,u(Object(G.a)(Object(G.a)({},s),{},{boardId:l.id,maxLikes:l.maxLikes,uid:r})),f(n),g(l.name),I(o.teams),B(i),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),t.t0 instanceof Re&&e.history.push("/unauthorized");case 24:case"end":return t.stop()}}),t,null,[[0,21]])})));return function(e,a){return t.apply(this,arguments)}}()(a,c))}),[]),r.a.createElement("div",{style:{padding:"50px"}},r.a.createElement(ce.a,{className:"justify-content-center my-1",style:{borderBottom:"1px solid white"}},r.a.createElement(oe.a,{className:"col-sm-3"},r.a.createElement("h2",null,v)),r.a.createElement(oe.a,null,r.a.createElement(it,null)),r.a.createElement(oe.a,{className:"align-self-center"},r.a.createElement("div",{className:"pull-right"},r.a.createElement(ot,{teams:j,shareWith:W})),r.a.createElement(U.a,{className:"pull-right",style:{border:"1px solid black"},variant:"light"},r.a.createElement(nt.CSVLink,{data:A.data,headers:A.headers,target:"_blank",filename:v},r.a.createElement("i",{className:"fa fa-file-excel-o",style:{color:"blue"}}))))),r.a.createElement(ce.a,null,F))})),dt=a(247),ft=a.n(dt),pt=a(248),ht=a.n(pt),bt=a(249),Et=a.n(bt),vt=a(250),gt=a.n(vt),yt=a(251),Ot=a.n(yt),kt=a(590),wt=(a(577),Object(d.f)((function(e){var t=function(){return e.location.state?e.location.state.referrer:"/"},a=function(){var a=Object(h.a)(p.a.mark((function a(){var n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=B.getInstance(),a.next=3,n.isUserAuthenticated();case 3:if(a.sent){a.next=5;break}n.authenticateAnonymousUser().then((function(){console.log(e.location.state),e.success(),e.history.push(t())}));case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"#"},r.a.createElement("img",{src:ft.a,width:"30",height:"30",className:"d-inline-block align-top",alt:""}),"Designer Boards")),r.a.createElement(R.a,{fluid:!0,className:"d-flex w-100 h-100 p-3 mx-auto flex-column"},r.a.createElement("section",{className:"login-section"},r.a.createElement(R.a,null,r.a.createElement(ce.a,{className:"align-items-center justify-content-center"},r.a.createElement(oe.a,null,r.a.createElement("div",{className:"pt-3"},r.a.createElement("h2",null,"Get Started!"),r.a.createElement("p",{style:{textAlign:"center"}},"It doesn't need a manual.")))),r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement(U.a,{className:"btn btn-block btn-social btn-google",onClick:function(){var a=B.getInstance();a.isUserAuthenticated().then((function(n){n||a.authenticateUser().then((function(){e.success(),e.history.push(t())}))}))}},r.a.createElement("span",{className:"fa fa-google"}),"Sign in with Google")),r.a.createElement(oe.a,null,r.a.createElement(U.a,{className:"btn btn-block btn-social",onClick:a},r.a.createElement("span",{className:"fa fa-user"}),"Sign in as Anonymous User")))),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},r.a.createElement("path",{fill:"#0099ff","fill-opacity":"1",d:"M0,256L80,213.3C160,171,320,85,480,85.3C640,85,800,171,960,213.3C1120,256,1280,256,1360,256L1440,256L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z"}))),r.a.createElement("header",null,r.a.createElement(R.a,null,r.a.createElement(ce.a,{className:"justify-content-center align-items-center"},r.a.createElement(oe.a,null,r.a.createElement("div",{className:"pt-3"},r.a.createElement("h3",null,"Build Dynamic Beautiful Boards"),r.a.createElement("p",null,"You often find yourself working on the excel sheet and then sharing it with the group. Well, no need for that anymore. You can use this platform to quickly create beautiful looking boards for your teams to work together."))),r.a.createElement(oe.a,null,r.a.createElement("div",{className:"pt-3"},r.a.createElement(kt.a,{src:ht.a,alt:"Designer Boards"})))))),r.a.createElement("section",{className:"features"},r.a.createElement(R.a,null,r.a.createElement(ce.a,null,r.a.createElement(oe.a,null,r.a.createElement("h1",{style:{borderBottom:"2px solid black"}},"Features"))),r.a.createElement(ce.a,{className:"justify-content-center align-items-center p-3"},r.a.createElement(oe.a,null,r.a.createElement(kt.a,{src:Et.a,className:"img-fluid"})),r.a.createElement(oe.a,null,r.a.createElement("h3",null,"In-built Retro Board Template"),r.a.createElement("p",null,"Get started with your team's retrospective meetings in less than a minute. It comes with the pre-build template to get you started quickly."))),r.a.createElement(ce.a,{className:"justify-content-center align-items-center p-3"},r.a.createElement(oe.a,null,r.a.createElement("h3",null,"Create Your Own Colorful Templates"),r.a.createElement("p",null,"Don't worry if pre-built templates doesn't serve your purpose. You can create your colorful templates with a very simple interface.")),r.a.createElement(oe.a,null,r.a.createElement(kt.a,{src:Ot.a,className:"img-fluid"}))),r.a.createElement(ce.a,{className:"justify-content-center align-items-center p-3"},r.a.createElement(oe.a,null,r.a.createElement(kt.a,{src:gt.a,className:"img-fluid"})),r.a.createElement(oe.a,null,r.a.createElement("h3",null,"Dashboard To Manage All Your Boards"),r.a.createElement("p",null,"Having a lot of boards can be challenging to keep track of. That's why it comes with your own dashboard so that you can find all your dashboards in one place."))))),r.a.createElement(_,null)))}))),xt=function(e){return Object(n.useEffect)((function(){e.service.logout()}),[e]),r.a.createElement(d.a,{to:"/login"})},jt=function(e){var t=Object(n.useState)(!1),a=Object(le.a)(t,2),r=a[0],c=a[1],o=function(){return c(!1)},l=Object(n.useState)(""),s=Object(le.a)(l,2),u=s[0],i=s[1];return n.createElement(n.Fragment,null,n.createElement(U.a,{variant:"primary",onClick:function(){return c(!0)}},"Create New Team"),n.createElement(ie.a,{show:r,onHide:o},n.createElement(ie.a.Header,null,n.createElement("h3",null,"Create New Team")),n.createElement(ie.a.Body,null,n.createElement(Oe.a,{autoFocus:!0,autoComplete:"disabled",onChange:function(e){i(e.currentTarget.value)},placeholder:"Enter your team name..."})),n.createElement(ie.a.Footer,null,n.createElement(U.a,{variant:"primary",onClick:function(){var t,a={teamId:"",teamName:u,teamMembers:[],createdBy:null===(t=B.getInstance().getLoggedInUser())||void 0===t?void 0:t.uid};e.createTeam(a),o()}},"Create"),n.createElement(U.a,{variant:"light",onClick:o},"Cancel"))))},It=function(e){var t=Object(n.useState)(!1),a=Object(le.a)(t,2),r=a[0],c=a[1],o=function(){return c(!1)},l=Object(n.useState)(""),s=Object(le.a)(l,2),u=s[0],i=s[1],m=Object(n.useState)({error:!0,msg:""}),d=Object(le.a)(m,2),f=d[0],p=d[1];return n.createElement(n.Fragment,null,n.createElement(U.a,{variant:"link",onClick:function(){return c(!0)}},n.createElement("i",{className:"fa fa-user-plus fa-lg"})),n.createElement(ie.a,{show:r,onHide:o},n.createElement(ie.a.Header,null,n.createElement("h4",null,"Add New Team Member"),n.createElement(we.a,{variant:"primary"},e.teamName)),n.createElement(ie.a.Body,null,n.createElement(Oe.a,{autoComplete:"disabled",onChange:function(e){p({error:!1,msg:""}),i(e.currentTarget.value)},placeholder:"Enter team member's email address",type:"email"}),f.error?n.createElement("span",{className:"text-danger"},f.msg):n.createElement(n.Fragment,null)),n.createElement(ie.a.Footer,null,n.createElement(U.a,{variant:"primary",onClick:function(){var t;u===(null===(t=B.getInstance().getLoggedInUser())||void 0===t?void 0:t.email)?p({error:!0,msg:"LOL! You cannot add your own email!!!"}):(e.addTeamMember(u),o(),p({error:!1,msg:""}))}},"Add Member"),n.createElement(U.a,{variant:"light",onClick:o},"Cancel"))))},Tt=Object(d.f)((function(){var e=ut.getInstance(),t=Object(n.useState)([]),a=Object(le.a)(t,2),r=a[0],c=a[1],o=Object(n.useState)(!1),l=Object(le.a)(o,2),s=l[0],u=l[1],i=Object(n.useState)({teamId:"",teamName:"",teamMembers:[]}),m=Object(le.a)(i,2),d=m[0],f=m[1],b=function(){var t=Object(h.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Creating new team...",r),t.next=3,e.createNewTeam(a);case 3:n=t.sent,c([].concat(Object(Y.a)(r),[n]));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(h.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.deleteTeam(a);case 3:n=r.filter((function(e){return e.teamId!==a.teamId})),c(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert("Cannot delete team!");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(h.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getTeamMembers(a.teamId);case 2:n=t.sent,f({teamId:a.teamId,teamName:a.teamName,teamMembers:n.teamMembers}),u(!0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){document.title="Teams",function(){var t=Object(h.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMyTeams();case 2:a=t.sent,c(a.teams);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e]);var g=function(){var t=Object(h.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.addTeamMember(d.teamId,a);case 2:n=t.sent,f(Object(G.a)(Object(G.a)({},d),{},{teamMembers:n.teamMembers}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement(ce.a,null,n.createElement(oe.a,{md:4,sm:6},n.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},n.createElement("h3",null,"Create New Team")))),n.createElement(ce.a,null,n.createElement(oe.a,{xs:6,md:4},n.createElement(jt,{createTeam:function(e){return b(e)}}))),n.createElement("hr",null),n.createElement(ce.a,null,n.createElement(oe.a,{md:4,sm:6},n.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},n.createElement("h3",null,"Existing Teams")))),n.createElement(ce.a,null,r.map((function(e,t){return n.createElement(oe.a,{md:3,key:t},n.createElement(se.a,{key:t},n.createElement(se.a.Body,{className:"mx-auto"},n.createElement("h4",null,e.teamName)),n.createElement(se.a.Body,{className:"mx-auto"},n.createElement(U.a,{variant:"outline-secondary",onClick:function(){return v(e)}},"View Members"),n.createElement(U.a,{variant:"outline-danger",onClick:function(){return E(e)}},"Delete Team"))))}))),n.createElement(ie.a,{show:s,onHide:function(){return u(!1)}},n.createElement(ie.a.Header,null,n.createElement(ie.a.Title,null,d.teamName),n.createElement("span",null,n.createElement(It,{teamName:d.teamName,addTeamMember:g}))),n.createElement(ie.a.Body,null,0===d.teamMembers.length?n.createElement(rt.a,{variant:"info"},"No member has been added"):n.createElement($e.a,null,d.teamMembers.map((function(e,t){return n.createElement(Qe.a,{key:t,className:"my-auto"},n.createElement("span",{className:"pull-left"},e.displayName," ",n.createElement("br",null),n.createElement("span",{className:"text-muted text-sm-left"},e.email)),n.createElement("span",{className:"badge pull-right"},n.createElement(U.a,{variant:"outline-danger",onClick:function(){return y(d.teamId,e.email)}},n.createElement("i",{className:"fa fa-trash-o"}))))}))))))})),Nt=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"createBoardTemplate",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.post("/templates",t);case 2:if(201!==(a=e.sent).status){e.next=8;break}return e.next=6,I.get(a.headers.location);case 6:return n=e.sent,e.abrupt("return",n.data);case 8:throw Error("Cannot create template. There is some error in the backend. Status Code: "+a.status);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBoardTemplates",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.get("/templates");case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",t.data);case 5:throw Error("Error fetching templates. Status: "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteBoardTemplate",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.delete("/templates/".concat(t.templateId));case 2:if(204!==(a=e.sent).status){e.next=5;break}return e.abrupt("return");case 5:throw Error("Error deleting template. Status: "+a.status);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return new e}}]),e}(),St=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isLogInFlowExecuted:!1},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(J.a,{store:re},r.a.createElement(m.a,null,r.a.createElement(d.b,{exact:!0,path:"/login",component:function(t){return r.a.createElement(H,{success:function(){return e.setState({isLogInFlowExecuted:!0})}},r.a.createElement(wt,{success:function(){return e.setState({isLogInFlowExecuted:!0})}}))}}),r.a.createElement(d.b,{exact:!0,path:"/",component:function(e){return r.a.createElement(M,null,r.a.createElement(Xe,Object.assign({},e,{retroBoardService:Le.getInstance(),templateService:Nt.getInstance()})))}}),r.a.createElement(d.b,{exact:!0,path:"/teams",component:function(e){return r.a.createElement(M,null,r.a.createElement(Tt,e))}}),r.a.createElement(d.b,{exact:!0,path:"/retro-board/:uid/:retroBoardId",component:function(e){return r.a.createElement(M,null,r.a.createElement(Fe,null,r.a.createElement(mt,e.match.params)))}}),r.a.createElement(d.b,{exact:!0,path:"/logout",component:function(e){return r.a.createElement(M,null,r.a.createElement(xt,{service:B.getInstance()}))}})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(578),a(579),a(580),a(581);o.a.render(r.a.createElement(J.a,{store:re},r.a.createElement(St,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[253,1,2]]]);
//# sourceMappingURL=main.cc248ca5.chunk.js.map