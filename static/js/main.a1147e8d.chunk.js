(this["webpackJsonpretro-board"]=this["webpackJsonpretro-board"]||[]).push([[0],{161:function(e,t,a){},248:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},249:function(e,t,a){e.exports=a.p+"static/media/retro-board-lp-header.07cde02c.svg"},250:function(e,t,a){e.exports=a.p+"static/media/retro-board-design.dbdaebce.png"},251:function(e,t,a){e.exports=a.p+"static/media/retro-board-dashboard.70ce411e.png"},252:function(e,t,a){e.exports=a.p+"static/media/retro-board-create-template.734256dc.png"},254:function(e,t,a){e.exports=a(582)},259:function(e,t,a){},296:function(e,t,a){},573:function(e,t,a){},577:function(e,t,a){},582:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(49),c=a.n(o),s=(a(259),a(10)),l=a(11),i=a(21),u=a(20),m=a(30),d=(a(161),a(18)),p=a(2),f=a.n(p),h=a(8),v=a(99),b=a.n(v),E=function e(){Object(s.a)(this,e),this.uid="",this.idToken="",this.username=void 0,this.displayName="",this.email="",this.isEmailVerified=!1};E.ID_TOKEN="idToken",E.USER_INFO="userInfo",E.REFRESH_TOKEN="refreshToken";var g=E,y=a(229),k=a.n(y),O=window.location.protocol+"//",w=new Map;w.set("localhost:3000","localhost:8082"),w.set("192.168.1.6:3000","192.168.1.6:8082"),w.set("localhost:3001","139.59.25.205:8082"),w.set("retro.bemyaficionado.com","retro-service.bemyaficionado.com"),w.set("vslala.github.io","retro-service.bemyaficionado.com");var x=window.location.host,j=O+w.get(x);console.log("SERVICE_URL: ",j);var T=k.a.create({baseURL:j});T.interceptors.request.use((function(e){return e.headers={"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem(g.ID_TOKEN)),Accept:"*/*"},e}));var S={apiKey:"AIzaSyAERXDD08sF5pEmX1j3nlxjiermP5mvVrM",authDomain:"retro-board-ebce6.firebaseapp.com",databaseURL:"https://retro-board-ebce6.firebaseio.com",projectId:"retro-board-ebce6",storageBucket:"retro-board-ebce6.appspot.com",messagingSenderId:"904985549423"},N=(r.a.createContext(null),function(){function e(){Object(s.a)(this,e),this.auth=void 0,this.authenticatedUser=void 0,this.googleAuthenticationProvider=new b.a.auth.GoogleAuthProvider,this.loggedInUser=void 0,b.a.initializeApp(S),this.auth=b.a.auth()}return Object(l.a)(e,[{key:"getDatabase",value:function(){return b.a.database()}},{key:"authenticateUser",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.signInWithPopup(this.googleAuthenticationProvider);case 2:return t=e.sent,e.next=5,this.persistLoggedInUserInfo(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"persistLoggedInUserInfo",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t},e.next=3,t.user.getIdToken();case 3:if(n=e.sent,console.log("Logged In User: ",t),!t.user){e.next=16;break}return this.loggedInUser=new g,this.loggedInUser.displayName=t.user.displayName||"".concat(a(5)),this.loggedInUser.idToken=n,this.loggedInUser.email=t.user.email||"".concat(a(5),"@retro.com"),this.loggedInUser.uid=t.user.uid||"",this.loggedInUser.isEmailVerified=!t.user.isAnonymous,e.next=14,T.post("/login",t.user);case 14:200===e.sent.status&&(localStorage.setItem(g.ID_TOKEN,n),localStorage.setItem(g.USER_INFO,JSON.stringify(this.loggedInUser)),localStorage.setItem(g.REFRESH_TOKEN,t.user.refreshToken));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLoggedInUser",value:function(){var e=localStorage.getItem(g.USER_INFO);if(e)return JSON.parse(e)}},{key:"isUserAuthenticated",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem(g.REFRESH_TOKEN),a=localStorage.getItem(g.ID_TOKEN),!t){e.next=21;break}if(!a){e.next=19;break}return e.next=6,fetch("".concat(j,"/token/verify?id_token=").concat(a));case 6:if(200!==e.sent.status){e.next=11;break}return e.abrupt("return",!0);case 11:return e.next=13,fetch("https://securetoken.googleapis.com/v1/token?key=".concat(S.apiKey),{method:"POST",body:JSON.stringify({grant_type:"refresh_token",refresh_token:t})});case 13:return n=e.sent,e.next=16,n.json();case 16:r=e.sent,localStorage.setItem(g.ID_TOKEN,r.id_token),localStorage.setItem(g.REFRESH_TOKEN,r.refresh_token);case 19:return console.log("User is authenticated!"),e.abrupt("return",!0);case 21:return console.log("User is not authenticated!"),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getIdToken",value:function(){return localStorage.getItem(g.ID_TOKEN)}},{key:"authenticateAnonymousUser",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.auth.signInAnonymously();case 2:return t=e.sent,e.next=5,this.persistLoggedInUserInfo(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){localStorage.clear()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}());N.instance=void 0;var B,I,C=N,R=a(71),_=function(){return r.a.createElement("footer",{className:"mt-auto font-small blue pt-sm-3"},r.a.createElement("div",{className:"footer-copyright text-center py-1"},r.a.createElement("p",null,r.a.createElement("a",{href:"https://www.bemyaficionado.com"},"Made by ",r.a.createElement("strong",null,"Varun Shrivastava"))),r.a.createElement("p",null,r.a.createElement("strong",null,"TheRetroBoard\xa92021"))))},L=a(127),U=a(253),W=a(39),A=Object(d.f)((function(e){var t=C.getInstance().getLoggedInUser();return r.a.createElement(L.a,{bg:"light",expand:"lg"},r.a.createElement(m.b,{to:"/",className:"navbar-brand"},"Retro Board"),r.a.createElement(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(L.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(U.a,{className:"mr-auto"},r.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"),t.isEmailVerified?r.a.createElement(m.b,{className:"nav-link",to:"/teams"},"Teams"):r.a.createElement(r.a.Fragment,null)),r.a.createElement(W.a,{onClick:function(){localStorage.clear(),e.history.push("/login")},variant:"outline-primary"},r.a.createElement("i",{className:"fa fa-sign-out"}))))})),D=a(584),M=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isUserAuthenticated:!1,isLoading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;C.getInstance().isUserAuthenticated().then((function(t){e.setState({isUserAuthenticated:t,isLoading:!1})}))}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement(D.a,{animation:"border"}):this.state.isUserAuthenticated?r.a.createElement(R.a,{fluid:!0,className:"d-flex w-100 h-100 p-3 mx-auto flex-column"},r.a.createElement(A,null),this.props.children,r.a.createElement(_,null)):r.a.createElement(d.a,{to:{pathname:"/login",state:{referrer:this.props.location.pathname}}})}}]),a}(r.a.Component),F=Object(d.f)(M),V=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.location,t=e.pathname,a=e.search;return C.getInstance().getLoggedInUser()?t.includes("login")?r.a.createElement(d.a,{to:"/"}):r.a.createElement(d.a,{to:"".concat(t).concat(a)}):r.a.createElement(r.a.Fragment,null,this.props.children)}}]),a}(r.a.Component),J=Object(d.f)(V),P=a(31),H=a(232),Y=a(80),G=a(45),K=a(13),z={wentWell:{stickyNote:{backgroundColor:"#009688",textColor:"white",likeBtnPosition:"right"}},toImprove:{stickyNote:{backgroundColor:"#e91e63",textColor:"white",likeBtnPosition:"right"}},actionItems:{stickyNote:{backgroundColor:"#9c27b0",textColor:"white",likeBtnPosition:"right"}}},q=function(){function e(t,a,n){Object(s.a)(this,e),this.id=void 0,this.name=void 0,this.maxLikes=void 0,this.blur=void 0,this.userId=void 0,this.id=t,this.name=a,this.maxLikes=5,this.blur="off",this.userId=n}return Object(l.a)(e,null,[{key:"newInstance",value:function(t,a,n){return new e(t,a,n)}},{key:"toJSON",value:function(e){return JSON.stringify(e)}},{key:"fromJSON",value:function(e){return JSON.parse(e)}}]),e}(),X=function(){function e(t){Object(s.a)(this,e),this.retroBoardId="",this.walls=void 0,this.walls=t}return Object(l.a)(e,null,[{key:"toJSON",value:function(e){return JSON.stringify(e)}},{key:"fromJSON",value:function(e){return JSON.parse(e)}}]),e}(),Z=function(){function e(t){Object(s.a)(this,e),this._notes=void 0,this._notes=this._removeDuplicates(t)}return Object(l.a)(e,[{key:"notes",get:function(){return Object(G.a)(this._notes)}}]),Object(l.a)(e,[{key:"_removeDuplicates",value:function(e){var t=[];return e.forEach((function(e,a){-1===t.findIndex((function(t){return t.noteId===e.noteId}))&&t.push(e)})),t}}],[{key:"fromJSON",value:function(e){return JSON.parse(e)}},{key:"toJSON",value:function(e){return JSON.stringify(e)}}]),e}();!function(e){e[e.SORT=0]="SORT",e[e.GET_NOTES=1]="GET_NOTES",e[e.RETRIEVE_RETRO_BOARD=2]="RETRIEVE_RETRO_BOARD",e[e.UPDATE_NOTE=3]="UPDATE_NOTE",e[e.DELETE_NOTE=4]="DELETE_NOTE",e[e.CREATE_NOTE=5]="CREATE_NOTE",e[e.CREATE_RETRO_WALLS=6]="CREATE_RETRO_WALLS",e[e.CREATE_RETRO_BOARD=7]="CREATE_RETRO_BOARD",e[e.REFRESH_WALLS=8]="REFRESH_WALLS"}(B||(B={})),function(e){e[e.NONE=0]="NONE",e[e.SORT_BY_VOTES=1]="SORT_BY_VOTES",e[e.SORT_BY_TIMESTAMP=2]="SORT_BY_TIMESTAMP"}(I||(I={}));var Q={retroBoard:new q("","",""),retroWalls:new X([]),notes:new Z([])};function $(e){return new Z(e.notes.sort((function(e,t){var a=0,n=0;return e.likedBy&&(a=e.likedBy.length),t.likedBy&&(n=t.likedBy.length),0-(a>n?1:-1)})))}var ee=a(233),te=a(234),ae=a.n(te),ne=Object(H.createLogger)(),re=Object(Y.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.CREATE_RETRO_BOARD:return Object(K.a)(Object(K.a)({},e),{},{retroBoard:t.payload});case B.CREATE_RETRO_WALLS:return Object(K.a)(Object(K.a)({},e),{},{retroWalls:t.payload});case B.CREATE_NOTE:return Object(K.a)(Object(K.a)({},e),{},{notes:new Z([].concat(Object(G.a)(e.notes.notes),[t.payload]))});case B.UPDATE_NOTE:var a=e.notes.notes.map((function(e){return e.noteId===t.payload.noteId?Object.assign({},e,t.payload):e}));return Object(K.a)(Object(K.a)({},e),{},{notes:new Z(a)});case B.DELETE_NOTE:var n=[];return e.notes.notes.forEach((function(e){e.noteId!==t.payload.noteId&&n.push(e)})),Object(K.a)(Object(K.a)({},e),{},{notes:new Z(n)});case B.GET_NOTES:return console.log("Get Notes: ",t.payload),Object(K.a)(Object(K.a)({},e),{},{notes:t.payload});case B.SORT:switch(t.payload){case I.SORT_BY_VOTES:return Object(K.a)(Object(K.a)({},e),{},{notes:$(e.notes)});case I.SORT_BY_TIMESTAMP:return Object(K.a)({},e);default:return e}case B.REFRESH_WALLS:return Object(K.a)(Object(K.a)({},e),{},{retroWalls:t.payload,notes:new Z([])})}return Q}),Q,Object(ee.composeWithDevTools)(Object(Y.applyMiddleware)(ae.a,ne))),oe=a(64),ce=a(27),se=a(14),le=a(72),ie=function(e){var t=e.retroBoardService,a=Object(n.useState)([]),o=Object(se.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)(!1),i=Object(se.a)(l,2),u=i[0],d=i[1];Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMyBoards();case 2:a=e.sent,s(a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().catch((function(e){return console.log("User not logged In!",e)}))}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,null,u?r.a.createElement(D.a,{animation:"grow",variant:"danger",style:{position:"absolute",top:"50%",left:"50%"}}):r.a.createElement(r.a.Fragment,null),c.map((function(e,a){return r.a.createElement(ce.a,{lg:"4",key:a},r.a.createElement(le.a,null,r.a.createElement(le.a.Body,null,r.a.createElement("h4",null,e.name)),r.a.createElement(le.a.Footer,null,r.a.createElement(m.b,{to:"/retro-board/".concat(C.getInstance().getLoggedInUser().uid,"/").concat(e.id)},"URL"),r.a.createElement(W.a,{variant:"link",className:"pull-right",onClick:function(){return function(e){d(!0),t.deleteBoard(e).then((function(e){d(!1),s(c.filter((function(t){return t.id!==e})))})).catch((function(e){console.log("Error deleting board! ",e),d(!1)}))}(e)}},r.a.createElement("i",{className:"fa fa-trash-o fa-lg",style:{color:"red"}})))))}))))},ue=a(82),me=a(235),de=a(65),pe=(a(296),a(237)),fe=function(e){var t=Object(n.useState)(!1),a=Object(se.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(""),s=Object(se.a)(c,2),l=s[0],i=s[1],u=function(){e.onSubmit(l),o(!1)};return r?n.createElement(n.Fragment,null,n.createElement(de.a,{onSubmit:function(e){return function(e){e.preventDefault(),u()}(e)}},n.createElement(me.a,null,n.createElement(de.a.Control,{value:l,onBlur:u,onChange:function(e){return function(e){i(e.currentTarget.value)}(e)}})))):n.createElement(n.Fragment,null,n.createElement(pe.a,null,n.createElement("span",{style:{fontSize:"x-large",fontWeight:"bold",marginRight:"5px"}},e.title),n.createElement(W.a,{variant:"light",onClick:function(){return o(!0)}},n.createElement("i",{className:"fa fa-pencil-square-o"}))))},he=a(585),ve=a(126),be=a(238),Ee=function(e){var t=Object(n.useState)("#ffffff"),a=Object(se.a)(t,2),r=a[0],o=a[1];return n.createElement(n.Fragment,null,n.createElement(he.a,{id:"background_color_picker",title:e.title,variant:"light"},n.createElement(ve.a.Item,null,n.createElement(be.SwatchesPicker,{color:r,onChangeComplete:function(t){o(t),e.handleOnChangeComplete(t)}}))))},ge=a(22),ye=a(586),ke=a(236),Oe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={editorText:n.props.noteText?n.props.noteText:""},n.handleKeyboardKeyPress=function(e){"Escape"===e.key&&n.props.handleEnter(n.state.editorText.replace(/\n/g,"")),"Enter"===e.key&&(n.setState({editorText:""}),n.props.handleEnter(n.state.editorText.replace(/\n/g,"")))},n.handleChange=n.handleChange.bind(Object(ge.a)(n)),n}return Object(l.a)(a,[{key:"handleChange",value:function(e){var t=e.currentTarget.value;this.setState({editorText:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(ye.a,null,r.a.createElement(ke.a,{as:"textarea",autoFocus:!0,"data-testid":"editor_textarea",onKeyUp:this.handleKeyboardKeyPress,onChange:this.handleChange,value:this.state.editorText,"aria-label":"Note Editor",onBlur:function(){return e.props.handleEnter(e.state.editorText.replace(/\n/g,""))}}))}}]),a}(r.a.Component),we=a(242),xe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={users:n.props.likedBy},n.handleUpVote=n.handleUpVote.bind(Object(ge.a)(n)),n}return Object(l.a)(a,[{key:"handleUpVote",value:function(e){e.preventDefault();var t=this.getCurrentUser();t&&this.props.handleUpVote(t)}},{key:"getCurrentUser",value:function(){var e=localStorage.getItem(g.USER_INFO);if(e)return JSON.parse(e);console.log("Error: User is not logged in!")}},{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"like_btn",onClick:this.handleUpVote},r.a.createElement(we.a,{variant:"dark",style:{cursor:"pointer",margin:"0"}},r.a.createElement("span",{"data-testid":"total_votes"},this.props.likedBy.length)),r.a.createElement(le.a.Link,{style:{color:"white"},href:"#"},r.a.createElement("i",{"data-testid":"like_thumbs_up",style:{color:"darkgrey"},className:"fa fa-thumbs-up"})))}}]),a}(r.a.Component),je=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"createRetroBoard",value:function(e){return{type:B.CREATE_RETRO_BOARD,payload:e}}},{key:"createRetroWalls",value:function(e){return{type:B.CREATE_RETRO_WALLS,payload:e}}},{key:"createNote",value:function(e){return{type:B.CREATE_NOTE,payload:e}}},{key:"updateNote",value:function(e){return{type:B.UPDATE_NOTE,payload:e}}},{key:"deleteNote",value:function(e){return{type:B.DELETE_NOTE,payload:e}}},{key:"getNotes",value:function(e){return{type:B.GET_NOTES,payload:e}}},{key:"sortByVotes",value:function(){return{type:B.SORT,payload:I.SORT_BY_VOTES}}},{key:"sortByTimestamp",value:function(){return{type:B.SORT,payload:I.SORT_BY_TIMESTAMP}}},{key:"refreshRetroWalls",value:function(){return{type:B.REFRESH_WALLS,payload:new X([])}}}]),e}(),Te=a(159),Se=a(243),Ne=a.n(Se),Be=a(244),Ie=a.n(Be),Ce=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"connect",value:function(){if(!this.isConnected()&&(e.socket=new Ne.a("".concat(j,"/retro-websocket")),e.stomp=Ie.a.over(e.socket),!this.isConnected())){var t=localStorage.getItem(g.ID_TOKEN);e.stomp.connect({Authorization:"Bearer "+t},(function(e){console.log("Connected!")}),(function(e){console.log("Connection lost!!! Reload the page...",e)}))}}},{key:"isConnected",value:function(){return e.socket&&e.stomp&&e.stomp.connected}},{key:"subscribe",value:function(t,a){console.log("trying subscribing to topic..."),e.stomp||this.connect();var n=setInterval((function(){e.stomp.connected&&(window.clearInterval(n),e.stomp.subscribe(t,(function(e){a(e)})))}),1e3)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance.isConnected()||e.instance.connect(),e.instance}}]),e}();Ce.instance=void 0,Ce.socket=void 0,Ce.stomp=void 0;var Re=Ce,_e=function e(t,a,n){Object(s.a)(this,e),this.status=void 0,this.message=void 0,this.name=void 0,this.name=t,this.status=n,this.message=a},Le=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"addNewNote",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.post("/retro-board/walls/notes",t);case 2:if(201!==e.sent.status){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("Error creating note in the backend!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createNewRetroBoard",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n,r,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,n=t.maxLikes,e.next=3,C.getInstance().isUserAuthenticated();case 3:if(e.sent){e.next=6;break}throw Error("Authentication Exception! User is not logged in.");case 6:return e.next=8,T.post("/retro-board",{name:a,maxLikes:n});case 8:if(201!==(r=e.sent).status){e.next=19;break}return console.log(r),console.log(r.headers.location),e.next=14,T.get(r.headers.location);case 14:return o=e.sent,e.next=17,o.data;case 17:return c=e.sent,e.abrupt("return",c);case 19:throw Error("Error creating RetroBoard in the backend!");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createRetroWalls",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.get("/retro-board/walls/".concat(t));case 3:if(200!==(n=e.sent).status){e.next=8;break}return e.next=7,n.data;case 7:return e.abrupt("return",e.sent);case 8:e.next=24;break;case 10:return e.prev=10,e.t0=e.catch(0),console.log("Creating Retro Walls!"),a.retroBoardId=t,e.next=16,T.post("/retro-board/walls",a);case 16:if(201!==(r=e.sent).status){e.next=24;break}return e.next=20,T.get(r.headers.location);case 20:return o=e.sent,e.next=23,o.data;case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteBoard",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.delete("/retro-board/".concat(t.id));case 2:if(204!==e.sent.status){e.next=5;break}return e.abrupt("return",t.id);case 5:throw Error("Error deleting retro board in the backend!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteNote",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.delete("/retro-board/walls/notes",{params:{noteId:t.noteId,retroBoardId:t.retroBoardId}});case 2:if(204!==e.sent.status){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("Error deleting note at the backend!");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDataOnUpdate",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Re.getInstance().subscribe("/topic/notes/".concat(t),function(){var e=Object(h.a)(f.a.mark((function e(r){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/retro-board/walls/notes",{params:{retroBoardId:t,wallId:a}});case 2:return o=e.sent,e.t0=n,e.next=6,o.data;case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,T.get("/retro-board/walls/notes",{params:{retroBoardId:t,wallId:a}});case 4:return r=e.sent,e.t0=n,e.next=8,r.data;case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getMyBoards",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.getInstance().isUserAuthenticated();case 2:if(t=e.sent,console.log("IsUserAuthenticated: "+t),!t){e.next=12;break}return e.next=7,T.get("/retro-board");case 7:if(200!==(a=e.sent).status){e.next=12;break}return e.next=11,a.data;case 11:return e.abrupt("return",e.sent);case 12:throw Error("Error encountered while fetching boards for the user");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getNoteWhenLiked",value:function(e,t){return Promise.resolve()}},{key:"getNotes",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/retro-board/walls/notes/".concat(t));case 2:if(200!==(n=e.sent).status){e.next=8;break}return e.next=6,n.data;case 6:return r=e.sent,e.abrupt("return",r);case 8:throw Error("Encountered Error while trying to fetch notes for ".concat(t," > ").concat(a));case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getRetroBoardById",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/retro-board/".concat(a));case 2:if(200!==(n=e.sent).status){e.next=10;break}return e.next=6,n.data;case 6:return r=e.sent,e.abrupt("return",r);case 10:if(401!==n.status){e.next=12;break}throw new _e("Unauthorized","User is not authorized to view the contents of this board.",401);case 12:throw Error("Error encountered while fetching retro board from the server");case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getRetroBoardDataOnUpdate",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new Re).subscribe("/topic/retro-board/".concat(a),function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("URI : ",t),e.next=3,T.get(t.body);case 3:if(200!==(a=e.sent).status){e.next=10;break}return e.t0=n,e.next=8,a.data;case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getRetroWalls",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/retro-board/walls/".concat(t));case 2:if(200!==(a=e.sent).status){e.next=8;break}return e.next=6,a.data;case 6:return n=e.sent,e.abrupt("return",n);case 8:throw Error("Error encountered while fetching retro walls for retro board (".concat(t,")"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"sortByVotes",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.notes.sort((function(e,t){return e.likedBy.length-t.likedBy.length})),e.abrupt("return",new Z(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateNote",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.put("/retro-board/walls/notes",t);case 2:if(204!==e.sent.status){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("Error encountered while updating note in the backend.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateRetroBoard",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.put("/retro-board",t);case 2:if(204!==e.sent.status){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("Error encountered while updating note in the backend.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"shareBoard",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.post("/share",{itemId:t,teamIds:a.map((function(e){return e.teamId}))});case 2:if(201!==e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return this.retroBoardService||(this.retroBoardService=new e),this.retroBoardService}}]),e}();Le.retroBoardService=void 0;var Ue=Le,We=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,null,[{key:"getInstance",value:function(){return Ue.getInstance()}}]),e}(),Ae=a(158),De=a.n(Ae),Me=(a(573),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={showToast:!1,toastMessage:"",stickyNoteId:n.props.note.noteId,showEditor:!1,noteText:n.props.note.noteText,likedBy:n.props.note.likedBy},n.handleOnClick=n.handleOnClick.bind(Object(ge.a)(n)),n.modifyStickyNote=n.modifyStickyNote.bind(Object(ge.a)(n)),n.handleUpVote=n.handleUpVote.bind(Object(ge.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.note;this.props.retroBoardService.getNoteWhenLiked(t,(function(t){t&&e.props.updateNote(t)}))}},{key:"handleOnClick",value:function(){if(console.log("Condition: ",this.props.note.createdBy.includes(C.getInstance().getLoggedInUser().uid)),console.log("".concat(this.props.note.createdBy," === ").concat(C.getInstance().getLoggedInUser().uid)),this.props.note.createdBy.includes(C.getInstance().getLoggedInUser().uid)){var e=this.state.noteText;this.setState({showEditor:!0,noteText:e})}}},{key:"modifyStickyNote",value:function(e){this.setState({showEditor:!1,noteText:e.noteText}),this.props.updateNote(e)}},{key:"_getTotalLikesForUser",value:function(e){var t=0;return this.props.notes.notes.forEach((function(a){a.likedBy&&a.likedBy.some((function(t){return t.uid===e.uid}))&&t++})),t}},{key:"handleUpVote",value:function(e){var t,a=this,n=(null===(t=this.props.note)||void 0===t?void 0:t.likedBy)||[],r=n.filter((function(t){return t.email===e.email})).length>0,o=this._getTotalLikesForUser(e),c=this.props.retroBoard.maxLikes;if(!r&&o<c){n.push(e),this.setState({likedBy:n});var s=this.props.note;s.likedBy=n,this.props.updateNote(s).then((function(){a.props.sortBy===I.SORT_BY_VOTES&&a.props.sortByVotes()}))}else this.setState({showToast:!0,toastMessage:"Like Count Limit Reached"}),setTimeout((function(){a.setState({showToast:!1})}),2e3)}},{key:"_mergeNoteIfRequired",value:function(e){var t="on"!==this.props.retroBoard.blur||e.createdBy.includes(C.getInstance().getLoggedInUser().uid)?"blur(0px)":"blur(3px)",a=r.a.createElement("div",{className:"card-text",style:{width:"95%",filter:t}},r.a.createElement(De.a,{source:e.noteText,escapeHtml:!0}));if(e.noteText.includes("  ")){var n=e.noteText.split("  ").map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(De.a,{source:e,escapeHtml:!0}),r.a.createElement("hr",null))}));a=r.a.createElement("div",{className:"card-text",style:{width:"95%",filter:t}},n)}return a}},{key:"render",value:function(){var e,t,a=this,n=this.props.note,o=this._mergeNoteIfRequired(n);return r.a.createElement(le.a,{className:"sticky-note z-depth-5",style:{backgroundColor:(null===(e=n.style)||void 0===e?void 0:e.backgroundColor)||"white"}},r.a.createElement(le.a.Body,{"data-testid":"card_body",style:{padding:"5px",fontFamily:"sans-serif",fontWeight:500,minHeight:"50px"},onClick:this.handleOnClick},r.a.createElement("div",{"data-testid":"editor",style:{color:(null===(t=n.style)||void 0===t?void 0:t.textColor)||"black"}},this.state.showEditor?r.a.createElement(Oe,{noteText:n.noteText,handleEnter:function(e){return a.modifyStickyNote(Object(K.a)(Object(K.a)({},n),{},{noteText:e}))}}):o)),r.a.createElement("ul",{className:"list-inline pull-right",style:{position:"absolute",right:"5px",bottom:"0px"}},r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(xe,{key:"like_note.noteId",handleUpVote:this.handleUpVote,likedBy:n.likedBy||[],stickyNoteId:n.noteId})),r.a.createElement("li",{className:"list-inline-item"},r.a.createElement(we.a,{"data-testid":"delete_badge_".concat(n.noteId),variant:"danger",style:{cursor:"pointer",padding:"2px",margin:"0"},onClick:function(){return a.props.deleteNote(n)}},r.a.createElement("i",{className:"fa fa-trash-o"})))),r.a.createElement(Te.a,{"data-testid":"toast",show:this.state.showToast,style:{position:"absolute",left:"50%"}},r.a.createElement(Te.a.Body,null,this.state.toastMessage)))}}]),a}(r.a.Component)),Fe=Object(P.b)((function(e){return{retroBoard:e.retroBoard,retroWalls:e.retroWalls,notes:e.notes}}),(function(e){var t=We.getInstance(),a=new je;return{updateNote:function(){var n=Object(h.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.t1=a,n.next=4,t.updateNote(r);case 4:return n.t2=n.sent,n.t3=n.t1.updateNote.call(n.t1,n.t2),n.abrupt("return",(0,n.t0)(n.t3));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),deleteNote:function(){var n=Object(h.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.t1=a,n.next=4,t.deleteNote(r);case 4:return n.t2=n.sent,n.t3=n.t1.deleteNote.call(n.t1,n.t2),n.abrupt("return",(0,n.t0)(n.t3));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),sortByVotes:function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(a.sortByVotes()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}))(Me),Ve=function(){function e(t,a,n,r){Object(s.a)(this,e),this.retroBoardId=void 0,this.wallId=void 0,this.noteId=void 0,this.noteText=void 0,this.style=void 0,this.likedBy=void 0,this.createdBy=void 0,this.retroBoardId=t,this.wallId=a,this.noteId=String(Date.now()),this.noteText=n,this.style=r,this.likedBy=[],this.createdBy=""}return Object(l.a)(e,null,[{key:"toJSON",value:function(e){return JSON.stringify(e)}},{key:"fromJSON",value:function(e){return JSON.parse(e)}}]),e}(),Je=function(e){var t=e.boardTemplate,a=e.removeWall;return n.createElement(n.Fragment,null,n.createElement(oe.a,null,t.walls.map((function(e,t){var r;return n.createElement(ce.a,{key:t,className:"justify-content-center text-center"},n.createElement("h6",null,e.wallTitle," ",n.createElement(W.a,{onClick:function(){return a(t)},variant:"link"},n.createElement("i",{className:"fa fa-times"}))),(null===e||void 0===e||null===(r=e.notes)||void 0===r?void 0:r.length)>0?e.notes.map((function(e,t){return n.createElement(Fe,{key:t,note:new Ve("","",e.noteText,e.noteStyle),sortBy:I.NONE,retroBoardService:We.getInstance()})})):n.createElement(Fe,{key:t,note:new Ve("","","Foo Bar",e.wallStyle.stickyNote),sortBy:I.NONE,retroBoardService:We.getInstance()}))}))))},Pe=function(e){var t,a=Object(n.useState)(!1),r=Object(se.a)(a,2),o=r[0],c=r[1],s=function(){return c(!1)},l=Object(n.useState)({templateTitle:"Template Title",walls:[],templateId:"",userId:null===(t=C.getInstance().getLoggedInUser())||void 0===t?void 0:t.uid}),i=Object(se.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(se.a)(d,2),f=p[0],h=p[1],v=Object(n.useState)("#ffffff"),b=Object(se.a)(v,2),E=b[0],g=b[1],y=Object(n.useState)(z.wentWell.stickyNote.backgroundColor),k=Object(se.a)(y,2),O=k[0],w=k[1];return n.createElement(n.Fragment,null,n.createElement(W.a,{variant:"light",onClick:function(){return c(!0)},style:{padding:"25px",border:"2px dashed"}},n.createElement("i",{className:"fa fa-plus fa-lg"})),n.createElement(ue.a,{show:o,onHide:s,dialogClassName:"custom-modal"},n.createElement(ue.a.Header,null,n.createElement(fe,{onSubmit:function(e){return t=e,void m(Object(K.a)(Object(K.a)({},u),{},{templateTitle:t}));var t},title:u.templateTitle})),n.createElement(ue.a.Body,null,n.createElement(oe.a,null,n.createElement(me.a,null,n.createElement(oe.a,null,n.createElement(de.a,{inline:!0,onSubmit:function(e){return e.preventDefault()}},n.createElement(ce.a,null,n.createElement(de.a.Control,{placeholder:"Wall Title",onChange:function(e){return function(e){return h(e.currentTarget.value)}(e)},value:f,style:{padding:"20px",marginLeft:"5px"}})),n.createElement(ce.a,{style:{backgroundColor:E}},n.createElement(Ee,{title:"Text Color",handleOnChangeComplete:function(e){return g(e.hex)}})),n.createElement(ce.a,{style:{backgroundColor:O}},n.createElement(Ee,{title:"Background Color",handleOnChangeComplete:function(e){return w(e.hex)}})),n.createElement(ce.a,null,n.createElement(W.a,{onClick:function(){var e={wallTitle:f,wallStyle:{stickyNote:{backgroundColor:O,textColor:E,likeBtnPosition:"right"}},wallOrder:1,notes:[{noteText:"Lorem Epsum Dolor Sit amet",noteStyle:{backgroundColor:O,textColor:E,likeBtnPosition:"right"}}]};m(Object(K.a)(Object(K.a)({},u),{},{walls:[].concat(Object(G.a)(u.walls),[e])})),h("")},disabled:""===f},"Add Wall"))),n.createElement("hr",null)))),n.createElement("div",{style:{border:"1px solid",padding:"20px",margin:"1px solid"}},n.createElement(Je,{boardTemplate:u,removeWall:function(e){m(Object(K.a)(Object(K.a)({},u),{},{walls:[].concat(Object(G.a)(u.walls.slice(0,e)),Object(G.a)(u.walls.slice(e+1)))}))}}))),n.createElement(ue.a.Footer,null,n.createElement(W.a,{variant:"success",disabled:0===u.walls.length,onClick:function(){var t=Object(K.a)(Object(K.a)({},u),{},{walls:u.walls.map((function(e,t){return Object(K.a)(Object(K.a)({},e),{},{wallOrder:t})}))});e.onCreateTemplate(t),s()}},"Create Template"),n.createElement(W.a,{variant:"light",onClick:s},"Cancel"))))},He=a(122),Ye=function(e){var t=e.onCreateRetroBoard,a=e.title,o=Object(n.useState)(!1),c=Object(se.a)(o,2),s=c[0],l=c[1],i=Object(n.useState)({title:"",maxLikes:5}),u=Object(se.a)(i,2),m=u[0],d=u[1],p=function(){return l(!1)},v=function(e){return function(t){var a=t.currentTarget.value;d(Object(K.a)(Object(K.a)({},m),{},Object(He.a)({},e,a)))}},b=function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(m),p();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{variant:"outline-primary",onClick:function(){return l(!0)}},a),r.a.createElement(ue.a,{show:s,onHide:p},r.a.createElement(ue.a.Header,{closeButton:!0},r.a.createElement(ue.a.Title,null,a)),r.a.createElement(ue.a.Body,null,r.a.createElement(de.a,null,r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Dashboard Title"),r.a.createElement(de.a.Control,{name:"title",type:"text",placeholder:"e.g. Spring 400 ",value:m.title,autoComplete:"false",onChange:v("title")})),r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Max Likes"),r.a.createElement(de.a.Control,{name:"maxLikes",type:"number",placeholder:"e.g. 5 or 6 ",onChange:v("maxLikes"),autoComplete:"false",value:String(m.maxLikes)})))),r.a.createElement(ue.a.Footer,null,r.a.createElement(W.a,{variant:"secondary",onClick:p},"Close"),r.a.createElement(W.a,{variant:"primary",onClick:b},"Save Changes"))))},Ge=function(){function e(t,a,n){Object(s.a)(this,e),this.retroBoardId=void 0,this.wallId=void 0,this.title=void 0,this.style=void 0,this.sortCards=void 0,this.wallOrder=1,this.retroBoardId=t,this.wallId=a.replace(/\s/g,""),this.title=a,this.style=n,this.sortCards=!1}return Object(l.a)(e,[{key:"setWallOrder",value:function(e){return this.wallOrder=e,this}}],[{key:"newInstance",value:function(t,a,n){return new e(t,a,n)}}]),e}(),Ke=Object(d.f)((function(e){var t=Object(P.c)(),a=function(){var a=Object(h.a)(f.a.mark((function a(n){var r,o,c;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=new je,a.next=3,e.retroBoardService.createNewRetroBoard(n);case 3:return o=a.sent,t(r.createRetroBoard(o)),console.log("Template Walls -> ",e.templateWalls),a.next=8,e.retroBoardService.createRetroWalls(o.id,new X(e.templateWalls.map((function(e,t){return Ge.newInstance(o.id,e.wallTitle,e.wallStyle).setWallOrder(e.wallOrder)}))));case 8:c=a.sent,e.history.push({pathname:"/retro-board/".concat(o.userId,"/").concat(o.id),state:{walls:new X(c)}});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement(Ye,{title:e.title,onCreateRetroBoard:a}))})),ze=Object(d.f)((function(e){var t=Object(n.useState)([]),a=Object(se.a)(t,2),r=a[0],o=a[1],c=function(){var t=Object(h.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.templateService.createBoardTemplate(a);case 2:n=t.sent,o([].concat(Object(G.a)(r),[n]));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.templateService.deleteBoardTemplate(a);case 2:o(r.filter((function(e){return e.templateId!==a.templateId})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.useEffect)((function(){e.templateService.getBoardTemplates().then((function(e){o(e.templates)}))}),[e.templateService]),n.createElement(n.Fragment,null,n.createElement(oe.a,null,n.createElement(ce.a,{md:1},n.createElement(Pe,{onCreateTemplate:c})),r.map((function(t,a){return n.createElement(ce.a,{key:a,md:3},n.createElement(le.a,null,n.createElement(le.a.Body,null,n.createElement("div",{key:a},n.createElement(le.a.Title,null,t.templateTitle),n.createElement(Je,{boardTemplate:t,removeWall:function(e){return console.log("Test Button Clicked!")}}))),n.createElement(le.a.Footer,null,n.createElement(Ke,{title:"Create Board",retroBoardService:e.retroBoardService,templateWalls:t.walls}),n.createElement(W.a,{className:"pull-right",variant:"light",onClick:function(){return s(t)}},n.createElement("i",{className:"fa fa-trash-o fa-lg",style:{color:"red"}})))))}))))})),qe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.title="Home"}},{key:"render",value:function(){return r.a.createElement(R.a,null,r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,r.a.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},r.a.createElement("h3",null,"Pre-built Templates")),r.a.createElement(Ke,{title:"Create Retro Board",retroBoardService:this.props.retroBoardService,templateWalls:[{wallTitle:"Went Well",wallStyle:z.wentWell,wallOrder:1,notes:[]},{wallTitle:"To Improve",wallStyle:z.toImprove,wallOrder:2,notes:[]},{wallTitle:"Action Items",wallStyle:z.actionItems,wallOrder:3,notes:[]}]}))),r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,r.a.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},r.a.createElement("h3",null,"My Templates")),r.a.createElement(ze,{retroBoardService:this.props.retroBoardService,templateService:this.props.templateService}))),r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,r.a.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},r.a.createElement("h3",null,"My Boards")),r.a.createElement(ie,{retroBoardService:this.props.retroBoardService}))))}}]),a}(r.a.Component),Xe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={showEditor:!1},n.showEditor=n.showEditor.bind(Object(ge.a)(n)),n.handleEnter=n.handleEnter.bind(Object(ge.a)(n)),n}return Object(l.a)(a,[{key:"showEditor",value:function(){this.setState({showEditor:!0})}},{key:"handleEnter",value:function(e){""!==e&&(this.props.addNote(e),this.setState({showEditor:!1}))}},{key:"render",value:function(){return this.state.showEditor?r.a.createElement("div",{style:{margin:"5px"}},r.a.createElement(Oe,{handleEnter:this.handleEnter})):r.a.createElement("div",{style:{margin:"5px"}},r.a.createElement(W.a,{title:"Add new note","data-testid":"add_new_note_btn",variant:"dark",onClick:this.showEditor},r.a.createElement("i",{className:"fa fa-lg fa-plus"})))}}]),a}(r.a.Component),Ze=a(246),Qe=a(587),$e=a(591),et=function(e){var t=Object(n.useState)(!1),a=Object(se.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(0),s=Object(se.a)(c,2),l=s[0],i=s[1];return n.createElement(n.Fragment,null,n.createElement("div",{style:{margin:"5px"}},n.createElement(W.a,{title:"Retrospect",variant:"link",onClick:function(){return o(!0)}},n.createElement("i",{className:"fa fa-lg fa-eye"}))),n.createElement(n.Fragment,null,n.createElement(ue.a,{show:r,onHide:function(){return o(!1)},style:{backgroundColor:"black"}},n.createElement(ue.a.Body,{style:{backgroundColor:e.style.backgroundColor}},n.createElement($e.a,{activeIndex:l,onSelect:function(e){return i(e)},interval:null},e.items.map((function(t,a){return n.createElement($e.a.Item,{key:a},n.createElement("div",{style:{height:"400px"}},n.createElement($e.a.Caption,{style:{color:e.style.textColor}},n.createElement("div",{style:{height:"200px",overflowY:"scroll"}},n.createElement("h3",{style:{overflowY:"scroll"}},function(e){return e.includes("<MERGE_NOTE>")?e.split("<MERGE_NOTE>").map((function(e,t){return n.createElement("span",{key:t},e,n.createElement("br",null),n.createElement("hr",{style:{borderTop:"1px dashed"}}))})):n.createElement("span",null,e)}(t))))))})))))))},tt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).retroWall=void 0,n.state={notes:[]},n.addNote=n.addNote.bind(Object(ge.a)(n)),n.retroWall=e.retroWall,n.handleDragStart=n.handleDragStart.bind(Object(ge.a)(n)),n.handleDrop=n.handleDrop.bind(Object(ge.a)(n)),n.handleDragOver=n.handleDragOver.bind(Object(ge.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getNotes(this.retroWall.retroBoardId,this.retroWall.wallId),this.props.retroBoardService.getDataOnUpdate(this.retroWall.retroBoardId,this.retroWall.wallId,(function(){console.log("Data Changed!"),e.props.getNotes(e.retroWall.retroBoardId,e.retroWall.wallId)}))}},{key:"addNote",value:function(e){var t,a,n,r,o,c,s=this,l=new Ve(this.retroWall.retroBoardId,this.retroWall.wallId,e,{backgroundColor:(null===(t=this.retroWall.style)||void 0===t||null===(a=t.stickyNote)||void 0===a?void 0:a.backgroundColor)||"white",textColor:(null===(n=this.retroWall.style)||void 0===n||null===(r=n.stickyNote)||void 0===r?void 0:r.textColor)||"black",likeBtnPosition:(null===(o=this.retroWall.style)||void 0===o||null===(c=o.stickyNote)||void 0===c?void 0:c.likeBtnPosition)||"right"});l.createdBy=C.getInstance().getLoggedInUser().email,this.props.addNewNote(l).then((function(){s.props.sortByVotes()}))}},{key:"handleDrop",value:function(e,t){var a=this,n=JSON.parse(e.dataTransfer.getData("text/plain"));n.noteId!==t.noteId&&(t.noteText+="  "+n.noteText,this.props.updateNote(Object(K.a)({},t)).then((function(){a.props.deleteNote(n)})))}},{key:"handleDragOver",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}},{key:"handleDragStart",value:function(e,t){e.dataTransfer.setData("text/plain",JSON.stringify(t))}},{key:"render",value:function(){var e,t,a=this,n=this.props.notes.filter((function(e){return e.wallId===a.retroWall.wallId})),o=n.map((function(e,t){return r.a.createElement(Ze.a,{key:t,style:{padding:"0px",border:"none",marginBottom:"2px"},className:"text-left",id:"list_group_item_".concat(t),draggable:!0,onDragStart:function(t){return a.handleDragStart(t,e)},onDragOver:a.handleDragOver,onDrop:function(t){return a.handleDrop(t,e)}},r.a.createElement(Fe,{key:e.noteId,note:e,retroBoardService:a.props.retroBoardService,sortBy:a.props.sortBy}))}));return r.a.createElement("section",{className:"sticky-wall text-center"},r.a.createElement("h3",null,this.retroWall.title," "),r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,r.a.createElement(et,{items:n.map((function(e){return e.noteText})),style:{textColor:null===(e=n[0])||void 0===e?void 0:e.style.textColor,backgroundColor:null===(t=n[0])||void 0===t?void 0:t.style.backgroundColor}}))),r.a.createElement(Xe,{addNote:this.addNote}),r.a.createElement(Qe.a,null,o))}}]),a}(n.Component),at=Object(P.b)(null,(function(e){var t=We.getInstance(),a=new je;return{addNewNote:function(){var n=Object(h.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.t1=a,n.next=4,t.addNewNote(r);case 4:return n.t2=n.sent,n.t3=n.t1.createNote.call(n.t1,n.t2),n.abrupt("return",(0,n.t0)(n.t3));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),updateNote:function(){var n=Object(h.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.t1=a,n.next=4,t.updateNote(r);case 4:return n.t2=n.sent,n.t3=n.t1.updateNote.call(n.t1,n.t2),n.abrupt("return",(0,n.t0)(n.t3));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),deleteNote:function(){var n=Object(h.a)(f.a.mark((function n(r){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.t1=a,n.next=4,t.deleteNote(r);case 4:return n.t2=n.sent,n.t3=n.t1.deleteNote.call(n.t1,n.t2),n.abrupt("return",(0,n.t0)(n.t3));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),getNotes:function(){var n=Object(h.a)(f.a.mark((function n(r,o){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.t1=a,n.next=4,t.getNotes(r,o);case 4:return n.t2=n.sent,n.t3=n.t1.getNotes.call(n.t1,n.t2),n.abrupt("return",(0,n.t0)(n.t3));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),sortByVotes:function(){var t=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(a.sortByVotes()));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}}))(tt),nt=a(247),rt=a(588),ot=a(589),ct=function(e){var t=e.teams?e.teams:[],a=Object(n.useState)(!1),r=Object(se.a)(a,2),o=r[0],c=r[1],s=function(){return c(!1)},l=Object(n.useState)(!1),i=Object(se.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)([]),p=Object(se.a)(d,2),v=p[0],b=p[1],E=Object(n.useState)(void 0),g=Object(se.a)(E,2),y=g[0],k=g[1],O=function(){var t=Object(h.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m(!0),t.next=3,e.shareWith(v);case 3:a=t.sent,k(!0===a?n.createElement(rt.a,{variant:"success"},n.createElement("i",{className:"fa fa-check",style:{color:"green"}}),"Page is now shared with the selected teams."):n.createElement(rt.a,{variant:"danger"},"Cannot share the page. Contact admin.")),m(!1);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return n.createElement(n.Fragment,null,n.createElement(W.a,{style:{border:"1px solid black"},variant:"light",onClick:function(){return c(!0)}},n.createElement("i",{className:"fa fa-share-alt"})),n.createElement(ue.a,{show:o,onHide:s},n.createElement(ue.a.Body,null,n.createElement(de.a,{onSubmit:O},n.createElement(me.a,null,n.createElement(de.a.Label,null,n.createElement("h3",null,"Share with:")),n.createElement(de.a.Control,{as:"select",multiple:!0,onChange:function(t){return function(t){for(var a=t.currentTarget.selectedOptions,n=[],r=function(t){n.push(e.teams.find((function(e){return e.teamId===a[t].value})))},o=0;o<a.length;o++)r(o);b(n)}(t)}},n.createElement("option",{disabled:!0},"Select teams to share"),t.map((function(e,t){return n.createElement("option",{key:t,value:e.teamId},e.teamName)})))),n.createElement(me.a,null,n.createElement(W.a,{type:"submit",variant:"success"},"Share"),n.createElement(W.a,{onClick:s,variant:"light"},"Cancel")))),u?n.createElement(ue.a.Footer,null,u?n.createElement(n.Fragment,null,n.createElement(ot.a,{animated:!0}),y):n.createElement(n.Fragment,null,y)):n.createElement(n.Fragment,null,y)))},st=function(){var e=new je,t=Object(P.c)(),a=Object(n.useState)(I.NONE),o=Object(se.a)(a,2),c=o[0],s=o[1];return r.a.createElement(de.a,null,r.a.createElement(de.a.Group,null,r.a.createElement(de.a.Label,null,"Sort cards: "),r.a.createElement(ke.a,{as:"select",onChange:function(a){a.target.value===String(I.SORT_BY_VOTES)&&(t(e.sortByVotes()),s(I.SORT_BY_VOTES))},"data-testid":"sort_select",value:String(c)},r.a.createElement("option",{defaultValue:String(I.NONE)},"select..."),r.a.createElement("option",{defaultValue:String(I.SORT_BY_VOTES),value:I.SORT_BY_VOTES},"Sort by Up-votes"))))},lt=function(e){var t=(0,P.d)((function(e){return e})),a=new je,n=Object(P.c)();if(e.retroBoard.userId!==C.getInstance().getLoggedInUser().uid)return r.a.createElement(r.a.Fragment,null);var o=function(){var r=Object(h.a)(f.a.mark((function r(o){var c;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Value: ",o),(c=Object(K.a)({},t.retroBoard)).blur=o,r.t0=n,r.t1=a,r.next=7,e.retroBoardService.updateRetroBoard(c);case 7:r.t2=r.sent,r.t3=r.t1.createRetroBoard.call(r.t1,r.t2),(0,r.t0)(r.t3);case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),c="on"===e.retroBoard.blur;return r.a.createElement(ye.a,{className:"pull-right"},r.a.createElement(de.a.Check,{checked:c,type:"switch",id:"switch_on",label:"Blur On",onChange:function(){return o(c?"off":"on")}}))},it=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={retroBoardId:"",retroBoardTitle:"",sortSelectValue:I.NONE,teams:[],retroWalls:new X([])},n.convertJsonToCsv=n.convertJsonToCsv.bind(Object(ge.a)(n)),n.shareBoardWith=n.shareBoardWith.bind(Object(ge.a)(n)),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.retroBoardId,a=e.uid;localStorage.setItem("retroBoardId",t),t&&a&&this.initRetroBoard(t,a)}},{key:"initRetroBoard",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.retroBoardService.getRetroBoardById(a,t);case 3:return n=e.sent,document.title=n.name,r=this.props.teamsService.getMyTeams(),e.next=8,this.props.retroBoardService.getRetroBoardDataOnUpdate(a,t,(function(e){console.log("RetroBoard: ",e)}));case 8:return e.next=10,this.props.createRetroBoard(n);case 10:return e.next=12,this.props.retroBoardService.getRetroWalls(t);case 12:return o=e.sent,e.t0=this,e.t1=t,e.t2=n.name,e.next=18,r;case 18:e.t3=e.sent,e.t4=o,e.t5={retroBoardId:e.t1,retroBoardTitle:e.t2,teams:e.t3,retroWalls:e.t4},e.t0.setState.call(e.t0,e.t5),e.next=27;break;case 24:e.prev=24,e.t6=e.catch(0),e.t6 instanceof _e&&this.props.history.push("/unauthorized");case 27:case"end":return e.stop()}}),e,this,[[0,24]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"convertJsonToCsv",value:function(){var e=[],t=this.props,a=t.notes;return t.retroWalls.walls.forEach((function(t){a.notes.forEach((function(a){var n;a.wallId===t.wallId&&e.push({wallName:t.title,noteText:a.noteText,upvotes:(null===(n=a.likedBy)||void 0===n?void 0:n.length)||0})}))})),{data:e,headers:[{label:"Wall Name",key:"wallName"},{label:"Note",key:"noteText"},{label:"Up-votes",key:"upvotes"}]}}},{key:"shareBoardWith",value:function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.retroBoardService.shareBoard(this.state.retroBoardId,t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.match.params.retroBoardId,a=this.state.retroWalls.walls.map((function(a,n){return a.retroBoardId=t,r.a.createElement(ce.a,{key:n},r.a.createElement(at,{retroBoardService:e.props.retroBoardService,retroWall:a,notes:e.props.notes.notes,sortBy:e.state.sortSelectValue}))}));return r.a.createElement("div",{style:{padding:"50px"}},r.a.createElement(oe.a,null,r.a.createElement("h2",{style:{borderBottom:"2px solid black"}},this.state.retroBoardTitle)),r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,r.a.createElement(st,null)),r.a.createElement(ce.a,{className:"align-self-center"},r.a.createElement(lt,this.props)),r.a.createElement(ce.a,{className:"align-self-center"},r.a.createElement("div",{className:"pull-right"},r.a.createElement(ct,{teams:this.state.teams,shareWith:this.shareBoardWith})),r.a.createElement(W.a,{className:"pull-right",style:{border:"1px solid black"},variant:"light"},r.a.createElement(nt.CSVLink,Object.assign({},this.convertJsonToCsv(),{target:"_blank",filename:this.props.retroBoard.name}),r.a.createElement("i",{className:"fa fa-file-excel-o",style:{color:"blue"}}))))),r.a.createElement(oe.a,null,a))}}]),a}(r.a.Component);var ut=Object(P.b)((function(e){return{retroBoard:e.retroBoard,retroWalls:e.retroWalls,notes:e.notes}}),(function(e){var t=new je;return{createRetroWalls:function(){var a=Object(h.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e(t.createRetroWalls(n)));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),createRetroBoard:function(){var a=Object(h.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e(t.createRetroBoard(n)));case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),refreshRetroWalls:function(){var a=Object(h.a)(f.a.mark((function a(){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",e(t.refreshRetroWalls()));case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()}}))(it),mt=a(248),dt=a.n(mt),pt=a(249),ft=a.n(pt),ht=a(250),vt=a.n(ht),bt=a(251),Et=a.n(bt),gt=a(252),yt=a.n(gt),kt=a(590),Ot=(a(577),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={firebase:C.getInstance(),idToken:""},n.getReferrerUrl=function(){return n.props.location.state?n.props.location.state.referrer:"/"},n.tryGoogleLogin=n.tryGoogleLogin.bind(Object(ge.a)(n)),n.tryAnonymousLogin=n.tryAnonymousLogin.bind(Object(ge.a)(n)),n}return Object(l.a)(a,[{key:"tryGoogleLogin",value:function(){var e=this;this.state.firebase.isUserAuthenticated().then((function(t){t||e.state.firebase.authenticateUser().then((function(){e.props.success(),e.props.history.push(e.getReferrerUrl())}))}))}},{key:"tryAnonymousLogin",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.state.firebase.isUserAuthenticated();case 2:if(e.sent){e.next=4;break}this.state.firebase.authenticateAnonymousUser().then((function(){console.log(t.props.location.state),t.props.success(),t.props.history.push(t.getReferrerUrl())}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"#"},r.a.createElement("img",{src:dt.a,width:"30",height:"30",className:"d-inline-block align-top",alt:""}),"Designer Boards")),r.a.createElement(R.a,{fluid:!0,className:"d-flex w-100 h-100 p-3 mx-auto flex-column"},r.a.createElement("section",{className:"login-section"},r.a.createElement(R.a,null,r.a.createElement(oe.a,{className:"align-items-center justify-content-center"},r.a.createElement(ce.a,null,r.a.createElement("div",{className:"pt-3"},r.a.createElement("h2",null,"Get Started!"),r.a.createElement("p",{style:{textAlign:"center"}},"It doesn't need a manual.")))),r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,r.a.createElement(W.a,{className:"btn btn-block btn-social btn-google",onClick:this.tryGoogleLogin},r.a.createElement("span",{className:"fa fa-google"}),"Sign in with Google")),r.a.createElement(ce.a,null,r.a.createElement(W.a,{className:"btn btn-block btn-social",onClick:this.tryAnonymousLogin},r.a.createElement("span",{className:"fa fa-user"}),"Sign in as Anonymous User")))),r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},r.a.createElement("path",{fill:"#0099ff","fill-opacity":"1",d:"M0,256L80,213.3C160,171,320,85,480,85.3C640,85,800,171,960,213.3C1120,256,1280,256,1360,256L1440,256L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z"}))),r.a.createElement("header",null,r.a.createElement(R.a,null,r.a.createElement(oe.a,{className:"justify-content-center align-items-center"},r.a.createElement(ce.a,null,r.a.createElement("div",{className:"pt-3"},r.a.createElement("h3",null,"Build Dynamic Beautiful Boards"),r.a.createElement("p",null,"You often find yourself working on the excel sheet and then sharing it with the group. Well, no need for that anymore. You can use this platform to quickly create beautiful looking boards for your teams to work together."))),r.a.createElement(ce.a,null,r.a.createElement("div",{className:"pt-3"},r.a.createElement(kt.a,{src:ft.a,alt:"Designer Boards"})))))),r.a.createElement("section",{className:"features"},r.a.createElement(R.a,null,r.a.createElement(oe.a,null,r.a.createElement(ce.a,null,r.a.createElement("h1",{style:{borderBottom:"2px solid black"}},"Features"))),r.a.createElement(oe.a,{className:"justify-content-center align-items-center p-3"},r.a.createElement(ce.a,null,r.a.createElement(kt.a,{src:vt.a,className:"img-fluid"})),r.a.createElement(ce.a,null,r.a.createElement("h3",null,"In-built Retro Board Template"),r.a.createElement("p",null,"Get started with your team's retrospective meetings in less than a minute. It comes with the pre-build template to get you started quickly."))),r.a.createElement(oe.a,{className:"justify-content-center align-items-center p-3"},r.a.createElement(ce.a,null,r.a.createElement("h3",null,"Create Your Own Colorful Templates"),r.a.createElement("p",null,"Don't worry if pre-built templates doesn't serve your purpose. You can create your colorful templates with a very simple interface.")),r.a.createElement(ce.a,null,r.a.createElement(kt.a,{src:yt.a,className:"img-fluid"}))),r.a.createElement(oe.a,{className:"justify-content-center align-items-center p-3"},r.a.createElement(ce.a,null,r.a.createElement(kt.a,{src:Et.a,className:"img-fluid"})),r.a.createElement(ce.a,null,r.a.createElement("h3",null,"Dashboard To Manage All Your Boards"),r.a.createElement("p",null,"Having a lot of boards can be challenging to keep track of. That's why it comes with your own dashboard so that you can find all your dashboards in one place."))))),r.a.createElement(_,null)))}}]),a}(r.a.Component)),wt=Object(d.f)(Ot),xt=function(e){return Object(n.useEffect)((function(){e.service.logout()}),[e]),r.a.createElement(d.a,{to:"/login"})},jt=function(e){var t=Object(n.useState)(!1),a=Object(se.a)(t,2),r=a[0],o=a[1],c=function(){return o(!1)},s=Object(n.useState)(""),l=Object(se.a)(s,2),i=l[0],u=l[1],m=Object(n.useState)({error:!0,msg:""}),d=Object(se.a)(m,2),p=d[0],f=d[1];return n.createElement(n.Fragment,null,n.createElement(W.a,{variant:"link",onClick:function(){return o(!0)}},n.createElement("i",{className:"fa fa-user-plus fa-lg"})),n.createElement(ue.a,{show:r,onHide:c},n.createElement(ue.a.Header,null,n.createElement("h4",null,"Add New Team Member"),n.createElement(we.a,{variant:"primary"},e.teamName)),n.createElement(ue.a.Body,null,n.createElement(ke.a,{autoComplete:"disabled",onChange:function(e){f({error:!1,msg:""}),u(e.currentTarget.value)},placeholder:"Enter team member's email address",type:"email"}),p.error?n.createElement("span",{className:"text-danger"},p.msg):n.createElement(n.Fragment,null)),n.createElement(ue.a.Footer,null,n.createElement(W.a,{variant:"primary",onClick:function(){var t;i===(null===(t=C.getInstance().getLoggedInUser())||void 0===t?void 0:t.email)?f({error:!0,msg:"LOL! You cannot add your own email!!!"}):(e.addTeamMember(i),c(),f({error:!1,msg:""}))}},"Add Member"),n.createElement(W.a,{variant:"light",onClick:c},"Cancel"))))},Tt=function(e){var t=Object(n.useState)(new g),a=Object(se.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(!1),s=Object(se.a)(c,2),l=s[0],i=s[1],u=function(){return i(!1)},m=function(){e.removeMember(r),u()},d=function(t){return e.team.createdBy===t};return function(){var t;return n.createElement(n.Fragment,null,n.createElement(le.a,null,n.createElement(le.a.Header,null,n.createElement("div",{className:"pull-right"},n.createElement(jt,{teamName:e.team.teamName,addTeamMember:function(t){return function(t,a){e.addTeamMember(t,a)}(e.team,t)}}),d(null===(t=C.getInstance().getLoggedInUser())||void 0===t?void 0:t.uid)?n.createElement(W.a,{onClick:function(){return e.deleteTeam(e.team)},variant:"link",style:{color:"crimson"}},n.createElement("i",{className:"fa fa-lg fa-trash"})):n.createElement(n.Fragment,null)),n.createElement("h4",null,e.team.teamName)),n.createElement(le.a.Body,null,n.createElement(Qe.a,null,e.team.teamMembers.map((function(e,t){var a;return n.createElement(Ze.a,{key:t},n.createElement("div",{style:{marginLeft:"auto !important"}},n.createElement("div",{className:"pull-right"},d(null===(a=C.getInstance().getLoggedInUser())||void 0===a?void 0:a.uid)?n.createElement(W.a,{variant:"link",onClick:function(){return o(e),void i(!0)}}," ",n.createElement("i",{style:{color:"crimson"},className:"fa fa-xs fa-remove"})):n.createElement(n.Fragment,null)),e.displayName," ",n.createElement("br",null),n.createElement("span",{className:"text-muted"},e.email)," ",n.createElement("br",null),d(e.uid)?n.createElement(we.a,{variant:"primary"},"owner"):n.createElement(we.a,{variant:"secondary"},"member")))}))))),n.createElement(ue.a,{show:l,onHide:u},n.createElement(ue.a.Body,null,n.createElement("h3",null,"Are you sure you want to remove ",n.createElement("strong",null,r.displayName)," from the Team?")),n.createElement(ue.a.Footer,null,n.createElement(W.a,{onClick:m},"Yes"),n.createElement(W.a,{onClick:u},"Cancel"))))}()},St=function e(){Object(s.a)(this,e),this.teamId="",this.teamName="",this.teamMembers=[],this.createdBy=""},Nt=function(e){var t=Object(n.useState)(!1),a=Object(se.a)(t,2),r=a[0],o=a[1],c=function(){return o(!1)},s=Object(n.useState)(""),l=Object(se.a)(s,2),i=l[0],u=l[1];return n.createElement(n.Fragment,null,n.createElement(W.a,{variant:"primary",onClick:function(){return o(!0)}},"Create New Team"),n.createElement(ue.a,{show:r,onHide:c},n.createElement(ue.a.Header,null,n.createElement("h3",null,"Create New Team")),n.createElement(ue.a.Body,null,n.createElement(ke.a,{autoFocus:!0,autoComplete:"disabled",onChange:function(e){u(e.currentTarget.value)},placeholder:"Enter your team name..."})),n.createElement(ue.a.Footer,null,n.createElement(W.a,{variant:"primary",onClick:function(){var t,a=new St;a.teamName=i,a.teamMembers=[],a.createdBy=null===(t=C.getInstance().getLoggedInUser())||void 0===t?void 0:t.uid,e.createTeam(a),c()}},"Create"),n.createElement(W.a,{variant:"light",onClick:c},"Cancel"))))},Bt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={teams:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){document.title="Teams",this.getMyTeams()}},{key:"getMyTeams",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.teamsService.getMyTeams();case 2:t=e.sent,this.setState({teams:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.createElement(n.Fragment,null,n.createElement(oe.a,null,n.createElement(ce.a,{md:4,sm:6},n.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},n.createElement("h3",null,"Create New Team")))),n.createElement(oe.a,null,n.createElement(ce.a,{xs:6,md:4},n.createElement(Nt,{createTeam:function(t){return e.createTeam(t)}}))),n.createElement("hr",null),n.createElement(oe.a,null,n.createElement(ce.a,{md:4,sm:6},n.createElement("div",{className:"pb-2 mt-4 mb-2 border-bottom"},n.createElement("h3",null,"Existing Teams")))),n.createElement(oe.a,null,this.state.teams.map((function(t,a){return n.createElement(ce.a,{md:4,key:a},n.createElement(Tt,{team:t,removeMember:function(a){e.removeMember(t,a)},addTeamMember:function(t,a){return e.addTeamMember(t,a)},deleteTeam:function(t){return e.deleteTeam(t)}}))}))))}},{key:"createTeam",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Creating new team...",this.state),e.next=3,this.props.teamsService.createNewTeam(t);case 3:a=e.sent,n=[].concat(Object(G.a)(this.state.teams),[a]),this.setState({teams:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeMember",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Removing member"),e.prev=1,e.next=4,this.props.teamsService.removeTeamMember(t,a);case 4:n=this.state.teams.map((function(e){return Object(K.a)(Object(K.a)({},e),{},{teamMembers:e.teamMembers.filter((function(e){return e.uid!==a.uid}))})})),this.setState({teams:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error: "+e.t0.msg,e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"addTeamMember",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Adding team member..."),e.prev=1,e.next=4,this.props.teamsService.getTeamMember(a);case 4:return n=e.sent,e.next=7,this.props.teamsService.addTeamMember(t,n);case 7:r=e.sent,o=this.state.teams.map((function(e){return e.teamId===t.teamId?(t.teamMembers=r.teamMembers,t):e})),this.setState({teams:o}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("Team member with the given email is not found!!!");case 15:case"end":return e.stop()}}),e,this,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteTeam",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.teamsService.deleteTeam(t);case 3:a=this.state.teams.filter((function(e){return e.teamId!==t.teamId})),this.setState({teams:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Cannot delete team!");case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),a}(n.Component),It=Object(d.f)(Bt),Ct=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"createNewTeam",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.post("/teams",t);case 2:if(201!==(a=e.sent).status){e.next=8;break}return e.next=6,T.get(a.headers.location);case 6:return n=e.sent,e.abrupt("return",n.data);case 8:throw Error("Encountered some trouble while trying to create new team!");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addTeamMember",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.post("/teams/member",{team:t,teamMember:a});case 2:if(201!==(n=e.sent).status){e.next=11;break}return e.next=6,T.get(n.headers.location);case 6:if(200!==(r=e.sent).status){e.next=11;break}return e.next=10,r.data;case 10:return e.abrupt("return",e.sent);case 11:throw Error("Member cannot be added. Response Status: "+n.status);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"removeTeamMember",value:function(){var e=Object(h.a)(f.a.mark((function e(t,a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.delete("/teams/".concat(t.teamId,"/member/").concat(a.uid));case 2:if(204===(n=e.sent).status){e.next=5;break}throw Error("error deleting team member. Status: "+n.status);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getTeamMember",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/users",{params:{email:t}});case 2:if(200!==(a=e.sent).status){e.next=5;break}return e.abrupt("return",a.data);case 5:throw Error("No user found! Response Status: "+a.status);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTeam",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.delete("/teams/".concat(t.teamId));case 2:if(204===(a=e.sent).status){e.next=5;break}throw Error("Encountered problem while deleting the team. Response Status: "+a.status);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMyTeams",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/teams");case 2:if(200!==(t=e.sent).status){e.next=7;break}return e.next=6,t.data;case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();Ct.instance=void 0;var Rt=Ct,_t=function(){function e(){Object(s.a)(this,e)}return Object(l.a)(e,[{key:"createBoardTemplate",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.post("/templates",t);case 2:if(201!==(a=e.sent).status){e.next=8;break}return e.next=6,T.get(a.headers.location);case 6:return n=e.sent,e.abrupt("return",n.data);case 8:throw Error("Cannot create template. There is some error in the backend. Status Code: "+a.status);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBoardTemplates",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.get("/templates");case 2:if(200!==(t=e.sent).status){e.next=5;break}return e.abrupt("return",t.data);case 5:throw Error("Error fetching templates. Status: "+t.status);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteBoardTemplate",value:function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.delete("/templates/".concat(t.templateId));case 2:if(204!==(a=e.sent).status){e.next=5;break}return e.abrupt("return");case 5:throw Error("Error deleting template. Status: "+a.status);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getInstance",value:function(){return new e}}]),e}(),Lt=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLogInFlowExecuted:!1},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{store:re},r.a.createElement(m.a,null,r.a.createElement(d.b,{exact:!0,path:"/login",component:function(t){return r.a.createElement(J,{success:function(){return e.setState({isLogInFlowExecuted:!0})}},r.a.createElement(wt,{success:function(){return e.setState({isLogInFlowExecuted:!0})}}))}}),r.a.createElement(d.b,{exact:!0,path:"/",component:function(e){return r.a.createElement(F,null,r.a.createElement(qe,Object.assign({},e,{retroBoardService:We.getInstance(),templateService:_t.getInstance()})))}}),r.a.createElement(d.b,{exact:!0,path:"/teams",component:function(e){return r.a.createElement(F,null,r.a.createElement(It,Object.assign({},e,{teamsService:Rt.getInstance()})))}}),r.a.createElement(d.b,{exact:!0,path:"/retro-board/:uid/:retroBoardId",component:function(e){return r.a.createElement(F,null,r.a.createElement(ut,Object.assign({},e,{retroBoardService:We.getInstance(),teamsService:Rt.getInstance()})))}}),r.a.createElement(d.b,{exact:!0,path:"/logout",component:function(e){return r.a.createElement(F,null,r.a.createElement(xt,{service:C.getInstance()}))}})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(578),a(579),a(580),a(581);c.a.render(r.a.createElement(P.a,{store:re},r.a.createElement(Lt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[254,1,2]]]);
//# sourceMappingURL=main.a1147e8d.chunk.js.map